{
  "version": 4,
  "terraform_version": "1.13.1",
  "serial": 313,
  "lineage": "b84a3dda-fee8-b784-1a8c-aea9ee4b074e",
  "outputs": {
    "action_group_id": {
      "value": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/actionGroups/site-action-group-prod",
      "type": "string"
    },
    "log_analytics_workspace_id": {
      "value": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.OperationalInsights/workspaces/site-loganalytics-prod",
      "type": "string"
    },
    "monitoring_resource_group_id": {
      "value": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod",
      "type": "string"
    },
    "monitoring_resources": {
      "value": {
        "action_group": "site-action-group-prod",
        "application_insights": "site-appinsights-prod",
        "front_door_alerts": [
          "Backend Health Probe Failures",
          "Latency Spikes",
          "Cache Hit Ratio \u003c 80%"
        ],
        "log_analytics_workspace": "site-loganalytics-prod",
        "mysql_alerts": [
          "CPU Utilization \u003e 85%",
          "Storage Usage \u003e 80%",
          "High Connection Count",
          "Deadlocks \u003e 0",
          "Failed Login Attempts \u003e 0",
          "Long-running Queries \u003e 0"
        ],
        "redis_alerts": [
          "Memory Usage \u003e 80%",
          "High CPU Usage \u003e 80%",
          "Connection Spikes/Drops"
        ],
        "storage_account_alerts": [
          "Transaction Failures \u003e 0",
          "Capacity Usage \u003e threshold",
          "High Latency \u003e 500ms",
          "Availability Interruptions"
        ],
        "web_app_alerts": [
          "Memory Usage \u003e 1024 MB",
          "HTTP 5xx Errors \u003e 0",
          "Response Time \u003e 1000 ms",
          "Restart Events"
        ]
      },
      "type": [
        "object",
        {
          "action_group": "string",
          "application_insights": "string",
          "front_door_alerts": [
            "tuple",
            [
              "string",
              "string",
              "string"
            ]
          ],
          "log_analytics_workspace": "string",
          "mysql_alerts": [
            "tuple",
            [
              "string",
              "string",
              "string",
              "string",
              "string",
              "string"
            ]
          ],
          "redis_alerts": [
            "tuple",
            [
              "string",
              "string",
              "string"
            ]
          ],
          "storage_account_alerts": [
            "tuple",
            [
              "string",
              "string",
              "string",
              "string"
            ]
          ],
          "web_app_alerts": [
            "tuple",
            [
              "string",
              "string",
              "string",
              "string"
            ]
          ]
        }
      ]
    },
    "network_security_group_ids": {
      "value": {
        "app": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Network/networkSecurityGroups/site-nsg-app-prod",
        "database": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Network/networkSecurityGroups/site-nsg-database-prod",
        "front": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Network/networkSecurityGroups/site-nsg-front-prod"
      },
      "type": [
        "object",
        {
          "app": "string",
          "database": "string",
          "front": "string"
        }
      ]
    },
    "resource_group_id": {
      "value": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod",
      "type": "string"
    },
    "storage_account_id": {
      "value": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Storage/storageAccounts/siteazstorageprod",
      "type": "string"
    },
    "storage_account_name": {
      "value": "siteazstorageprod",
      "type": "string"
    },
    "subnet_ids": {
      "value": {
        "app": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Network/virtualNetworks/site-vnet-prod/subnets/app-subnet",
        "database": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Network/virtualNetworks/site-vnet-prod/subnets/database-subnet",
        "front": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Network/virtualNetworks/site-vnet-prod/subnets/front-subnet"
      },
      "type": [
        "object",
        {
          "app": "string",
          "database": "string",
          "front": "string"
        }
      ]
    },
    "virtual_network_id": {
      "value": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Network/virtualNetworks/site-vnet-prod",
      "type": "string"
    },
    "virtual_network_name": {
      "value": "site-vnet-prod",
      "type": "string"
    }
  },
  "resources": [
    {
      "mode": "managed",
      "type": "azapi_resource",
      "name": "app_service_plan",
      "provider": "provider[\"registry.terraform.io/azure/azapi\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "body": {
              "value": {
                "kind": "linux",
                "properties": {
                  "elasticScaleEnabled": true,
                  "freeOfferExpirationTime": null,
                  "hostingEnvironmentProfile": null,
                  "hyperV": false,
                  "isSpot": false,
                  "isXenon": false,
                  "kubeEnvironmentProfile": null,
                  "maximumElasticWorkerCount": 3,
                  "perSiteScaling": false,
                  "reserved": true,
                  "spotExpirationTime": null,
                  "targetWorkerCount": 0,
                  "targetWorkerSizeId": 0,
                  "workerTierName": null,
                  "zoneRedundant": false
                },
                "sku": {
                  "capacity": 1,
                  "family": "Pv3",
                  "name": "P0v3",
                  "size": "P0v3",
                  "tier": "Premium0V3"
                }
              },
              "type": [
                "object",
                {
                  "kind": "string",
                  "properties": [
                    "object",
                    {
                      "elasticScaleEnabled": "bool",
                      "freeOfferExpirationTime": "dynamic",
                      "hostingEnvironmentProfile": "dynamic",
                      "hyperV": "bool",
                      "isSpot": "bool",
                      "isXenon": "bool",
                      "kubeEnvironmentProfile": "dynamic",
                      "maximumElasticWorkerCount": "number",
                      "perSiteScaling": "bool",
                      "reserved": "bool",
                      "spotExpirationTime": "dynamic",
                      "targetWorkerCount": "number",
                      "targetWorkerSizeId": "number",
                      "workerTierName": "dynamic",
                      "zoneRedundant": "bool"
                    }
                  ],
                  "sku": [
                    "object",
                    {
                      "capacity": "number",
                      "family": "string",
                      "name": "string",
                      "size": "string",
                      "tier": "string"
                    }
                  ]
                }
              ]
            },
            "create_headers": null,
            "create_query_parameters": null,
            "delete_headers": null,
            "delete_query_parameters": null,
            "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Web/serverFarms/site-appserviceplan-prod",
            "identity": [],
            "ignore_casing": false,
            "ignore_missing_property": true,
            "location": "centralus",
            "locks": null,
            "name": "site-appserviceplan-prod",
            "output": {
              "value": {
                "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Web/serverfarms/site-appserviceplan-prod",
                "properties": {
                  "geoRegion": "Central US",
                  "maximumNumberOfWorkers": 30,
                  "numberOfSites": 2,
                  "numberOfWorkers": 1,
                  "provisioningState": "Succeeded",
                  "resourceGroup": "site-group-prod",
                  "status": "Ready",
                  "subscription": "c785c74c-7bd9-4afa-ac0a-c5d7912e2fda"
                },
                "tags": {
                  "environment": "prod",
                  "lifetime": "permanent",
                  "owner": "Daniel\u0026Chris"
                },
                "type": "Microsoft.Web/serverfarms"
              },
              "type": [
                "object",
                {
                  "id": "string",
                  "properties": [
                    "object",
                    {
                      "geoRegion": "string",
                      "maximumNumberOfWorkers": "number",
                      "numberOfSites": "number",
                      "numberOfWorkers": "number",
                      "provisioningState": "string",
                      "resourceGroup": "string",
                      "status": "string",
                      "subscription": "string"
                    }
                  ],
                  "tags": [
                    "object",
                    {
                      "environment": "string",
                      "lifetime": "string",
                      "owner": "string"
                    }
                  ],
                  "type": "string"
                }
              ]
            },
            "parent_id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod",
            "read_headers": null,
            "read_query_parameters": null,
            "replace_triggers_external_values": null,
            "replace_triggers_refs": null,
            "response_export_values": null,
            "retry": null,
            "schema_validation_enabled": true,
            "sensitive_body": null,
            "tags": {
              "environment": "prod",
              "lifetime": "permanent",
              "owner": "Daniel\u0026Chris"
            },
            "timeouts": null,
            "type": "Microsoft.Web/serverFarms@2024-04-01",
            "update_headers": null,
            "update_query_parameters": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJzZW5zaXRpdmVfYm9keSI6ImV5Sm9ZWE5vSWpvaVpFTk9UMjFMTDI1VFdTc3hNblpJZW1GelRGaHBjM2Q2YkVkVU5WVklRVGRxUVVkWmEzWnRRM1ZSY3owaWZRPT0ifQ=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azapi_resource",
      "name": "drupal_app",
      "provider": "provider[\"registry.terraform.io/azure/azapi\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "body": {
              "value": {
                "identity": {
                  "type": "SystemAssigned"
                },
                "kind": "app,linux",
                "properties": {
                  "autoGeneratedDomainNameLabelScope": "TenantReuse",
                  "clientAffinityEnabled": false,
                  "clientCertEnabled": false,
                  "clientCertExclusionPaths": null,
                  "clientCertMode": "Required",
                  "containerSize": 0,
                  "dailyMemoryTimeQuota": 0,
                  "dnsConfiguration": {},
                  "enabled": true,
                  "endToEndEncryptionEnabled": false,
                  "hostNameSslStates": [],
                  "hostNamesDisabled": false,
                  "hostingEnvironmentProfile": null,
                  "httpsOnly": true,
                  "hyperV": false,
                  "ipMode": "IPv4",
                  "isXenon": false,
                  "keyVaultReferenceIdentity": "SystemAssigned",
                  "managedEnvironmentId": null,
                  "publicNetworkAccess": "Enabled",
                  "redundancyMode": "None",
                  "reserved": true,
                  "resourceConfig": null,
                  "scmSiteAlsoStopped": false,
                  "serverFarmId": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Web/serverFarms/site-appserviceplan-prod",
                  "siteConfig": {
                    "alwaysOn": true,
                    "functionAppScaleLimit": 0,
                    "linuxFxVersion": "PHP|8.2",
                    "minimumElasticInstanceCount": 1,
                    "numberOfWorkers": 1
                  },
                  "storageAccountRequired": false,
                  "virtualNetworkSubnetId": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Network/virtualNetworks/site-vnet-prod/subnets/app-subnet",
                  "vnetBackupRestoreEnabled": false,
                  "vnetContentShareEnabled": false,
                  "vnetImagePullEnabled": false,
                  "vnetRouteAllEnabled": true,
                  "workloadProfileName": null
                }
              },
              "type": [
                "object",
                {
                  "identity": [
                    "object",
                    {
                      "type": "string"
                    }
                  ],
                  "kind": "string",
                  "properties": [
                    "object",
                    {
                      "autoGeneratedDomainNameLabelScope": "string",
                      "clientAffinityEnabled": "bool",
                      "clientCertEnabled": "bool",
                      "clientCertExclusionPaths": "dynamic",
                      "clientCertMode": "string",
                      "containerSize": "number",
                      "dailyMemoryTimeQuota": "number",
                      "dnsConfiguration": [
                        "object",
                        {}
                      ],
                      "enabled": "bool",
                      "endToEndEncryptionEnabled": "bool",
                      "hostNameSslStates": [
                        "tuple",
                        []
                      ],
                      "hostNamesDisabled": "bool",
                      "hostingEnvironmentProfile": "dynamic",
                      "httpsOnly": "bool",
                      "hyperV": "bool",
                      "ipMode": "string",
                      "isXenon": "bool",
                      "keyVaultReferenceIdentity": "string",
                      "managedEnvironmentId": "dynamic",
                      "publicNetworkAccess": "string",
                      "redundancyMode": "string",
                      "reserved": "bool",
                      "resourceConfig": "dynamic",
                      "scmSiteAlsoStopped": "bool",
                      "serverFarmId": "string",
                      "siteConfig": [
                        "object",
                        {
                          "alwaysOn": "bool",
                          "functionAppScaleLimit": "number",
                          "linuxFxVersion": "string",
                          "minimumElasticInstanceCount": "number",
                          "numberOfWorkers": "number"
                        }
                      ],
                      "storageAccountRequired": "bool",
                      "virtualNetworkSubnetId": "string",
                      "vnetBackupRestoreEnabled": "bool",
                      "vnetContentShareEnabled": "bool",
                      "vnetImagePullEnabled": "bool",
                      "vnetRouteAllEnabled": "bool",
                      "workloadProfileName": "dynamic"
                    }
                  ]
                }
              ]
            },
            "create_headers": null,
            "create_query_parameters": null,
            "delete_headers": null,
            "delete_query_parameters": null,
            "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Web/sites/site-drupalservice-prod",
            "identity": [],
            "ignore_casing": false,
            "ignore_missing_property": true,
            "location": "centralus",
            "locks": null,
            "name": "site-drupalservice-prod",
            "output": {
              "value": {
                "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Web/sites/site-drupalservice-prod",
                "identity": {
                  "principalId": "e0e557a0-4c11-40bb-bd0e-dcd13e200bc8",
                  "tenantId": "0fdac2a9-9e3b-42ca-860e-1e01032148aa"
                },
                "properties": {
                  "availabilityState": "Normal",
                  "defaultHostName": "site-drupalservice-prod-e2a2arbccba4b5bh.centralus-01.azurewebsites.net",
                  "enabledHostNames": [
                    "site-drupalservice-prod-e2a2arbccba4b5bh.centralus-01.azurewebsites.net",
                    "site-drupalservice-prod-e2a2arbccba4b5bh.scm.centralus-01.azurewebsites.net"
                  ],
                  "hostNameSslStates": [
                    {},
                    {}
                  ],
                  "hostNames": [
                    "site-drupalservice-prod-e2a2arbccba4b5bh.centralus-01.azurewebsites.net"
                  ],
                  "outboundIpAddresses": "20.83.2.253,20.83.3.146,20.83.3.184,20.83.3.189,20.83.3.230,20.83.4.4,13.89.172.3",
                  "possibleOutboundIpAddresses": "104.43.201.250,104.208.37.158,104.208.34.190,104.208.36.42,104.208.36.234,104.43.202.37,104.208.35.64,104.43.196.83,104.43.201.174,20.83.2.253,20.83.3.146,20.83.3.184,20.83.3.189,20.83.3.230,20.83.4.4,20.83.5.2,20.83.5.28,20.83.5.66,20.83.5.146,20.83.5.181,20.83.5.216,13.89.172.3",
                  "repositorySiteName": "site-drupalservice-prod",
                  "resourceGroup": "site-group-prod",
                  "sku": "Premium0V3",
                  "state": "Running",
                  "usageState": "Normal"
                },
                "tags": {
                  "environment": "prod",
                  "lifetime": "permanent",
                  "owner": "Daniel\u0026Chris"
                },
                "type": "Microsoft.Web/sites"
              },
              "type": [
                "object",
                {
                  "id": "string",
                  "identity": [
                    "object",
                    {
                      "principalId": "string",
                      "tenantId": "string"
                    }
                  ],
                  "properties": [
                    "object",
                    {
                      "availabilityState": "string",
                      "defaultHostName": "string",
                      "enabledHostNames": [
                        "tuple",
                        [
                          "string",
                          "string"
                        ]
                      ],
                      "hostNameSslStates": [
                        "tuple",
                        [
                          [
                            "object",
                            {}
                          ],
                          [
                            "object",
                            {}
                          ]
                        ]
                      ],
                      "hostNames": [
                        "tuple",
                        [
                          "string"
                        ]
                      ],
                      "outboundIpAddresses": "string",
                      "possibleOutboundIpAddresses": "string",
                      "repositorySiteName": "string",
                      "resourceGroup": "string",
                      "sku": "string",
                      "state": "string",
                      "usageState": "string"
                    }
                  ],
                  "tags": [
                    "object",
                    {
                      "environment": "string",
                      "lifetime": "string",
                      "owner": "string"
                    }
                  ],
                  "type": "string"
                }
              ]
            },
            "parent_id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod",
            "read_headers": null,
            "read_query_parameters": null,
            "replace_triggers_external_values": null,
            "replace_triggers_refs": null,
            "response_export_values": null,
            "retry": null,
            "schema_validation_enabled": true,
            "sensitive_body": null,
            "tags": {
              "environment": "prod",
              "lifetime": "permanent",
              "owner": "Daniel\u0026Chris"
            },
            "timeouts": null,
            "type": "Microsoft.Web/sites@2024-04-01",
            "update_headers": null,
            "update_query_parameters": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJzZW5zaXRpdmVfYm9keSI6ImV5Sm9ZWE5vSWpvaVpFTk9UMjFMTDI1VFdTc3hNblpJZW1GelRGaHBjM2Q2YkVkVU5WVklRVGRxUVVkWmEzWnRRM1ZSY3owaWZRPT0ifQ==",
          "dependencies": [
            "azapi_resource.app_service_plan",
            "azapi_resource.site-group",
            "azapi_resource.site-nsg-app",
            "azapi_resource.site-nsg-database",
            "azapi_resource.site-nsg-front",
            "azapi_resource.site-vnet"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azapi_resource",
      "name": "frontdoor_endpoint",
      "provider": "provider[\"registry.terraform.io/azure/azapi\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "body": {
              "value": {
                "properties": {
                  "enabledState": "Enabled"
                }
              },
              "type": [
                "object",
                {
                  "properties": [
                    "object",
                    {
                      "enabledState": "string"
                    }
                  ]
                }
              ]
            },
            "create_headers": null,
            "create_query_parameters": null,
            "delete_headers": null,
            "delete_query_parameters": null,
            "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Cdn/profiles/site-frontdoor-prod/afdEndpoints/site-fde-prod",
            "identity": [],
            "ignore_casing": false,
            "ignore_missing_property": true,
            "location": "global",
            "locks": null,
            "name": "site-fde-prod",
            "output": {
              "value": {
                "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourcegroups/site-group-prod/providers/Microsoft.Cdn/profiles/site-frontdoor-prod/afdendpoints/site-fde-prod",
                "properties": {
                  "deploymentStatus": "NotStarted",
                  "hostName": "site-fde-prod-c6egh0e5anewbac3.a03.azurefd.net",
                  "provisioningState": "Succeeded"
                },
                "tags": {
                  "environment": "prod",
                  "lifetime": "permanent",
                  "owner": "Daniel\u0026Chris"
                },
                "type": "Microsoft.Cdn/profiles/afdendpoints"
              },
              "type": [
                "object",
                {
                  "id": "string",
                  "properties": [
                    "object",
                    {
                      "deploymentStatus": "string",
                      "hostName": "string",
                      "provisioningState": "string"
                    }
                  ],
                  "tags": [
                    "object",
                    {
                      "environment": "string",
                      "lifetime": "string",
                      "owner": "string"
                    }
                  ],
                  "type": "string"
                }
              ]
            },
            "parent_id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Cdn/profiles/site-frontdoor-prod",
            "read_headers": null,
            "read_query_parameters": null,
            "replace_triggers_external_values": null,
            "replace_triggers_refs": null,
            "response_export_values": null,
            "retry": null,
            "schema_validation_enabled": true,
            "sensitive_body": null,
            "tags": {
              "environment": "prod",
              "lifetime": "permanent",
              "owner": "Daniel\u0026Chris"
            },
            "timeouts": null,
            "type": "Microsoft.Cdn/profiles/afdEndpoints@2024-09-01",
            "update_headers": null,
            "update_query_parameters": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJzZW5zaXRpdmVfYm9keSI6ImV5Sm9ZWE5vSWpvaVpFTk9UMjFMTDI1VFdTc3hNblpJZW1GelRGaHBjM2Q2YkVkVU5WVklRVGRxUVVkWmEzWnRRM1ZSY3owaWZRPT0ifQ==",
          "dependencies": [
            "azapi_resource.frontdoor_profile"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azapi_resource",
      "name": "frontdoor_profile",
      "provider": "provider[\"registry.terraform.io/azure/azapi\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "body": {
              "value": {
                "properties": {
                  "originResponseTimeoutSeconds": 60
                },
                "sku": {
                  "name": "Standard_AzureFrontDoor"
                }
              },
              "type": [
                "object",
                {
                  "properties": [
                    "object",
                    {
                      "originResponseTimeoutSeconds": "number"
                    }
                  ],
                  "sku": [
                    "object",
                    {
                      "name": "string"
                    }
                  ]
                }
              ]
            },
            "create_headers": null,
            "create_query_parameters": null,
            "delete_headers": null,
            "delete_query_parameters": null,
            "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Cdn/profiles/site-frontdoor-prod",
            "identity": [],
            "ignore_casing": false,
            "ignore_missing_property": true,
            "location": "global",
            "locks": null,
            "name": "site-frontdoor-prod",
            "output": {
              "value": {
                "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourcegroups/site-group-prod/providers/Microsoft.Cdn/profiles/site-frontdoor-prod",
                "kind": "frontdoor",
                "properties": {
                  "frontDoorId": "d49e6ce6-c5df-49aa-842a-08d115aee11c",
                  "provisioningState": "Succeeded",
                  "resourceState": "Active"
                },
                "tags": {
                  "environment": "prod",
                  "lifetime": "permanent",
                  "owner": "Daniel\u0026Chris"
                },
                "type": "Microsoft.Cdn/profiles"
              },
              "type": [
                "object",
                {
                  "id": "string",
                  "kind": "string",
                  "properties": [
                    "object",
                    {
                      "frontDoorId": "string",
                      "provisioningState": "string",
                      "resourceState": "string"
                    }
                  ],
                  "tags": [
                    "object",
                    {
                      "environment": "string",
                      "lifetime": "string",
                      "owner": "string"
                    }
                  ],
                  "type": "string"
                }
              ]
            },
            "parent_id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod",
            "read_headers": null,
            "read_query_parameters": null,
            "replace_triggers_external_values": null,
            "replace_triggers_refs": null,
            "response_export_values": null,
            "retry": null,
            "schema_validation_enabled": true,
            "sensitive_body": null,
            "tags": {
              "environment": "prod",
              "lifetime": "permanent",
              "owner": "Daniel\u0026Chris"
            },
            "timeouts": null,
            "type": "Microsoft.Cdn/profiles@2025-04-15",
            "update_headers": null,
            "update_query_parameters": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJzZW5zaXRpdmVfYm9keSI6ImV5Sm9ZWE5vSWpvaVpFTk9UMjFMTDI1VFdTc3hNblpJZW1GelRGaHBjM2Q2YkVkVU5WVklRVGRxUVVkWmEzWnRRM1ZSY3owaWZRPT0ifQ=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azapi_resource",
      "name": "frontend_app",
      "provider": "provider[\"registry.terraform.io/azure/azapi\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "body": {
              "value": {
                "identity": {
                  "type": "SystemAssigned"
                },
                "kind": "app,linux",
                "properties": {
                  "autoGeneratedDomainNameLabelScope": "TenantReuse",
                  "clientAffinityEnabled": false,
                  "clientCertEnabled": false,
                  "clientCertExclusionPaths": null,
                  "clientCertMode": "Required",
                  "cloningInfo": null,
                  "containerSize": 0,
                  "customDomainVerificationId": null,
                  "dailyMemoryTimeQuota": 0,
                  "daprConfig": null,
                  "dnsConfiguration": {},
                  "enabled": true,
                  "endToEndEncryptionEnabled": false,
                  "functionAppConfig": null,
                  "hostNameSslStates": [],
                  "hostNamesDisabled": false,
                  "hostingEnvironmentProfile": null,
                  "httpsOnly": true,
                  "hyperV": false,
                  "ipMode": "IPv4",
                  "isXenon": false,
                  "keyVaultReferenceIdentity": "SystemAssigned",
                  "managedEnvironmentId": null,
                  "publicNetworkAccess": "Enabled",
                  "redundancyMode": "None",
                  "reserved": true,
                  "resourceConfig": null,
                  "scmSiteAlsoStopped": false,
                  "serverFarmId": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Web/serverFarms/site-appserviceplan-prod",
                  "siteConfig": {
                    "alwaysOn": true,
                    "functionAppScaleLimit": 0,
                    "linuxFxVersion": "NODE|20-lts",
                    "minimumElasticInstanceCount": 1,
                    "numberOfWorkers": 1
                  },
                  "storageAccountRequired": false,
                  "virtualNetworkSubnetId": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Network/virtualNetworks/site-vnet-prod/subnets/app-subnet",
                  "vnetBackupRestoreEnabled": false,
                  "vnetContentShareEnabled": false,
                  "vnetImagePullEnabled": false,
                  "vnetRouteAllEnabled": true,
                  "workloadProfileName": null
                }
              },
              "type": [
                "object",
                {
                  "identity": [
                    "object",
                    {
                      "type": "string"
                    }
                  ],
                  "kind": "string",
                  "properties": [
                    "object",
                    {
                      "autoGeneratedDomainNameLabelScope": "string",
                      "clientAffinityEnabled": "bool",
                      "clientCertEnabled": "bool",
                      "clientCertExclusionPaths": "dynamic",
                      "clientCertMode": "string",
                      "cloningInfo": "dynamic",
                      "containerSize": "number",
                      "customDomainVerificationId": "dynamic",
                      "dailyMemoryTimeQuota": "number",
                      "daprConfig": "dynamic",
                      "dnsConfiguration": [
                        "object",
                        {}
                      ],
                      "enabled": "bool",
                      "endToEndEncryptionEnabled": "bool",
                      "functionAppConfig": "dynamic",
                      "hostNameSslStates": [
                        "tuple",
                        []
                      ],
                      "hostNamesDisabled": "bool",
                      "hostingEnvironmentProfile": "dynamic",
                      "httpsOnly": "bool",
                      "hyperV": "bool",
                      "ipMode": "string",
                      "isXenon": "bool",
                      "keyVaultReferenceIdentity": "string",
                      "managedEnvironmentId": "dynamic",
                      "publicNetworkAccess": "string",
                      "redundancyMode": "string",
                      "reserved": "bool",
                      "resourceConfig": "dynamic",
                      "scmSiteAlsoStopped": "bool",
                      "serverFarmId": "string",
                      "siteConfig": [
                        "object",
                        {
                          "alwaysOn": "bool",
                          "functionAppScaleLimit": "number",
                          "linuxFxVersion": "string",
                          "minimumElasticInstanceCount": "number",
                          "numberOfWorkers": "number"
                        }
                      ],
                      "storageAccountRequired": "bool",
                      "virtualNetworkSubnetId": "string",
                      "vnetBackupRestoreEnabled": "bool",
                      "vnetContentShareEnabled": "bool",
                      "vnetImagePullEnabled": "bool",
                      "vnetRouteAllEnabled": "bool",
                      "workloadProfileName": "dynamic"
                    }
                  ]
                }
              ]
            },
            "create_headers": null,
            "create_query_parameters": null,
            "delete_headers": null,
            "delete_query_parameters": null,
            "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Web/sites/site-frontendservice-prod",
            "identity": [],
            "ignore_casing": false,
            "ignore_missing_property": true,
            "location": "centralus",
            "locks": null,
            "name": "site-frontendservice-prod",
            "output": {
              "value": {
                "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Web/sites/site-frontendservice-prod",
                "identity": {
                  "principalId": "d249a6c5-3a9d-4540-8581-bf079dfeeed3",
                  "tenantId": "0fdac2a9-9e3b-42ca-860e-1e01032148aa"
                },
                "properties": {
                  "availabilityState": "Normal",
                  "defaultHostName": "site-frontendservice-prod-dya9dcgma0fsgveh.centralus-01.azurewebsites.net",
                  "enabledHostNames": [
                    "site-frontendservice-prod-dya9dcgma0fsgveh.centralus-01.azurewebsites.net",
                    "site-frontendservice-prod-dya9dcgma0fsgveh.scm.centralus-01.azurewebsites.net"
                  ],
                  "hostNameSslStates": [
                    {},
                    {}
                  ],
                  "hostNames": [
                    "site-frontendservice-prod-dya9dcgma0fsgveh.centralus-01.azurewebsites.net"
                  ],
                  "outboundIpAddresses": "20.83.2.253,20.83.3.146,20.83.3.184,20.83.3.189,20.83.3.230,20.83.4.4,13.89.172.3",
                  "possibleOutboundIpAddresses": "104.43.201.250,104.208.37.158,104.208.34.190,104.208.36.42,104.208.36.234,104.43.202.37,104.208.35.64,104.43.196.83,104.43.201.174,20.83.2.253,20.83.3.146,20.83.3.184,20.83.3.189,20.83.3.230,20.83.4.4,20.83.5.2,20.83.5.28,20.83.5.66,20.83.5.146,20.83.5.181,20.83.5.216,13.89.172.3",
                  "repositorySiteName": "site-frontendservice-prod",
                  "resourceGroup": "site-group-prod",
                  "sku": "Premium0V3",
                  "state": "Running",
                  "usageState": "Normal"
                },
                "tags": {
                  "environment": "prod",
                  "lifetime": "permanent",
                  "owner": "Daniel\u0026Chris"
                },
                "type": "Microsoft.Web/sites"
              },
              "type": [
                "object",
                {
                  "id": "string",
                  "identity": [
                    "object",
                    {
                      "principalId": "string",
                      "tenantId": "string"
                    }
                  ],
                  "properties": [
                    "object",
                    {
                      "availabilityState": "string",
                      "defaultHostName": "string",
                      "enabledHostNames": [
                        "tuple",
                        [
                          "string",
                          "string"
                        ]
                      ],
                      "hostNameSslStates": [
                        "tuple",
                        [
                          [
                            "object",
                            {}
                          ],
                          [
                            "object",
                            {}
                          ]
                        ]
                      ],
                      "hostNames": [
                        "tuple",
                        [
                          "string"
                        ]
                      ],
                      "outboundIpAddresses": "string",
                      "possibleOutboundIpAddresses": "string",
                      "repositorySiteName": "string",
                      "resourceGroup": "string",
                      "sku": "string",
                      "state": "string",
                      "usageState": "string"
                    }
                  ],
                  "tags": [
                    "object",
                    {
                      "environment": "string",
                      "lifetime": "string",
                      "owner": "string"
                    }
                  ],
                  "type": "string"
                }
              ]
            },
            "parent_id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod",
            "read_headers": null,
            "read_query_parameters": null,
            "replace_triggers_external_values": null,
            "replace_triggers_refs": null,
            "response_export_values": null,
            "retry": null,
            "schema_validation_enabled": true,
            "sensitive_body": null,
            "tags": {
              "environment": "prod",
              "lifetime": "permanent",
              "owner": "Daniel\u0026Chris"
            },
            "timeouts": null,
            "type": "Microsoft.Web/sites@2024-04-01",
            "update_headers": null,
            "update_query_parameters": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJzZW5zaXRpdmVfYm9keSI6ImV5Sm9ZWE5vSWpvaVpFTk9UMjFMTDI1VFdTc3hNblpJZW1GelRGaHBjM2Q2YkVkVU5WVklRVGRxUVVkWmEzWnRRM1ZSY3owaWZRPT0ifQ==",
          "dependencies": [
            "azapi_resource.app_service_plan",
            "azapi_resource.site-group",
            "azapi_resource.site-nsg-app",
            "azapi_resource.site-nsg-database",
            "azapi_resource.site-nsg-front",
            "azapi_resource.site-vnet"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azapi_resource",
      "name": "mysql_flexible_server",
      "provider": "provider[\"registry.terraform.io/azure/azapi\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "body": {
              "value": {
                "properties": {
                  "administratorLogin": "sqlprodadmin",
                  "administratorLoginPassword": "My$QL@password123",
                  "availabilityZone": "1",
                  "backup": {
                    "backupIntervalHours": 24,
                    "backupRetentionDays": 7,
                    "geoRedundantBackup": "Enabled"
                  },
                  "highAvailability": {
                    "mode": "ZoneRedundant",
                    "standbyAvailabilityZone": ""
                  },
                  "maintenancePolicy": {
                    "patchStrategy": "Regular"
                  },
                  "maintenanceWindow": {
                    "customWindow": "Disabled",
                    "dayOfWeek": 0,
                    "startHour": 0,
                    "startMinute": 0
                  },
                  "network": {
                    "publicNetworkAccess": "Enabled"
                  },
                  "replicationRole": "None",
                  "storage": {
                    "autoGrow": "Enabled",
                    "autoIoScaling": "Enabled",
                    "iops": 528,
                    "logOnDisk": "Disabled",
                    "storageSizeGB": 76
                  },
                  "version": "8.0.21"
                },
                "sku": {
                  "name": "Standard_D8ds_v4",
                  "tier": "GeneralPurpose"
                }
              },
              "type": [
                "object",
                {
                  "properties": [
                    "object",
                    {
                      "administratorLogin": "string",
                      "administratorLoginPassword": "string",
                      "availabilityZone": "string",
                      "backup": [
                        "object",
                        {
                          "backupIntervalHours": "number",
                          "backupRetentionDays": "number",
                          "geoRedundantBackup": "string"
                        }
                      ],
                      "highAvailability": [
                        "object",
                        {
                          "mode": "string",
                          "standbyAvailabilityZone": "string"
                        }
                      ],
                      "maintenancePolicy": [
                        "object",
                        {
                          "patchStrategy": "string"
                        }
                      ],
                      "maintenanceWindow": [
                        "object",
                        {
                          "customWindow": "string",
                          "dayOfWeek": "number",
                          "startHour": "number",
                          "startMinute": "number"
                        }
                      ],
                      "network": [
                        "object",
                        {
                          "publicNetworkAccess": "string"
                        }
                      ],
                      "replicationRole": "string",
                      "storage": [
                        "object",
                        {
                          "autoGrow": "string",
                          "autoIoScaling": "string",
                          "iops": "number",
                          "logOnDisk": "string",
                          "storageSizeGB": "number"
                        }
                      ],
                      "version": "string"
                    }
                  ],
                  "sku": [
                    "object",
                    {
                      "name": "string",
                      "tier": "string"
                    }
                  ]
                }
              ]
            },
            "create_headers": null,
            "create_query_parameters": null,
            "delete_headers": null,
            "delete_query_parameters": null,
            "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.DBforMySQL/flexibleServers/site-mysqlserver01-prod",
            "identity": [],
            "ignore_casing": false,
            "ignore_missing_property": true,
            "location": "centralus",
            "locks": null,
            "name": "site-mysqlserver01-prod",
            "output": {
              "value": {
                "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.DBforMySQL/flexibleServers/site-mysqlserver01-prod",
                "properties": {
                  "backup": {
                    "earliestRestoreDate": "2025-09-12T15:41:11.9577818+00:00"
                  },
                  "fullVersion": "8.0.42",
                  "fullyQualifiedDomainName": "site-mysqlserver01-prod.mysql.database.azure.com",
                  "highAvailability": {
                    "state": "Healthy"
                  },
                  "privateEndpointConnections": [
                    {
                      "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.DBforMySQL/flexibleServers/site-mysqlserver01-prod/privateEndpointConnections/site-mysqlserver01-prod-pep-14879d4c-c990-4f8a-8401-98d42f7c980d",
                      "properties": {
                        "groupIds": [
                          "mysqlServer"
                        ],
                        "privateEndpoint": {
                          "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Network/privateEndpoints/site-mysqlserver01-prod-pep"
                        },
                        "provisioningState": "Ready"
                      }
                    }
                  ],
                  "replicaCapacity": 10,
                  "state": "Ready",
                  "storage": {
                    "storageSku": "Premium_ZRS"
                  }
                },
                "tags": {
                  "environment": "prod",
                  "lifetime": "permanent",
                  "owner": "Daniel\u0026Chris"
                },
                "type": "Microsoft.DBforMySQL/flexibleServers"
              },
              "type": [
                "object",
                {
                  "id": "string",
                  "properties": [
                    "object",
                    {
                      "backup": [
                        "object",
                        {
                          "earliestRestoreDate": "string"
                        }
                      ],
                      "fullVersion": "string",
                      "fullyQualifiedDomainName": "string",
                      "highAvailability": [
                        "object",
                        {
                          "state": "string"
                        }
                      ],
                      "privateEndpointConnections": [
                        "tuple",
                        [
                          [
                            "object",
                            {
                              "id": "string",
                              "properties": [
                                "object",
                                {
                                  "groupIds": [
                                    "tuple",
                                    [
                                      "string"
                                    ]
                                  ],
                                  "privateEndpoint": [
                                    "object",
                                    {
                                      "id": "string"
                                    }
                                  ],
                                  "provisioningState": "string"
                                }
                              ]
                            }
                          ]
                        ]
                      ],
                      "replicaCapacity": "number",
                      "state": "string",
                      "storage": [
                        "object",
                        {
                          "storageSku": "string"
                        }
                      ]
                    }
                  ],
                  "tags": [
                    "object",
                    {
                      "environment": "string",
                      "lifetime": "string",
                      "owner": "string"
                    }
                  ],
                  "type": "string"
                }
              ]
            },
            "parent_id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod",
            "read_headers": null,
            "read_query_parameters": null,
            "replace_triggers_external_values": null,
            "replace_triggers_refs": null,
            "response_export_values": null,
            "retry": null,
            "schema_validation_enabled": true,
            "sensitive_body": null,
            "tags": {
              "environment": "prod",
              "lifetime": "permanent",
              "owner": "Daniel\u0026Chris"
            },
            "timeouts": null,
            "type": "Microsoft.DBforMySQL/flexibleServers@2024-10-01-preview",
            "update_headers": null,
            "update_query_parameters": null
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "body"
              },
              {
                "type": "get_attr",
                "value": "properties"
              },
              {
                "type": "get_attr",
                "value": "administratorLoginPassword"
              }
            ]
          ],
          "identity_schema_version": 0,
          "private": "eyJzZW5zaXRpdmVfYm9keSI6ImV5Sm9ZWE5vSWpvaVpFTk9UMjFMTDI1VFdTc3hNblpJZW1GelRGaHBjM2Q2YkVkVU5WVklRVGRxUVVkWmEzWnRRM1ZSY3owaWZRPT0ifQ=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azapi_resource",
      "name": "mysql_private_endpoint",
      "provider": "provider[\"registry.terraform.io/azure/azapi\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "body": {
              "value": {
                "properties": {
                  "privateLinkServiceConnections": [
                    {
                      "name": "site-mysqlserver01-prod-plink",
                      "properties": {
                        "groupIds": [
                          "mysqlServer"
                        ],
                        "privateLinkServiceId": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.DBforMySQL/flexibleServers/site-mysqlserver01-prod",
                        "requestMessage": "Access to MySQL Flexible Server"
                      }
                    }
                  ],
                  "subnet": {
                    "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Network/virtualNetworks/site-vnet-prod/subnets/database-subnet"
                  }
                }
              },
              "type": [
                "object",
                {
                  "properties": [
                    "object",
                    {
                      "privateLinkServiceConnections": [
                        "tuple",
                        [
                          [
                            "object",
                            {
                              "name": "string",
                              "properties": [
                                "object",
                                {
                                  "groupIds": [
                                    "list",
                                    "string"
                                  ],
                                  "privateLinkServiceId": "string",
                                  "requestMessage": "string"
                                }
                              ]
                            }
                          ]
                        ]
                      ],
                      "subnet": [
                        "object",
                        {
                          "id": "string"
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            "create_headers": null,
            "create_query_parameters": null,
            "delete_headers": null,
            "delete_query_parameters": null,
            "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Network/privateEndpoints/site-mysqlserver01-prod-pep",
            "identity": [],
            "ignore_casing": false,
            "ignore_missing_property": true,
            "location": "centralus",
            "locks": null,
            "name": "site-mysqlserver01-prod-pep",
            "output": {
              "value": {
                "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Network/privateEndpoints/site-mysqlserver01-prod-pep",
                "properties": {
                  "customDnsConfigs": [
                    {
                      "ipAddresses": [
                        "10.173.0.69"
                      ]
                    }
                  ],
                  "networkInterfaces": [
                    {}
                  ],
                  "privateLinkServiceConnections": [
                    {
                      "properties": {
                        "groupIds": [
                          "mysqlServer"
                        ],
                        "provisioningState": "Succeeded"
                      },
                      "type": "Microsoft.Network/privateEndpoints/privateLinkServiceConnections"
                    }
                  ],
                  "provisioningState": "Succeeded"
                },
                "tags": {
                  "component": "mysql-private-endpoint",
                  "environment": "prod",
                  "lifetime": "permanent",
                  "owner": "Daniel\u0026Chris"
                },
                "type": "Microsoft.Network/privateEndpoints"
              },
              "type": [
                "object",
                {
                  "id": "string",
                  "properties": [
                    "object",
                    {
                      "customDnsConfigs": [
                        "tuple",
                        [
                          [
                            "object",
                            {
                              "ipAddresses": [
                                "tuple",
                                [
                                  "string"
                                ]
                              ]
                            }
                          ]
                        ]
                      ],
                      "networkInterfaces": [
                        "tuple",
                        [
                          [
                            "object",
                            {}
                          ]
                        ]
                      ],
                      "privateLinkServiceConnections": [
                        "tuple",
                        [
                          [
                            "object",
                            {
                              "properties": [
                                "object",
                                {
                                  "groupIds": [
                                    "tuple",
                                    [
                                      "string"
                                    ]
                                  ],
                                  "provisioningState": "string"
                                }
                              ],
                              "type": "string"
                            }
                          ]
                        ]
                      ],
                      "provisioningState": "string"
                    }
                  ],
                  "tags": [
                    "object",
                    {
                      "component": "string",
                      "environment": "string",
                      "lifetime": "string",
                      "owner": "string"
                    }
                  ],
                  "type": "string"
                }
              ]
            },
            "parent_id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod",
            "read_headers": null,
            "read_query_parameters": null,
            "replace_triggers_external_values": null,
            "replace_triggers_refs": null,
            "response_export_values": null,
            "retry": null,
            "schema_validation_enabled": true,
            "sensitive_body": null,
            "tags": {
              "component": "mysql-private-endpoint",
              "environment": "prod",
              "lifetime": "permanent",
              "owner": "Daniel\u0026Chris"
            },
            "timeouts": null,
            "type": "Microsoft.Network/privateEndpoints@2023-09-01",
            "update_headers": null,
            "update_query_parameters": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJzZW5zaXRpdmVfYm9keSI6ImV5Sm9ZWE5vSWpvaVpFTk9UMjFMTDI1VFdTc3hNblpJZW1GelRGaHBjM2Q2YkVkVU5WVklRVGRxUVVkWmEzWnRRM1ZSY3owaWZRPT0ifQ==",
          "dependencies": [
            "azapi_resource.mysql_flexible_server",
            "azapi_resource.site-group",
            "azapi_resource.site-nsg-app",
            "azapi_resource.site-nsg-database",
            "azapi_resource.site-nsg-front",
            "azapi_resource.site-vnet"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azapi_resource",
      "name": "redis_enterprise",
      "provider": "provider[\"registry.terraform.io/azure/azapi\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "body": {
              "value": {
                "properties": {
                  "highAvailability": "Disabled",
                  "minimumTlsVersion": "1.2"
                },
                "sku": {
                  "name": "Balanced_B0"
                }
              },
              "type": [
                "object",
                {
                  "properties": [
                    "object",
                    {
                      "highAvailability": "string",
                      "minimumTlsVersion": "string"
                    }
                  ],
                  "sku": [
                    "object",
                    {
                      "name": "string"
                    }
                  ]
                }
              ]
            },
            "create_headers": null,
            "create_query_parameters": null,
            "delete_headers": null,
            "delete_query_parameters": null,
            "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Cache/redisEnterprise/site-rediscache-prod",
            "identity": [],
            "ignore_casing": false,
            "ignore_missing_property": true,
            "location": "centralus",
            "locks": null,
            "name": "site-rediscache-prod",
            "output": {
              "value": {
                "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Cache/redisEnterprise/site-rediscache-prod",
                "kind": "v2",
                "properties": {
                  "hostName": "site-rediscache-prod.centralus.redis.azure.net",
                  "privateEndpointConnections": [
                    {
                      "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Cache/redisEnterprise/site-rediscache-prod/privateEndpointConnections/site-rediscache-prod-pep",
                      "name": "site-rediscache-prod-pep",
                      "properties": {
                        "privateEndpoint": {
                          "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Network/privateEndpoints/site-rediscache-prod-pep"
                        },
                        "provisioningState": "Succeeded"
                      },
                      "type": "Microsoft.Cache/redisEnterprise/privateEndpointConnections"
                    }
                  ],
                  "provisioningState": "Succeeded",
                  "redundancyMode": "None",
                  "resourceState": "Running"
                },
                "tags": {
                  "environment": "prod",
                  "lifetime": "permanent",
                  "owner": "Daniel\u0026Chris"
                },
                "type": "Microsoft.Cache/redisEnterprise"
              },
              "type": [
                "object",
                {
                  "id": "string",
                  "kind": "string",
                  "properties": [
                    "object",
                    {
                      "hostName": "string",
                      "privateEndpointConnections": [
                        "tuple",
                        [
                          [
                            "object",
                            {
                              "id": "string",
                              "name": "string",
                              "properties": [
                                "object",
                                {
                                  "privateEndpoint": [
                                    "object",
                                    {
                                      "id": "string"
                                    }
                                  ],
                                  "provisioningState": "string"
                                }
                              ],
                              "type": "string"
                            }
                          ]
                        ]
                      ],
                      "provisioningState": "string",
                      "redundancyMode": "string",
                      "resourceState": "string"
                    }
                  ],
                  "tags": [
                    "object",
                    {
                      "environment": "string",
                      "lifetime": "string",
                      "owner": "string"
                    }
                  ],
                  "type": "string"
                }
              ]
            },
            "parent_id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod",
            "read_headers": null,
            "read_query_parameters": null,
            "replace_triggers_external_values": null,
            "replace_triggers_refs": null,
            "response_export_values": null,
            "retry": null,
            "schema_validation_enabled": true,
            "sensitive_body": null,
            "tags": {
              "environment": "prod",
              "lifetime": "permanent",
              "owner": "Daniel\u0026Chris"
            },
            "timeouts": null,
            "type": "Microsoft.Cache/redisEnterprise@2025-05-01-preview",
            "update_headers": null,
            "update_query_parameters": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJzZW5zaXRpdmVfYm9keSI6ImV5Sm9ZWE5vSWpvaVpFTk9UMjFMTDI1VFdTc3hNblpJZW1GelRGaHBjM2Q2YkVkVU5WVklRVGRxUVVkWmEzWnRRM1ZSY3owaWZRPT0ifQ=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azapi_resource",
      "name": "redis_private_endpoint",
      "provider": "provider[\"registry.terraform.io/azure/azapi\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "body": {
              "value": {
                "properties": {
                  "privateLinkServiceConnections": [
                    {
                      "name": "site-rediscache-prod-plink",
                      "properties": {
                        "groupIds": [
                          "redisEnterprise"
                        ],
                        "privateLinkServiceId": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Cache/redisEnterprise/site-rediscache-prod",
                        "requestMessage": "Access to Redis Enterprise"
                      }
                    }
                  ],
                  "subnet": {
                    "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Network/virtualNetworks/site-vnet-prod/subnets/database-subnet"
                  }
                }
              },
              "type": [
                "object",
                {
                  "properties": [
                    "object",
                    {
                      "privateLinkServiceConnections": [
                        "tuple",
                        [
                          [
                            "object",
                            {
                              "name": "string",
                              "properties": [
                                "object",
                                {
                                  "groupIds": [
                                    "list",
                                    "string"
                                  ],
                                  "privateLinkServiceId": "string",
                                  "requestMessage": "string"
                                }
                              ]
                            }
                          ]
                        ]
                      ],
                      "subnet": [
                        "object",
                        {
                          "id": "string"
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            "create_headers": null,
            "create_query_parameters": null,
            "delete_headers": null,
            "delete_query_parameters": null,
            "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Network/privateEndpoints/site-rediscache-prod-pep",
            "identity": [],
            "ignore_casing": false,
            "ignore_missing_property": true,
            "location": "centralus",
            "locks": null,
            "name": "site-rediscache-prod-pep",
            "output": {
              "value": {
                "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Network/privateEndpoints/site-rediscache-prod-pep",
                "properties": {
                  "customDnsConfigs": [
                    {
                      "ipAddresses": [
                        "10.173.0.68"
                      ]
                    }
                  ],
                  "networkInterfaces": [
                    {}
                  ],
                  "privateLinkServiceConnections": [
                    {
                      "properties": {
                        "groupIds": [
                          "redisEnterprise"
                        ],
                        "provisioningState": "Succeeded"
                      },
                      "type": "Microsoft.Network/privateEndpoints/privateLinkServiceConnections"
                    }
                  ],
                  "provisioningState": "Succeeded"
                },
                "tags": {
                  "component": "redis-private-endpoint",
                  "environment": "prod",
                  "lifetime": "permanent",
                  "owner": "Daniel\u0026Chris"
                },
                "type": "Microsoft.Network/privateEndpoints"
              },
              "type": [
                "object",
                {
                  "id": "string",
                  "properties": [
                    "object",
                    {
                      "customDnsConfigs": [
                        "tuple",
                        [
                          [
                            "object",
                            {
                              "ipAddresses": [
                                "tuple",
                                [
                                  "string"
                                ]
                              ]
                            }
                          ]
                        ]
                      ],
                      "networkInterfaces": [
                        "tuple",
                        [
                          [
                            "object",
                            {}
                          ]
                        ]
                      ],
                      "privateLinkServiceConnections": [
                        "tuple",
                        [
                          [
                            "object",
                            {
                              "properties": [
                                "object",
                                {
                                  "groupIds": [
                                    "tuple",
                                    [
                                      "string"
                                    ]
                                  ],
                                  "provisioningState": "string"
                                }
                              ],
                              "type": "string"
                            }
                          ]
                        ]
                      ],
                      "provisioningState": "string"
                    }
                  ],
                  "tags": [
                    "object",
                    {
                      "component": "string",
                      "environment": "string",
                      "lifetime": "string",
                      "owner": "string"
                    }
                  ],
                  "type": "string"
                }
              ]
            },
            "parent_id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod",
            "read_headers": null,
            "read_query_parameters": null,
            "replace_triggers_external_values": null,
            "replace_triggers_refs": null,
            "response_export_values": null,
            "retry": null,
            "schema_validation_enabled": true,
            "sensitive_body": null,
            "tags": {
              "component": "redis-private-endpoint",
              "environment": "prod",
              "lifetime": "permanent",
              "owner": "Daniel\u0026Chris"
            },
            "timeouts": null,
            "type": "Microsoft.Network/privateEndpoints@2023-09-01",
            "update_headers": null,
            "update_query_parameters": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJzZW5zaXRpdmVfYm9keSI6ImV5Sm9ZWE5vSWpvaVpFTk9UMjFMTDI1VFdTc3hNblpJZW1GelRGaHBjM2Q2YkVkVU5WVklRVGRxUVVkWmEzWnRRM1ZSY3owaWZRPT0ifQ==",
          "dependencies": [
            "azapi_resource.redis_enterprise",
            "azapi_resource.site-group",
            "azapi_resource.site-nsg-app",
            "azapi_resource.site-nsg-database",
            "azapi_resource.site-nsg-front",
            "azapi_resource.site-vnet"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azapi_resource",
      "name": "site-action-group",
      "provider": "provider[\"registry.terraform.io/azure/azapi\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "body": {
              "value": {
                "properties": {
                  "armRoleReceivers": [],
                  "azureAppPushReceivers": [],
                  "azureFunctionReceivers": [],
                  "emailReceivers": [
                    {
                      "emailAddress": "Amitabh.d@alifconsulting.com",
                      "name": "primary",
                      "useCommonAlertSchema": true
                    }
                  ],
                  "enabled": true,
                  "eventHubReceivers": [],
                  "groupShortName": "siteactiongr",
                  "itsmReceivers": [],
                  "logicAppReceivers": [],
                  "smsReceivers": [],
                  "voiceReceivers": [],
                  "webhookReceivers": []
                }
              },
              "type": [
                "object",
                {
                  "properties": [
                    "object",
                    {
                      "armRoleReceivers": [
                        "tuple",
                        []
                      ],
                      "azureAppPushReceivers": [
                        "tuple",
                        []
                      ],
                      "azureFunctionReceivers": [
                        "tuple",
                        []
                      ],
                      "emailReceivers": [
                        "tuple",
                        [
                          [
                            "object",
                            {
                              "emailAddress": "string",
                              "name": "string",
                              "useCommonAlertSchema": "bool"
                            }
                          ]
                        ]
                      ],
                      "enabled": "bool",
                      "eventHubReceivers": [
                        "tuple",
                        []
                      ],
                      "groupShortName": "string",
                      "itsmReceivers": [
                        "tuple",
                        []
                      ],
                      "logicAppReceivers": [
                        "tuple",
                        []
                      ],
                      "smsReceivers": [
                        "tuple",
                        []
                      ],
                      "voiceReceivers": [
                        "tuple",
                        []
                      ],
                      "webhookReceivers": [
                        "tuple",
                        []
                      ]
                    }
                  ]
                }
              ]
            },
            "create_headers": null,
            "create_query_parameters": null,
            "delete_headers": null,
            "delete_query_parameters": null,
            "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/actionGroups/site-action-group-prod",
            "identity": [],
            "ignore_casing": false,
            "ignore_missing_property": true,
            "location": "global",
            "locks": null,
            "name": "site-action-group-prod",
            "output": {
              "value": {
                "id": "/subscriptions/C785C74C-7BD9-4AFA-AC0A-C5D7912E2FDA/resourceGroups/site-groupmon-prod/providers/microsoft.insights/actionGroups/site-action-group-prod",
                "properties": {
                  "emailReceivers": [
                    {
                      "status": "Enabled"
                    }
                  ]
                },
                "tags": {
                  "environment": "prod",
                  "lifetime": "permanent",
                  "owner": "Daniel\u0026Chris",
                  "purpose": "alert-actions"
                },
                "type": "Microsoft.Insights/ActionGroups"
              },
              "type": [
                "object",
                {
                  "id": "string",
                  "properties": [
                    "object",
                    {
                      "emailReceivers": [
                        "tuple",
                        [
                          [
                            "object",
                            {
                              "status": "string"
                            }
                          ]
                        ]
                      ]
                    }
                  ],
                  "tags": [
                    "object",
                    {
                      "environment": "string",
                      "lifetime": "string",
                      "owner": "string",
                      "purpose": "string"
                    }
                  ],
                  "type": "string"
                }
              ]
            },
            "parent_id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod",
            "read_headers": null,
            "read_query_parameters": null,
            "replace_triggers_external_values": null,
            "replace_triggers_refs": null,
            "response_export_values": null,
            "retry": null,
            "schema_validation_enabled": true,
            "sensitive_body": null,
            "tags": {
              "environment": "prod",
              "lifetime": "permanent",
              "owner": "Daniel\u0026Chris",
              "purpose": "alert-actions"
            },
            "timeouts": null,
            "type": "Microsoft.Insights/actionGroups@2023-01-01",
            "update_headers": null,
            "update_query_parameters": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJzZW5zaXRpdmVfYm9keSI6ImV5Sm9ZWE5vSWpvaVpFTk9UMjFMTDI1VFdTc3hNblpJZW1GelRGaHBjM2Q2YkVkVU5WVklRVGRxUVVkWmEzWnRRM1ZSY3owaWZRPT0ifQ==",
          "dependencies": [
            "azapi_resource.site-groupmon"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azapi_resource",
      "name": "site-appinsights",
      "provider": "provider[\"registry.terraform.io/azure/azapi\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "body": {
              "value": {
                "kind": "web",
                "properties": {
                  "Application_Type": "web",
                  "IngestionMode": "LogAnalytics",
                  "WorkspaceResourceId": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.OperationalInsights/workspaces/site-loganalytics-prod"
                }
              },
              "type": [
                "object",
                {
                  "kind": "string",
                  "properties": [
                    "object",
                    {
                      "Application_Type": "string",
                      "IngestionMode": "string",
                      "WorkspaceResourceId": "string"
                    }
                  ]
                }
              ]
            },
            "create_headers": null,
            "create_query_parameters": null,
            "delete_headers": null,
            "delete_query_parameters": null,
            "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/components/site-appinsights-prod",
            "identity": [],
            "ignore_casing": false,
            "ignore_missing_property": true,
            "location": "centralus",
            "locks": null,
            "name": "site-appinsights-prod",
            "output": {
              "value": {
                "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/microsoft.insights/components/site-appinsights-prod",
                "properties": {
                  "AppId": "66c202b3-a85b-4f13-acec-6f755e492e94",
                  "ApplicationId": "site-appinsights-prod",
                  "ConnectionString": "InstrumentationKey=41ea9f2f-6f7d-4200-880c-f6a895fbacd4;IngestionEndpoint=https://centralus-2.in.applicationinsights.azure.com/;LiveEndpoint=https://centralus.livediagnostics.monitor.azure.com/;ApplicationId=66c202b3-a85b-4f13-acec-6f755e492e94",
                  "CreationDate": "2025-09-14T05:39:32.2448006+00:00",
                  "InstrumentationKey": "41ea9f2f-6f7d-4200-880c-f6a895fbacd4",
                  "Name": "site-appinsights-prod",
                  "TenantId": "c785c74c-7bd9-4afa-ac0a-c5d7912e2fda",
                  "provisioningState": "Succeeded"
                },
                "tags": {
                  "environment": "prod",
                  "lifetime": "permanent",
                  "owner": "Daniel\u0026Chris",
                  "purpose": "application-monitoring"
                },
                "type": "microsoft.insights/components"
              },
              "type": [
                "object",
                {
                  "id": "string",
                  "properties": [
                    "object",
                    {
                      "AppId": "string",
                      "ApplicationId": "string",
                      "ConnectionString": "string",
                      "CreationDate": "string",
                      "InstrumentationKey": "string",
                      "Name": "string",
                      "TenantId": "string",
                      "provisioningState": "string"
                    }
                  ],
                  "tags": [
                    "object",
                    {
                      "environment": "string",
                      "lifetime": "string",
                      "owner": "string",
                      "purpose": "string"
                    }
                  ],
                  "type": "string"
                }
              ]
            },
            "parent_id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod",
            "read_headers": null,
            "read_query_parameters": null,
            "replace_triggers_external_values": null,
            "replace_triggers_refs": null,
            "response_export_values": null,
            "retry": null,
            "schema_validation_enabled": true,
            "sensitive_body": null,
            "tags": {
              "environment": "prod",
              "lifetime": "permanent",
              "owner": "Daniel\u0026Chris",
              "purpose": "application-monitoring"
            },
            "timeouts": null,
            "type": "Microsoft.Insights/components@2020-02-02",
            "update_headers": null,
            "update_query_parameters": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJzZW5zaXRpdmVfYm9keSI6ImV5Sm9ZWE5vSWpvaVpFTk9UMjFMTDI1VFdTc3hNblpJZW1GelRGaHBjM2Q2YkVkVU5WVklRVGRxUVVkWmEzWnRRM1ZSY3owaWZRPT0ifQ==",
          "dependencies": [
            "azapi_resource.site-groupmon",
            "azapi_resource.site-loganalytics-workspace"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azapi_resource",
      "name": "site-frontdoor-cache-alert",
      "provider": "provider[\"registry.terraform.io/azure/azapi\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "body": {
              "value": {
                "properties": {
                  "actions": [
                    {
                      "actionGroupId": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/actionGroups/site-action-group-prod",
                      "webHookProperties": {}
                    }
                  ],
                  "criteria": {
                    "allOf": [
                      {
                        "criterionType": "StaticThresholdCriterion",
                        "dimensions": [
                          {
                            "name": "Endpoint",
                            "operator": "Include",
                            "values": [
                              "*"
                            ]
                          }
                        ],
                        "metricName": "ByteHitRatio",
                        "metricNamespace": "Microsoft.Cdn/profiles",
                        "name": "Byte Hit Ratio \u003c 80%",
                        "operator": "LessThan",
                        "threshold": 80,
                        "timeAggregation": "Average"
                      }
                    ],
                    "odata.type": "Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria"
                  },
                  "description": "Alert when Front Door byte cache hit ratio falls below 80%",
                  "enabled": true,
                  "evaluationFrequency": "PT5M",
                  "scopes": [
                    "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Cdn/profiles/site-frontdoor-prod"
                  ],
                  "severity": 2,
                  "windowSize": "PT15M"
                }
              },
              "type": [
                "object",
                {
                  "properties": [
                    "object",
                    {
                      "actions": [
                        "tuple",
                        [
                          [
                            "object",
                            {
                              "actionGroupId": "string",
                              "webHookProperties": [
                                "object",
                                {}
                              ]
                            }
                          ]
                        ]
                      ],
                      "criteria": [
                        "object",
                        {
                          "allOf": [
                            "tuple",
                            [
                              [
                                "object",
                                {
                                  "criterionType": "string",
                                  "dimensions": [
                                    "tuple",
                                    [
                                      [
                                        "object",
                                        {
                                          "name": "string",
                                          "operator": "string",
                                          "values": [
                                            "tuple",
                                            [
                                              "string"
                                            ]
                                          ]
                                        }
                                      ]
                                    ]
                                  ],
                                  "metricName": "string",
                                  "metricNamespace": "string",
                                  "name": "string",
                                  "operator": "string",
                                  "threshold": "number",
                                  "timeAggregation": "string"
                                }
                              ]
                            ]
                          ],
                          "odata.type": "string"
                        }
                      ],
                      "description": "string",
                      "enabled": "bool",
                      "evaluationFrequency": "string",
                      "scopes": [
                        "tuple",
                        [
                          "string"
                        ]
                      ],
                      "severity": "number",
                      "windowSize": "string"
                    }
                  ]
                }
              ]
            },
            "create_headers": null,
            "create_query_parameters": null,
            "delete_headers": null,
            "delete_query_parameters": null,
            "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/metricAlerts/site-frontdoor-cache-hit-ratio-prod",
            "identity": [],
            "ignore_casing": false,
            "ignore_missing_property": true,
            "location": "global",
            "locks": null,
            "name": "site-frontdoor-cache-hit-ratio-prod",
            "output": {
              "value": {
                "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/metricAlerts/site-frontdoor-cache-hit-ratio-prod",
                "properties": {
                  "actions": [
                    {}
                  ],
                  "criteria": {
                    "allOf": [
                      {
                        "dimensions": [
                          {
                            "values": [
                              "*"
                            ]
                          }
                        ]
                      }
                    ]
                  },
                  "scopes": [
                    "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Cdn/profiles/site-frontdoor-prod"
                  ]
                },
                "tags": {
                  "environment": "prod",
                  "lifetime": "permanent",
                  "owner": "Daniel\u0026Chris",
                  "purpose": "frontdoor-cache-monitoring"
                },
                "type": "Microsoft.Insights/metricAlerts"
              },
              "type": [
                "object",
                {
                  "id": "string",
                  "properties": [
                    "object",
                    {
                      "actions": [
                        "tuple",
                        [
                          [
                            "object",
                            {}
                          ]
                        ]
                      ],
                      "criteria": [
                        "object",
                        {
                          "allOf": [
                            "tuple",
                            [
                              [
                                "object",
                                {
                                  "dimensions": [
                                    "tuple",
                                    [
                                      [
                                        "object",
                                        {
                                          "values": [
                                            "tuple",
                                            [
                                              "string"
                                            ]
                                          ]
                                        }
                                      ]
                                    ]
                                  ]
                                }
                              ]
                            ]
                          ]
                        }
                      ],
                      "scopes": [
                        "tuple",
                        [
                          "string"
                        ]
                      ]
                    }
                  ],
                  "tags": [
                    "object",
                    {
                      "environment": "string",
                      "lifetime": "string",
                      "owner": "string",
                      "purpose": "string"
                    }
                  ],
                  "type": "string"
                }
              ]
            },
            "parent_id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod",
            "read_headers": null,
            "read_query_parameters": null,
            "replace_triggers_external_values": null,
            "replace_triggers_refs": null,
            "response_export_values": null,
            "retry": null,
            "schema_validation_enabled": true,
            "sensitive_body": null,
            "tags": {
              "environment": "prod",
              "lifetime": "permanent",
              "owner": "Daniel\u0026Chris",
              "purpose": "frontdoor-cache-monitoring"
            },
            "timeouts": null,
            "type": "Microsoft.Insights/metricAlerts@2018-03-01",
            "update_headers": null,
            "update_query_parameters": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJzZW5zaXRpdmVfYm9keSI6ImV5Sm9ZWE5vSWpvaVpFTk9UMjFMTDI1VFdTc3hNblpJZW1GelRGaHBjM2Q2YkVkVU5WVklRVGRxUVVkWmEzWnRRM1ZSY3owaWZRPT0ifQ==",
          "dependencies": [
            "azapi_resource.frontdoor_profile",
            "azapi_resource.site-action-group",
            "azapi_resource.site-groupmon"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azapi_resource",
      "name": "site-frontdoor-health-alert",
      "provider": "provider[\"registry.terraform.io/azure/azapi\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "body": {
              "value": {
                "properties": {
                  "actions": [
                    {
                      "actionGroupId": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/actionGroups/site-action-group-prod",
                      "webHookProperties": {}
                    }
                  ],
                  "criteria": {
                    "allOf": [
                      {
                        "criterionType": "StaticThresholdCriterion",
                        "dimensions": [],
                        "metricName": "OriginHealthPercentage",
                        "metricNamespace": "Microsoft.Cdn/profiles",
                        "name": "Origin Health \u003c 100%",
                        "operator": "LessThan",
                        "threshold": 100,
                        "timeAggregation": "Average"
                      }
                    ],
                    "odata.type": "Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria"
                  },
                  "description": "Alert when Front Door origin health falls below 100%",
                  "enabled": true,
                  "evaluationFrequency": "PT1M",
                  "scopes": [
                    "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Cdn/profiles/site-frontdoor-prod"
                  ],
                  "severity": 1,
                  "targetResourceRegion": "global",
                  "targetResourceType": "Microsoft.Cdn/profiles",
                  "windowSize": "PT5M"
                }
              },
              "type": [
                "object",
                {
                  "properties": [
                    "object",
                    {
                      "actions": [
                        "tuple",
                        [
                          [
                            "object",
                            {
                              "actionGroupId": "string",
                              "webHookProperties": [
                                "object",
                                {}
                              ]
                            }
                          ]
                        ]
                      ],
                      "criteria": [
                        "object",
                        {
                          "allOf": [
                            "tuple",
                            [
                              [
                                "object",
                                {
                                  "criterionType": "string",
                                  "dimensions": [
                                    "tuple",
                                    []
                                  ],
                                  "metricName": "string",
                                  "metricNamespace": "string",
                                  "name": "string",
                                  "operator": "string",
                                  "threshold": "number",
                                  "timeAggregation": "string"
                                }
                              ]
                            ]
                          ],
                          "odata.type": "string"
                        }
                      ],
                      "description": "string",
                      "enabled": "bool",
                      "evaluationFrequency": "string",
                      "scopes": [
                        "tuple",
                        [
                          "string"
                        ]
                      ],
                      "severity": "number",
                      "targetResourceRegion": "string",
                      "targetResourceType": "string",
                      "windowSize": "string"
                    }
                  ]
                }
              ]
            },
            "create_headers": null,
            "create_query_parameters": null,
            "delete_headers": null,
            "delete_query_parameters": null,
            "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/metricAlerts/site-frontdoor-health-probe-prod",
            "identity": [],
            "ignore_casing": false,
            "ignore_missing_property": true,
            "location": "global",
            "locks": null,
            "name": "site-frontdoor-health-probe-prod",
            "output": {
              "value": {
                "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/metricAlerts/site-frontdoor-health-probe-prod",
                "properties": {
                  "actions": [
                    {}
                  ],
                  "criteria": {
                    "allOf": [
                      {}
                    ]
                  },
                  "scopes": [
                    "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Cdn/profiles/site-frontdoor-prod"
                  ]
                },
                "tags": {
                  "environment": "prod",
                  "lifetime": "permanent",
                  "owner": "Daniel\u0026Chris",
                  "purpose": "frontdoor-health-monitoring"
                },
                "type": "Microsoft.Insights/metricAlerts"
              },
              "type": [
                "object",
                {
                  "id": "string",
                  "properties": [
                    "object",
                    {
                      "actions": [
                        "tuple",
                        [
                          [
                            "object",
                            {}
                          ]
                        ]
                      ],
                      "criteria": [
                        "object",
                        {
                          "allOf": [
                            "tuple",
                            [
                              [
                                "object",
                                {}
                              ]
                            ]
                          ]
                        }
                      ],
                      "scopes": [
                        "tuple",
                        [
                          "string"
                        ]
                      ]
                    }
                  ],
                  "tags": [
                    "object",
                    {
                      "environment": "string",
                      "lifetime": "string",
                      "owner": "string",
                      "purpose": "string"
                    }
                  ],
                  "type": "string"
                }
              ]
            },
            "parent_id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod",
            "read_headers": null,
            "read_query_parameters": null,
            "replace_triggers_external_values": null,
            "replace_triggers_refs": null,
            "response_export_values": null,
            "retry": null,
            "schema_validation_enabled": true,
            "sensitive_body": null,
            "tags": {
              "environment": "prod",
              "lifetime": "permanent",
              "owner": "Daniel\u0026Chris",
              "purpose": "frontdoor-health-monitoring"
            },
            "timeouts": null,
            "type": "Microsoft.Insights/metricAlerts@2018-03-01",
            "update_headers": null,
            "update_query_parameters": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJzZW5zaXRpdmVfYm9keSI6ImV5Sm9ZWE5vSWpvaVpFTk9UMjFMTDI1VFdTc3hNblpJZW1GelRGaHBjM2Q2YkVkVU5WVklRVGRxUVVkWmEzWnRRM1ZSY3owaWZRPT0ifQ==",
          "dependencies": [
            "azapi_resource.frontdoor_profile",
            "azapi_resource.site-action-group",
            "azapi_resource.site-groupmon"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azapi_resource",
      "name": "site-frontdoor-latency-alert",
      "provider": "provider[\"registry.terraform.io/azure/azapi\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "body": {
              "value": {
                "properties": {
                  "actions": [
                    {
                      "actionGroupId": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/actionGroups/site-action-group-prod",
                      "webHookProperties": {}
                    }
                  ],
                  "criteria": {
                    "allOf": [
                      {
                        "criterionType": "StaticThresholdCriterion",
                        "dimensions": [],
                        "metricName": "TotalLatency",
                        "name": "Latency \u003e 500ms",
                        "operator": "GreaterThan",
                        "threshold": 500,
                        "timeAggregation": "Average"
                      }
                    ],
                    "odata.type": "Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria"
                  },
                  "description": "Alert when Front Door latency exceeds threshold across regions",
                  "enabled": true,
                  "evaluationFrequency": "PT5M",
                  "scopes": [
                    "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Cdn/profiles/site-frontdoor-prod"
                  ],
                  "severity": 2,
                  "targetResourceRegion": "global",
                  "targetResourceType": "Microsoft.Cdn/profiles",
                  "windowSize": "PT15M"
                }
              },
              "type": [
                "object",
                {
                  "properties": [
                    "object",
                    {
                      "actions": [
                        "tuple",
                        [
                          [
                            "object",
                            {
                              "actionGroupId": "string",
                              "webHookProperties": [
                                "object",
                                {}
                              ]
                            }
                          ]
                        ]
                      ],
                      "criteria": [
                        "object",
                        {
                          "allOf": [
                            "tuple",
                            [
                              [
                                "object",
                                {
                                  "criterionType": "string",
                                  "dimensions": [
                                    "tuple",
                                    []
                                  ],
                                  "metricName": "string",
                                  "name": "string",
                                  "operator": "string",
                                  "threshold": "number",
                                  "timeAggregation": "string"
                                }
                              ]
                            ]
                          ],
                          "odata.type": "string"
                        }
                      ],
                      "description": "string",
                      "enabled": "bool",
                      "evaluationFrequency": "string",
                      "scopes": [
                        "tuple",
                        [
                          "string"
                        ]
                      ],
                      "severity": "number",
                      "targetResourceRegion": "string",
                      "targetResourceType": "string",
                      "windowSize": "string"
                    }
                  ]
                }
              ]
            },
            "create_headers": null,
            "create_query_parameters": null,
            "delete_headers": null,
            "delete_query_parameters": null,
            "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/metricAlerts/site-frontdoor-latency-prod",
            "identity": [],
            "ignore_casing": false,
            "ignore_missing_property": true,
            "location": "global",
            "locks": null,
            "name": "site-frontdoor-latency-prod",
            "output": {
              "value": {
                "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/metricAlerts/site-frontdoor-latency-prod",
                "properties": {
                  "actions": [
                    {}
                  ],
                  "criteria": {
                    "allOf": [
                      {}
                    ]
                  },
                  "scopes": [
                    "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Cdn/profiles/site-frontdoor-prod"
                  ]
                },
                "tags": {
                  "environment": "prod",
                  "lifetime": "permanent",
                  "owner": "Daniel\u0026Chris",
                  "purpose": "frontdoor-latency-monitoring"
                },
                "type": "Microsoft.Insights/metricAlerts"
              },
              "type": [
                "object",
                {
                  "id": "string",
                  "properties": [
                    "object",
                    {
                      "actions": [
                        "tuple",
                        [
                          [
                            "object",
                            {}
                          ]
                        ]
                      ],
                      "criteria": [
                        "object",
                        {
                          "allOf": [
                            "tuple",
                            [
                              [
                                "object",
                                {}
                              ]
                            ]
                          ]
                        }
                      ],
                      "scopes": [
                        "tuple",
                        [
                          "string"
                        ]
                      ]
                    }
                  ],
                  "tags": [
                    "object",
                    {
                      "environment": "string",
                      "lifetime": "string",
                      "owner": "string",
                      "purpose": "string"
                    }
                  ],
                  "type": "string"
                }
              ]
            },
            "parent_id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod",
            "read_headers": null,
            "read_query_parameters": null,
            "replace_triggers_external_values": null,
            "replace_triggers_refs": null,
            "response_export_values": null,
            "retry": null,
            "schema_validation_enabled": true,
            "sensitive_body": null,
            "tags": {
              "environment": "prod",
              "lifetime": "permanent",
              "owner": "Daniel\u0026Chris",
              "purpose": "frontdoor-latency-monitoring"
            },
            "timeouts": null,
            "type": "Microsoft.Insights/metricAlerts@2018-03-01",
            "update_headers": null,
            "update_query_parameters": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJzZW5zaXRpdmVfYm9keSI6ImV5Sm9ZWE5vSWpvaVpFTk9UMjFMTDI1VFdTc3hNblpJZW1GelRGaHBjM2Q2YkVkVU5WVklRVGRxUVVkWmEzWnRRM1ZSY3owaWZRPT0ifQ==",
          "dependencies": [
            "azapi_resource.frontdoor_profile",
            "azapi_resource.site-action-group",
            "azapi_resource.site-groupmon"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azapi_resource",
      "name": "site-group",
      "provider": "provider[\"registry.terraform.io/azure/azapi\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "body": {
              "value": {
                "properties": {}
              },
              "type": [
                "object",
                {
                  "properties": [
                    "object",
                    {}
                  ]
                }
              ]
            },
            "create_headers": null,
            "create_query_parameters": null,
            "delete_headers": null,
            "delete_query_parameters": null,
            "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod",
            "identity": [],
            "ignore_casing": false,
            "ignore_missing_property": true,
            "location": "centralus",
            "locks": null,
            "name": "site-group-prod",
            "output": {
              "value": {
                "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod",
                "properties": {
                  "provisioningState": "Succeeded"
                },
                "tags": {
                  "environment": "prod",
                  "lifetime": "permanent",
                  "owner": "Daniel\u0026Chris"
                },
                "type": "Microsoft.Resources/resourceGroups"
              },
              "type": [
                "object",
                {
                  "id": "string",
                  "properties": [
                    "object",
                    {
                      "provisioningState": "string"
                    }
                  ],
                  "tags": [
                    "object",
                    {
                      "environment": "string",
                      "lifetime": "string",
                      "owner": "string"
                    }
                  ],
                  "type": "string"
                }
              ]
            },
            "parent_id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda",
            "read_headers": null,
            "read_query_parameters": null,
            "replace_triggers_external_values": null,
            "replace_triggers_refs": null,
            "response_export_values": null,
            "retry": null,
            "schema_validation_enabled": true,
            "sensitive_body": null,
            "tags": {
              "environment": "prod",
              "lifetime": "permanent",
              "owner": "Daniel\u0026Chris"
            },
            "timeouts": null,
            "type": "Microsoft.Resources/resourceGroups@2025-04-01",
            "update_headers": null,
            "update_query_parameters": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJzZW5zaXRpdmVfYm9keSI6ImV5Sm9ZWE5vSWpvaVpFTk9UMjFMTDI1VFdTc3hNblpJZW1GelRGaHBjM2Q2YkVkVU5WVklRVGRxUVVkWmEzWnRRM1ZSY3owaWZRPT0ifQ=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azapi_resource",
      "name": "site-groupmon",
      "provider": "provider[\"registry.terraform.io/azure/azapi\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "body": {
              "value": {
                "properties": {}
              },
              "type": [
                "object",
                {
                  "properties": [
                    "object",
                    {}
                  ]
                }
              ]
            },
            "create_headers": null,
            "create_query_parameters": null,
            "delete_headers": null,
            "delete_query_parameters": null,
            "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod",
            "identity": [],
            "ignore_casing": false,
            "ignore_missing_property": true,
            "location": "centralus",
            "locks": null,
            "name": "site-groupmon-prod",
            "output": {
              "value": {
                "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod",
                "properties": {
                  "provisioningState": "Succeeded"
                },
                "tags": {
                  "environment": "prod",
                  "lifetime": "permanent",
                  "owner": "Daniel\u0026Chris",
                  "purpose": "monitoring"
                },
                "type": "Microsoft.Resources/resourceGroups"
              },
              "type": [
                "object",
                {
                  "id": "string",
                  "properties": [
                    "object",
                    {
                      "provisioningState": "string"
                    }
                  ],
                  "tags": [
                    "object",
                    {
                      "environment": "string",
                      "lifetime": "string",
                      "owner": "string",
                      "purpose": "string"
                    }
                  ],
                  "type": "string"
                }
              ]
            },
            "parent_id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda",
            "read_headers": null,
            "read_query_parameters": null,
            "replace_triggers_external_values": null,
            "replace_triggers_refs": null,
            "response_export_values": null,
            "retry": null,
            "schema_validation_enabled": true,
            "sensitive_body": null,
            "tags": {
              "environment": "prod",
              "lifetime": "permanent",
              "owner": "Daniel\u0026Chris",
              "purpose": "monitoring"
            },
            "timeouts": null,
            "type": "Microsoft.Resources/resourceGroups@2025-04-01",
            "update_headers": null,
            "update_query_parameters": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJzZW5zaXRpdmVfYm9keSI6ImV5Sm9ZWE5vSWpvaVpFTk9UMjFMTDI1VFdTc3hNblpJZW1GelRGaHBjM2Q2YkVkVU5WVklRVGRxUVVkWmEzWnRRM1ZSY3owaWZRPT0ifQ=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azapi_resource",
      "name": "site-loganalytics-workspace",
      "provider": "provider[\"registry.terraform.io/azure/azapi\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "body": {
              "value": {
                "properties": {
                  "features": {
                    "enableLogAccessUsingOnlyResourcePermissions": true
                  },
                  "retentionInDays": 30,
                  "sku": {
                    "name": "PerGB2018"
                  }
                }
              },
              "type": [
                "object",
                {
                  "properties": [
                    "object",
                    {
                      "features": [
                        "object",
                        {
                          "enableLogAccessUsingOnlyResourcePermissions": "bool"
                        }
                      ],
                      "retentionInDays": "number",
                      "sku": [
                        "object",
                        {
                          "name": "string"
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            "create_headers": null,
            "create_query_parameters": null,
            "delete_headers": null,
            "delete_query_parameters": null,
            "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.OperationalInsights/workspaces/site-loganalytics-prod",
            "identity": [],
            "ignore_casing": false,
            "ignore_missing_property": true,
            "location": "centralus",
            "locks": null,
            "name": "site-loganalytics-prod",
            "output": {
              "value": {
                "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.OperationalInsights/workspaces/site-loganalytics-prod",
                "properties": {
                  "createdDate": "2025-09-14T05:39:04.2430404Z",
                  "customerId": "1d49b3c3-d681-451f-ad56-878b8d66e107",
                  "features": {
                    "legacy": 0,
                    "searchVersion": 1
                  },
                  "modifiedDate": "2025-09-14T05:39:17.6382965Z",
                  "provisioningState": "Succeeded",
                  "sku": {
                    "lastSkuUpdate": "2025-09-14T05:39:04.2430404Z"
                  },
                  "workspaceCapping": {
                    "dataIngestionStatus": "RespectQuota",
                    "quotaNextResetTime": "2025-09-14T09:00:00Z"
                  }
                },
                "tags": {
                  "environment": "prod",
                  "lifetime": "permanent",
                  "owner": "Daniel\u0026Chris",
                  "purpose": "log-analytics"
                },
                "type": "Microsoft.OperationalInsights/workspaces"
              },
              "type": [
                "object",
                {
                  "id": "string",
                  "properties": [
                    "object",
                    {
                      "createdDate": "string",
                      "customerId": "string",
                      "features": [
                        "object",
                        {
                          "legacy": "number",
                          "searchVersion": "number"
                        }
                      ],
                      "modifiedDate": "string",
                      "provisioningState": "string",
                      "sku": [
                        "object",
                        {
                          "lastSkuUpdate": "string"
                        }
                      ],
                      "workspaceCapping": [
                        "object",
                        {
                          "dataIngestionStatus": "string",
                          "quotaNextResetTime": "string"
                        }
                      ]
                    }
                  ],
                  "tags": [
                    "object",
                    {
                      "environment": "string",
                      "lifetime": "string",
                      "owner": "string",
                      "purpose": "string"
                    }
                  ],
                  "type": "string"
                }
              ]
            },
            "parent_id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod",
            "read_headers": null,
            "read_query_parameters": null,
            "replace_triggers_external_values": null,
            "replace_triggers_refs": null,
            "response_export_values": null,
            "retry": null,
            "schema_validation_enabled": true,
            "sensitive_body": null,
            "tags": {
              "environment": "prod",
              "lifetime": "permanent",
              "owner": "Daniel\u0026Chris",
              "purpose": "log-analytics"
            },
            "timeouts": null,
            "type": "Microsoft.OperationalInsights/workspaces@2022-10-01",
            "update_headers": null,
            "update_query_parameters": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJzZW5zaXRpdmVfYm9keSI6ImV5Sm9ZWE5vSWpvaVpFTk9UMjFMTDI1VFdTc3hNblpJZW1GelRGaHBjM2Q2YkVkVU5WVklRVGRxUVVkWmEzWnRRM1ZSY3owaWZRPT0ifQ==",
          "dependencies": [
            "azapi_resource.site-groupmon"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azapi_resource",
      "name": "site-mysql-restart-alert",
      "provider": "provider[\"registry.terraform.io/azure/azapi\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "body": {
              "value": {
                "properties": {
                  "actions": {
                    "actionGroups": [
                      {
                        "actionGroupId": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/actionGroups/site-action-group-prod"
                      }
                    ]
                  },
                  "condition": {
                    "allOf": [
                      {
                        "equals": "Administrative",
                        "field": "category"
                      },
                      {
                        "equals": "Microsoft.DBforMySQL/flexibleServers/restart/action",
                        "field": "operationName"
                      },
                      {
                        "equals": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.DBforMySQL/flexibleServers/site-mysqlserver01-prod",
                        "field": "resourceId"
                      },
                      {
                        "equals": "Succeeded",
                        "field": "status"
                      }
                    ]
                  },
                  "description": "Alert when MySQL Flexible Server is restarted (Activity Log)",
                  "enabled": true,
                  "scopes": [
                    "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod"
                  ]
                }
              },
              "type": [
                "object",
                {
                  "properties": [
                    "object",
                    {
                      "actions": [
                        "object",
                        {
                          "actionGroups": [
                            "tuple",
                            [
                              [
                                "object",
                                {
                                  "actionGroupId": "string"
                                }
                              ]
                            ]
                          ]
                        }
                      ],
                      "condition": [
                        "object",
                        {
                          "allOf": [
                            "tuple",
                            [
                              [
                                "object",
                                {
                                  "equals": "string",
                                  "field": "string"
                                }
                              ],
                              [
                                "object",
                                {
                                  "equals": "string",
                                  "field": "string"
                                }
                              ],
                              [
                                "object",
                                {
                                  "equals": "string",
                                  "field": "string"
                                }
                              ],
                              [
                                "object",
                                {
                                  "equals": "string",
                                  "field": "string"
                                }
                              ]
                            ]
                          ]
                        }
                      ],
                      "description": "string",
                      "enabled": "bool",
                      "scopes": [
                        "tuple",
                        [
                          "string"
                        ]
                      ]
                    }
                  ]
                }
              ]
            },
            "create_headers": null,
            "create_query_parameters": null,
            "delete_headers": null,
            "delete_query_parameters": null,
            "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/activityLogAlerts/site-mysql-restart-events-prod",
            "identity": [],
            "ignore_casing": false,
            "ignore_missing_property": true,
            "location": "global",
            "locks": null,
            "name": "site-mysql-restart-events-prod",
            "output": {
              "value": {
                "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/activityLogAlerts/site-mysql-restart-events-prod",
                "properties": {
                  "actions": {
                    "actionGroups": [
                      {}
                    ]
                  },
                  "condition": {
                    "allOf": [
                      {},
                      {},
                      {},
                      {}
                    ]
                  },
                  "scopes": [
                    "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod"
                  ]
                },
                "tags": {
                  "environment": "prod",
                  "lifetime": "permanent",
                  "owner": "Daniel\u0026Chris",
                  "purpose": "mysql-restart-monitoring"
                },
                "type": "Microsoft.Insights/ActivityLogAlerts"
              },
              "type": [
                "object",
                {
                  "id": "string",
                  "properties": [
                    "object",
                    {
                      "actions": [
                        "object",
                        {
                          "actionGroups": [
                            "tuple",
                            [
                              [
                                "object",
                                {}
                              ]
                            ]
                          ]
                        }
                      ],
                      "condition": [
                        "object",
                        {
                          "allOf": [
                            "tuple",
                            [
                              [
                                "object",
                                {}
                              ],
                              [
                                "object",
                                {}
                              ],
                              [
                                "object",
                                {}
                              ],
                              [
                                "object",
                                {}
                              ]
                            ]
                          ]
                        }
                      ],
                      "scopes": [
                        "tuple",
                        [
                          "string"
                        ]
                      ]
                    }
                  ],
                  "tags": [
                    "object",
                    {
                      "environment": "string",
                      "lifetime": "string",
                      "owner": "string",
                      "purpose": "string"
                    }
                  ],
                  "type": "string"
                }
              ]
            },
            "parent_id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod",
            "read_headers": null,
            "read_query_parameters": null,
            "replace_triggers_external_values": null,
            "replace_triggers_refs": null,
            "response_export_values": null,
            "retry": null,
            "schema_validation_enabled": true,
            "sensitive_body": null,
            "tags": {
              "environment": "prod",
              "lifetime": "permanent",
              "owner": "Daniel\u0026Chris",
              "purpose": "mysql-restart-monitoring"
            },
            "timeouts": null,
            "type": "Microsoft.Insights/activityLogAlerts@2017-04-01",
            "update_headers": null,
            "update_query_parameters": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJzZW5zaXRpdmVfYm9keSI6ImV5Sm9ZWE5vSWpvaVpFTk9UMjFMTDI1VFdTc3hNblpJZW1GelRGaHBjM2Q2YkVkVU5WVklRVGRxUVVkWmEzWnRRM1ZSY3owaWZRPT0ifQ==",
          "dependencies": [
            "azapi_resource.mysql_flexible_server",
            "azapi_resource.site-action-group",
            "azapi_resource.site-group",
            "azapi_resource.site-groupmon"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azapi_resource",
      "name": "site-nsg-app",
      "provider": "provider[\"registry.terraform.io/azure/azapi\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "body": {
              "value": {
                "properties": {
                  "securityRules": [
                    {
                      "name": "AllowVnetInBound",
                      "properties": {
                        "access": "Allow",
                        "destinationAddressPrefix": "VirtualNetwork",
                        "destinationPortRange": "*",
                        "direction": "Inbound",
                        "priority": 100,
                        "protocol": "*",
                        "sourceAddressPrefix": "VirtualNetwork",
                        "sourcePortRange": "*"
                      }
                    },
                    {
                      "name": "AllowFrontDoorInBound",
                      "properties": {
                        "access": "Allow",
                        "destinationAddressPrefix": "*",
                        "destinationPortRanges": [
                          "80",
                          "443"
                        ],
                        "direction": "Inbound",
                        "priority": 200,
                        "protocol": "*",
                        "sourceAddressPrefix": "AzureFrontDoor.Backend",
                        "sourcePortRange": "*"
                      }
                    },
                    {
                      "name": "AllowAppServiceInBound",
                      "properties": {
                        "access": "Allow",
                        "destinationAddressPrefix": "*",
                        "destinationPortRanges": [
                          "80",
                          "443"
                        ],
                        "direction": "Inbound",
                        "priority": 300,
                        "protocol": "*",
                        "sourceAddressPrefix": "Internet",
                        "sourcePortRange": "*"
                      }
                    },
                    {
                      "name": "AllowAzureLoadBalancerInBound",
                      "properties": {
                        "access": "Allow",
                        "destinationAddressPrefix": "*",
                        "destinationPortRange": "*",
                        "direction": "Inbound",
                        "priority": 110,
                        "protocol": "*",
                        "sourceAddressPrefix": "AzureLoadBalancer",
                        "sourcePortRange": "*"
                      }
                    },
                    {
                      "name": "AllowAppServiceManagementInBound",
                      "properties": {
                        "access": "Allow",
                        "destinationAddressPrefix": "*",
                        "destinationPortRanges": [
                          "80",
                          "443",
                          "8172"
                        ],
                        "direction": "Inbound",
                        "priority": 400,
                        "protocol": "*",
                        "sourceAddressPrefix": "AppServiceManagement",
                        "sourcePortRange": "*"
                      }
                    },
                    {
                      "name": "DenyAllInBound",
                      "properties": {
                        "access": "Deny",
                        "destinationAddressPrefix": "*",
                        "destinationPortRange": "*",
                        "direction": "Inbound",
                        "priority": 4096,
                        "protocol": "*",
                        "sourceAddressPrefix": "*",
                        "sourcePortRange": "*"
                      }
                    }
                  ]
                }
              },
              "type": [
                "object",
                {
                  "properties": [
                    "object",
                    {
                      "securityRules": [
                        "tuple",
                        [
                          [
                            "object",
                            {
                              "name": "string",
                              "properties": [
                                "object",
                                {
                                  "access": "string",
                                  "destinationAddressPrefix": "string",
                                  "destinationPortRange": "string",
                                  "direction": "string",
                                  "priority": "number",
                                  "protocol": "string",
                                  "sourceAddressPrefix": "string",
                                  "sourcePortRange": "string"
                                }
                              ]
                            }
                          ],
                          [
                            "object",
                            {
                              "name": "string",
                              "properties": [
                                "object",
                                {
                                  "access": "string",
                                  "destinationAddressPrefix": "string",
                                  "destinationPortRanges": [
                                    "tuple",
                                    [
                                      "string",
                                      "string"
                                    ]
                                  ],
                                  "direction": "string",
                                  "priority": "number",
                                  "protocol": "string",
                                  "sourceAddressPrefix": "string",
                                  "sourcePortRange": "string"
                                }
                              ]
                            }
                          ],
                          [
                            "object",
                            {
                              "name": "string",
                              "properties": [
                                "object",
                                {
                                  "access": "string",
                                  "destinationAddressPrefix": "string",
                                  "destinationPortRanges": [
                                    "tuple",
                                    [
                                      "string",
                                      "string"
                                    ]
                                  ],
                                  "direction": "string",
                                  "priority": "number",
                                  "protocol": "string",
                                  "sourceAddressPrefix": "string",
                                  "sourcePortRange": "string"
                                }
                              ]
                            }
                          ],
                          [
                            "object",
                            {
                              "name": "string",
                              "properties": [
                                "object",
                                {
                                  "access": "string",
                                  "destinationAddressPrefix": "string",
                                  "destinationPortRange": "string",
                                  "direction": "string",
                                  "priority": "number",
                                  "protocol": "string",
                                  "sourceAddressPrefix": "string",
                                  "sourcePortRange": "string"
                                }
                              ]
                            }
                          ],
                          [
                            "object",
                            {
                              "name": "string",
                              "properties": [
                                "object",
                                {
                                  "access": "string",
                                  "destinationAddressPrefix": "string",
                                  "destinationPortRanges": [
                                    "tuple",
                                    [
                                      "string",
                                      "string",
                                      "string"
                                    ]
                                  ],
                                  "direction": "string",
                                  "priority": "number",
                                  "protocol": "string",
                                  "sourceAddressPrefix": "string",
                                  "sourcePortRange": "string"
                                }
                              ]
                            }
                          ],
                          [
                            "object",
                            {
                              "name": "string",
                              "properties": [
                                "object",
                                {
                                  "access": "string",
                                  "destinationAddressPrefix": "string",
                                  "destinationPortRange": "string",
                                  "direction": "string",
                                  "priority": "number",
                                  "protocol": "string",
                                  "sourceAddressPrefix": "string",
                                  "sourcePortRange": "string"
                                }
                              ]
                            }
                          ]
                        ]
                      ]
                    }
                  ]
                }
              ]
            },
            "create_headers": null,
            "create_query_parameters": null,
            "delete_headers": null,
            "delete_query_parameters": null,
            "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Network/networkSecurityGroups/site-nsg-app-prod",
            "identity": [],
            "ignore_casing": false,
            "ignore_missing_property": true,
            "location": "centralus",
            "locks": null,
            "name": "site-nsg-app-prod",
            "output": {
              "value": {
                "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Network/networkSecurityGroups/site-nsg-app-prod",
                "properties": {
                  "defaultSecurityRules": [
                    {
                      "properties": {
                        "provisioningState": "Succeeded"
                      }
                    },
                    {
                      "properties": {
                        "provisioningState": "Succeeded"
                      }
                    },
                    {
                      "properties": {
                        "provisioningState": "Succeeded"
                      }
                    },
                    {
                      "properties": {
                        "provisioningState": "Succeeded"
                      }
                    },
                    {
                      "properties": {
                        "provisioningState": "Succeeded"
                      }
                    },
                    {
                      "properties": {
                        "provisioningState": "Succeeded"
                      }
                    }
                  ],
                  "provisioningState": "Succeeded",
                  "resourceGuid": "8a484bb6-3c33-41c0-bba7-58e5ced16d6d",
                  "securityRules": [
                    {
                      "properties": {
                        "provisioningState": "Succeeded"
                      }
                    },
                    {
                      "properties": {
                        "destinationPortRanges": [
                          "80",
                          "443"
                        ],
                        "provisioningState": "Succeeded"
                      }
                    },
                    {
                      "properties": {
                        "destinationPortRanges": [
                          "80",
                          "443"
                        ],
                        "provisioningState": "Succeeded"
                      }
                    },
                    {
                      "properties": {
                        "provisioningState": "Succeeded"
                      }
                    },
                    {
                      "properties": {
                        "destinationPortRanges": [
                          "80",
                          "443",
                          "8172"
                        ],
                        "provisioningState": "Succeeded"
                      }
                    },
                    {
                      "properties": {
                        "provisioningState": "Succeeded"
                      }
                    }
                  ],
                  "subnets": [
                    {}
                  ]
                },
                "tags": {
                  "environment": "prod",
                  "lifetime": "permanent",
                  "owner": "Daniel\u0026Chris",
                  "purpose": "network-security-group",
                  "subnet": "app"
                },
                "type": "Microsoft.Network/networkSecurityGroups"
              },
              "type": [
                "object",
                {
                  "id": "string",
                  "properties": [
                    "object",
                    {
                      "defaultSecurityRules": [
                        "tuple",
                        [
                          [
                            "object",
                            {
                              "properties": [
                                "object",
                                {
                                  "provisioningState": "string"
                                }
                              ]
                            }
                          ],
                          [
                            "object",
                            {
                              "properties": [
                                "object",
                                {
                                  "provisioningState": "string"
                                }
                              ]
                            }
                          ],
                          [
                            "object",
                            {
                              "properties": [
                                "object",
                                {
                                  "provisioningState": "string"
                                }
                              ]
                            }
                          ],
                          [
                            "object",
                            {
                              "properties": [
                                "object",
                                {
                                  "provisioningState": "string"
                                }
                              ]
                            }
                          ],
                          [
                            "object",
                            {
                              "properties": [
                                "object",
                                {
                                  "provisioningState": "string"
                                }
                              ]
                            }
                          ],
                          [
                            "object",
                            {
                              "properties": [
                                "object",
                                {
                                  "provisioningState": "string"
                                }
                              ]
                            }
                          ]
                        ]
                      ],
                      "provisioningState": "string",
                      "resourceGuid": "string",
                      "securityRules": [
                        "tuple",
                        [
                          [
                            "object",
                            {
                              "properties": [
                                "object",
                                {
                                  "provisioningState": "string"
                                }
                              ]
                            }
                          ],
                          [
                            "object",
                            {
                              "properties": [
                                "object",
                                {
                                  "destinationPortRanges": [
                                    "tuple",
                                    [
                                      "string",
                                      "string"
                                    ]
                                  ],
                                  "provisioningState": "string"
                                }
                              ]
                            }
                          ],
                          [
                            "object",
                            {
                              "properties": [
                                "object",
                                {
                                  "destinationPortRanges": [
                                    "tuple",
                                    [
                                      "string",
                                      "string"
                                    ]
                                  ],
                                  "provisioningState": "string"
                                }
                              ]
                            }
                          ],
                          [
                            "object",
                            {
                              "properties": [
                                "object",
                                {
                                  "provisioningState": "string"
                                }
                              ]
                            }
                          ],
                          [
                            "object",
                            {
                              "properties": [
                                "object",
                                {
                                  "destinationPortRanges": [
                                    "tuple",
                                    [
                                      "string",
                                      "string",
                                      "string"
                                    ]
                                  ],
                                  "provisioningState": "string"
                                }
                              ]
                            }
                          ],
                          [
                            "object",
                            {
                              "properties": [
                                "object",
                                {
                                  "provisioningState": "string"
                                }
                              ]
                            }
                          ]
                        ]
                      ],
                      "subnets": [
                        "tuple",
                        [
                          [
                            "object",
                            {}
                          ]
                        ]
                      ]
                    }
                  ],
                  "tags": [
                    "object",
                    {
                      "environment": "string",
                      "lifetime": "string",
                      "owner": "string",
                      "purpose": "string",
                      "subnet": "string"
                    }
                  ],
                  "type": "string"
                }
              ]
            },
            "parent_id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod",
            "read_headers": null,
            "read_query_parameters": null,
            "replace_triggers_external_values": null,
            "replace_triggers_refs": null,
            "response_export_values": null,
            "retry": null,
            "schema_validation_enabled": true,
            "sensitive_body": null,
            "tags": {
              "environment": "prod",
              "lifetime": "permanent",
              "owner": "Daniel\u0026Chris",
              "purpose": "network-security-group",
              "subnet": "app"
            },
            "timeouts": null,
            "type": "Microsoft.Network/networkSecurityGroups@2023-09-01",
            "update_headers": null,
            "update_query_parameters": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJzZW5zaXRpdmVfYm9keSI6ImV5Sm9ZWE5vSWpvaVpFTk9UMjFMTDI1VFdTc3hNblpJZW1GelRGaHBjM2Q2YkVkVU5WVklRVGRxUVVkWmEzWnRRM1ZSY3owaWZRPT0ifQ==",
          "dependencies": [
            "azapi_resource.site-group"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azapi_resource",
      "name": "site-nsg-database",
      "provider": "provider[\"registry.terraform.io/azure/azapi\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "body": {
              "value": {
                "properties": {
                  "securityRules": [
                    {
                      "name": "AllowVnetInBound",
                      "properties": {
                        "access": "Allow",
                        "destinationAddressPrefix": "VirtualNetwork",
                        "destinationPortRange": "*",
                        "direction": "Inbound",
                        "priority": 100,
                        "protocol": "*",
                        "sourceAddressPrefix": "VirtualNetwork",
                        "sourcePortRange": "*"
                      }
                    },
                    {
                      "name": "AllowAppSubnetMySQLInBound",
                      "properties": {
                        "access": "Allow",
                        "destinationAddressPrefix": "*",
                        "destinationPortRange": "3306",
                        "direction": "Inbound",
                        "priority": 200,
                        "protocol": "Tcp",
                        "sourceAddressPrefix": "10.173.0.32/27",
                        "sourcePortRange": "*"
                      }
                    },
                    {
                      "name": "AllowAppSubnetRedisInBound",
                      "properties": {
                        "access": "Allow",
                        "destinationAddressPrefix": "*",
                        "destinationPortRange": "10000-19999",
                        "direction": "Inbound",
                        "priority": 210,
                        "protocol": "Tcp",
                        "sourceAddressPrefix": "10.173.0.32/27",
                        "sourcePortRange": "*"
                      }
                    },
                    {
                      "name": "AllowAzureServicesInBound",
                      "properties": {
                        "access": "Allow",
                        "destinationAddressPrefix": "*",
                        "destinationPortRange": "*",
                        "direction": "Inbound",
                        "priority": 300,
                        "protocol": "*",
                        "sourceAddressPrefix": "10.173.0.32/27",
                        "sourcePortRange": "*"
                      }
                    },
                    {
                      "name": "DenyAllInBound",
                      "properties": {
                        "access": "Deny",
                        "destinationAddressPrefix": "*",
                        "destinationPortRange": "*",
                        "direction": "Inbound",
                        "priority": 4096,
                        "protocol": "*",
                        "sourceAddressPrefix": "*",
                        "sourcePortRange": "*"
                      }
                    }
                  ]
                }
              },
              "type": [
                "object",
                {
                  "properties": [
                    "object",
                    {
                      "securityRules": [
                        "tuple",
                        [
                          [
                            "object",
                            {
                              "name": "string",
                              "properties": [
                                "object",
                                {
                                  "access": "string",
                                  "destinationAddressPrefix": "string",
                                  "destinationPortRange": "string",
                                  "direction": "string",
                                  "priority": "number",
                                  "protocol": "string",
                                  "sourceAddressPrefix": "string",
                                  "sourcePortRange": "string"
                                }
                              ]
                            }
                          ],
                          [
                            "object",
                            {
                              "name": "string",
                              "properties": [
                                "object",
                                {
                                  "access": "string",
                                  "destinationAddressPrefix": "string",
                                  "destinationPortRange": "string",
                                  "direction": "string",
                                  "priority": "number",
                                  "protocol": "string",
                                  "sourceAddressPrefix": "string",
                                  "sourcePortRange": "string"
                                }
                              ]
                            }
                          ],
                          [
                            "object",
                            {
                              "name": "string",
                              "properties": [
                                "object",
                                {
                                  "access": "string",
                                  "destinationAddressPrefix": "string",
                                  "destinationPortRange": "string",
                                  "direction": "string",
                                  "priority": "number",
                                  "protocol": "string",
                                  "sourceAddressPrefix": "string",
                                  "sourcePortRange": "string"
                                }
                              ]
                            }
                          ],
                          [
                            "object",
                            {
                              "name": "string",
                              "properties": [
                                "object",
                                {
                                  "access": "string",
                                  "destinationAddressPrefix": "string",
                                  "destinationPortRange": "string",
                                  "direction": "string",
                                  "priority": "number",
                                  "protocol": "string",
                                  "sourceAddressPrefix": "string",
                                  "sourcePortRange": "string"
                                }
                              ]
                            }
                          ],
                          [
                            "object",
                            {
                              "name": "string",
                              "properties": [
                                "object",
                                {
                                  "access": "string",
                                  "destinationAddressPrefix": "string",
                                  "destinationPortRange": "string",
                                  "direction": "string",
                                  "priority": "number",
                                  "protocol": "string",
                                  "sourceAddressPrefix": "string",
                                  "sourcePortRange": "string"
                                }
                              ]
                            }
                          ]
                        ]
                      ]
                    }
                  ]
                }
              ]
            },
            "create_headers": null,
            "create_query_parameters": null,
            "delete_headers": null,
            "delete_query_parameters": null,
            "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Network/networkSecurityGroups/site-nsg-database-prod",
            "identity": [],
            "ignore_casing": false,
            "ignore_missing_property": true,
            "location": "centralus",
            "locks": null,
            "name": "site-nsg-database-prod",
            "output": {
              "value": {
                "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Network/networkSecurityGroups/site-nsg-database-prod",
                "properties": {
                  "defaultSecurityRules": [
                    {
                      "properties": {
                        "provisioningState": "Succeeded"
                      }
                    },
                    {
                      "properties": {
                        "provisioningState": "Succeeded"
                      }
                    },
                    {
                      "properties": {
                        "provisioningState": "Succeeded"
                      }
                    },
                    {
                      "properties": {
                        "provisioningState": "Succeeded"
                      }
                    },
                    {
                      "properties": {
                        "provisioningState": "Succeeded"
                      }
                    },
                    {
                      "properties": {
                        "provisioningState": "Succeeded"
                      }
                    }
                  ],
                  "provisioningState": "Succeeded",
                  "resourceGuid": "c4477ae4-cab5-4d46-a0f1-d28a3c299f89",
                  "securityRules": [
                    {
                      "properties": {
                        "provisioningState": "Succeeded"
                      }
                    },
                    {
                      "properties": {
                        "provisioningState": "Succeeded"
                      }
                    },
                    {
                      "properties": {
                        "provisioningState": "Succeeded"
                      }
                    },
                    {
                      "properties": {
                        "provisioningState": "Succeeded"
                      }
                    },
                    {
                      "properties": {
                        "provisioningState": "Succeeded"
                      }
                    }
                  ],
                  "subnets": [
                    {}
                  ]
                },
                "tags": {
                  "environment": "prod",
                  "lifetime": "permanent",
                  "owner": "Daniel\u0026Chris",
                  "purpose": "network-security-group",
                  "subnet": "database"
                },
                "type": "Microsoft.Network/networkSecurityGroups"
              },
              "type": [
                "object",
                {
                  "id": "string",
                  "properties": [
                    "object",
                    {
                      "defaultSecurityRules": [
                        "tuple",
                        [
                          [
                            "object",
                            {
                              "properties": [
                                "object",
                                {
                                  "provisioningState": "string"
                                }
                              ]
                            }
                          ],
                          [
                            "object",
                            {
                              "properties": [
                                "object",
                                {
                                  "provisioningState": "string"
                                }
                              ]
                            }
                          ],
                          [
                            "object",
                            {
                              "properties": [
                                "object",
                                {
                                  "provisioningState": "string"
                                }
                              ]
                            }
                          ],
                          [
                            "object",
                            {
                              "properties": [
                                "object",
                                {
                                  "provisioningState": "string"
                                }
                              ]
                            }
                          ],
                          [
                            "object",
                            {
                              "properties": [
                                "object",
                                {
                                  "provisioningState": "string"
                                }
                              ]
                            }
                          ],
                          [
                            "object",
                            {
                              "properties": [
                                "object",
                                {
                                  "provisioningState": "string"
                                }
                              ]
                            }
                          ]
                        ]
                      ],
                      "provisioningState": "string",
                      "resourceGuid": "string",
                      "securityRules": [
                        "tuple",
                        [
                          [
                            "object",
                            {
                              "properties": [
                                "object",
                                {
                                  "provisioningState": "string"
                                }
                              ]
                            }
                          ],
                          [
                            "object",
                            {
                              "properties": [
                                "object",
                                {
                                  "provisioningState": "string"
                                }
                              ]
                            }
                          ],
                          [
                            "object",
                            {
                              "properties": [
                                "object",
                                {
                                  "provisioningState": "string"
                                }
                              ]
                            }
                          ],
                          [
                            "object",
                            {
                              "properties": [
                                "object",
                                {
                                  "provisioningState": "string"
                                }
                              ]
                            }
                          ],
                          [
                            "object",
                            {
                              "properties": [
                                "object",
                                {
                                  "provisioningState": "string"
                                }
                              ]
                            }
                          ]
                        ]
                      ],
                      "subnets": [
                        "tuple",
                        [
                          [
                            "object",
                            {}
                          ]
                        ]
                      ]
                    }
                  ],
                  "tags": [
                    "object",
                    {
                      "environment": "string",
                      "lifetime": "string",
                      "owner": "string",
                      "purpose": "string",
                      "subnet": "string"
                    }
                  ],
                  "type": "string"
                }
              ]
            },
            "parent_id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod",
            "read_headers": null,
            "read_query_parameters": null,
            "replace_triggers_external_values": null,
            "replace_triggers_refs": null,
            "response_export_values": null,
            "retry": null,
            "schema_validation_enabled": true,
            "sensitive_body": null,
            "tags": {
              "environment": "prod",
              "lifetime": "permanent",
              "owner": "Daniel\u0026Chris",
              "purpose": "network-security-group",
              "subnet": "database"
            },
            "timeouts": null,
            "type": "Microsoft.Network/networkSecurityGroups@2023-09-01",
            "update_headers": null,
            "update_query_parameters": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJzZW5zaXRpdmVfYm9keSI6ImV5Sm9ZWE5vSWpvaVpFTk9UMjFMTDI1VFdTc3hNblpJZW1GelRGaHBjM2Q2YkVkVU5WVklRVGRxUVVkWmEzWnRRM1ZSY3owaWZRPT0ifQ==",
          "dependencies": [
            "azapi_resource.site-group"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azapi_resource",
      "name": "site-nsg-front",
      "provider": "provider[\"registry.terraform.io/azure/azapi\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "body": {
              "value": {
                "properties": {
                  "securityRules": [
                    {
                      "name": "AllowVnetInBound",
                      "properties": {
                        "access": "Allow",
                        "destinationAddressPrefix": "VirtualNetwork",
                        "destinationPortRange": "*",
                        "direction": "Inbound",
                        "priority": 100,
                        "protocol": "*",
                        "sourceAddressPrefix": "VirtualNetwork",
                        "sourcePortRange": "*"
                      }
                    },
                    {
                      "name": "AllowFrontDoorInBound",
                      "properties": {
                        "access": "Allow",
                        "destinationAddressPrefix": "*",
                        "destinationPortRanges": [
                          "80",
                          "443"
                        ],
                        "direction": "Inbound",
                        "priority": 200,
                        "protocol": "*",
                        "sourceAddressPrefix": "AzureFrontDoor.Backend",
                        "sourcePortRange": "*"
                      }
                    },
                    {
                      "name": "AllowAzureLoadBalancerInBound",
                      "properties": {
                        "access": "Allow",
                        "destinationAddressPrefix": "*",
                        "destinationPortRange": "*",
                        "direction": "Inbound",
                        "priority": 110,
                        "protocol": "*",
                        "sourceAddressPrefix": "AzureLoadBalancer",
                        "sourcePortRange": "*"
                      }
                    },
                    {
                      "name": "AllowAzureServicesInBound",
                      "properties": {
                        "access": "Allow",
                        "destinationAddressPrefix": "*",
                        "destinationPortRange": "*",
                        "direction": "Inbound",
                        "priority": 300,
                        "protocol": "*",
                        "sourceAddressPrefix": "10.173.0.32/27",
                        "sourcePortRange": "*"
                      }
                    },
                    {
                      "name": "DenyAllInBound",
                      "properties": {
                        "access": "Deny",
                        "destinationAddressPrefix": "*",
                        "destinationPortRange": "*",
                        "direction": "Inbound",
                        "priority": 4096,
                        "protocol": "*",
                        "sourceAddressPrefix": "*",
                        "sourcePortRange": "*"
                      }
                    }
                  ]
                }
              },
              "type": [
                "object",
                {
                  "properties": [
                    "object",
                    {
                      "securityRules": [
                        "tuple",
                        [
                          [
                            "object",
                            {
                              "name": "string",
                              "properties": [
                                "object",
                                {
                                  "access": "string",
                                  "destinationAddressPrefix": "string",
                                  "destinationPortRange": "string",
                                  "direction": "string",
                                  "priority": "number",
                                  "protocol": "string",
                                  "sourceAddressPrefix": "string",
                                  "sourcePortRange": "string"
                                }
                              ]
                            }
                          ],
                          [
                            "object",
                            {
                              "name": "string",
                              "properties": [
                                "object",
                                {
                                  "access": "string",
                                  "destinationAddressPrefix": "string",
                                  "destinationPortRanges": [
                                    "tuple",
                                    [
                                      "string",
                                      "string"
                                    ]
                                  ],
                                  "direction": "string",
                                  "priority": "number",
                                  "protocol": "string",
                                  "sourceAddressPrefix": "string",
                                  "sourcePortRange": "string"
                                }
                              ]
                            }
                          ],
                          [
                            "object",
                            {
                              "name": "string",
                              "properties": [
                                "object",
                                {
                                  "access": "string",
                                  "destinationAddressPrefix": "string",
                                  "destinationPortRange": "string",
                                  "direction": "string",
                                  "priority": "number",
                                  "protocol": "string",
                                  "sourceAddressPrefix": "string",
                                  "sourcePortRange": "string"
                                }
                              ]
                            }
                          ],
                          [
                            "object",
                            {
                              "name": "string",
                              "properties": [
                                "object",
                                {
                                  "access": "string",
                                  "destinationAddressPrefix": "string",
                                  "destinationPortRange": "string",
                                  "direction": "string",
                                  "priority": "number",
                                  "protocol": "string",
                                  "sourceAddressPrefix": "string",
                                  "sourcePortRange": "string"
                                }
                              ]
                            }
                          ],
                          [
                            "object",
                            {
                              "name": "string",
                              "properties": [
                                "object",
                                {
                                  "access": "string",
                                  "destinationAddressPrefix": "string",
                                  "destinationPortRange": "string",
                                  "direction": "string",
                                  "priority": "number",
                                  "protocol": "string",
                                  "sourceAddressPrefix": "string",
                                  "sourcePortRange": "string"
                                }
                              ]
                            }
                          ]
                        ]
                      ]
                    }
                  ]
                }
              ]
            },
            "create_headers": null,
            "create_query_parameters": null,
            "delete_headers": null,
            "delete_query_parameters": null,
            "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Network/networkSecurityGroups/site-nsg-front-prod",
            "identity": [],
            "ignore_casing": false,
            "ignore_missing_property": true,
            "location": "centralus",
            "locks": null,
            "name": "site-nsg-front-prod",
            "output": {
              "value": {
                "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Network/networkSecurityGroups/site-nsg-front-prod",
                "properties": {
                  "defaultSecurityRules": [
                    {
                      "properties": {
                        "provisioningState": "Succeeded"
                      }
                    },
                    {
                      "properties": {
                        "provisioningState": "Succeeded"
                      }
                    },
                    {
                      "properties": {
                        "provisioningState": "Succeeded"
                      }
                    },
                    {
                      "properties": {
                        "provisioningState": "Succeeded"
                      }
                    },
                    {
                      "properties": {
                        "provisioningState": "Succeeded"
                      }
                    },
                    {
                      "properties": {
                        "provisioningState": "Succeeded"
                      }
                    }
                  ],
                  "provisioningState": "Succeeded",
                  "resourceGuid": "11b9a08e-99fe-4682-a5e5-a0c8794743d4",
                  "securityRules": [
                    {
                      "properties": {
                        "provisioningState": "Succeeded"
                      }
                    },
                    {
                      "properties": {
                        "destinationPortRanges": [
                          "80",
                          "443"
                        ],
                        "provisioningState": "Succeeded"
                      }
                    },
                    {
                      "properties": {
                        "provisioningState": "Succeeded"
                      }
                    },
                    {
                      "properties": {
                        "provisioningState": "Succeeded"
                      }
                    },
                    {
                      "properties": {
                        "provisioningState": "Succeeded"
                      }
                    }
                  ],
                  "subnets": [
                    {}
                  ]
                },
                "tags": {
                  "environment": "prod",
                  "lifetime": "permanent",
                  "owner": "Daniel\u0026Chris",
                  "purpose": "network-security-group",
                  "subnet": "front"
                },
                "type": "Microsoft.Network/networkSecurityGroups"
              },
              "type": [
                "object",
                {
                  "id": "string",
                  "properties": [
                    "object",
                    {
                      "defaultSecurityRules": [
                        "tuple",
                        [
                          [
                            "object",
                            {
                              "properties": [
                                "object",
                                {
                                  "provisioningState": "string"
                                }
                              ]
                            }
                          ],
                          [
                            "object",
                            {
                              "properties": [
                                "object",
                                {
                                  "provisioningState": "string"
                                }
                              ]
                            }
                          ],
                          [
                            "object",
                            {
                              "properties": [
                                "object",
                                {
                                  "provisioningState": "string"
                                }
                              ]
                            }
                          ],
                          [
                            "object",
                            {
                              "properties": [
                                "object",
                                {
                                  "provisioningState": "string"
                                }
                              ]
                            }
                          ],
                          [
                            "object",
                            {
                              "properties": [
                                "object",
                                {
                                  "provisioningState": "string"
                                }
                              ]
                            }
                          ],
                          [
                            "object",
                            {
                              "properties": [
                                "object",
                                {
                                  "provisioningState": "string"
                                }
                              ]
                            }
                          ]
                        ]
                      ],
                      "provisioningState": "string",
                      "resourceGuid": "string",
                      "securityRules": [
                        "tuple",
                        [
                          [
                            "object",
                            {
                              "properties": [
                                "object",
                                {
                                  "provisioningState": "string"
                                }
                              ]
                            }
                          ],
                          [
                            "object",
                            {
                              "properties": [
                                "object",
                                {
                                  "destinationPortRanges": [
                                    "tuple",
                                    [
                                      "string",
                                      "string"
                                    ]
                                  ],
                                  "provisioningState": "string"
                                }
                              ]
                            }
                          ],
                          [
                            "object",
                            {
                              "properties": [
                                "object",
                                {
                                  "provisioningState": "string"
                                }
                              ]
                            }
                          ],
                          [
                            "object",
                            {
                              "properties": [
                                "object",
                                {
                                  "provisioningState": "string"
                                }
                              ]
                            }
                          ],
                          [
                            "object",
                            {
                              "properties": [
                                "object",
                                {
                                  "provisioningState": "string"
                                }
                              ]
                            }
                          ]
                        ]
                      ],
                      "subnets": [
                        "tuple",
                        [
                          [
                            "object",
                            {}
                          ]
                        ]
                      ]
                    }
                  ],
                  "tags": [
                    "object",
                    {
                      "environment": "string",
                      "lifetime": "string",
                      "owner": "string",
                      "purpose": "string",
                      "subnet": "string"
                    }
                  ],
                  "type": "string"
                }
              ]
            },
            "parent_id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod",
            "read_headers": null,
            "read_query_parameters": null,
            "replace_triggers_external_values": null,
            "replace_triggers_refs": null,
            "response_export_values": null,
            "retry": null,
            "schema_validation_enabled": true,
            "sensitive_body": null,
            "tags": {
              "environment": "prod",
              "lifetime": "permanent",
              "owner": "Daniel\u0026Chris",
              "purpose": "network-security-group",
              "subnet": "front"
            },
            "timeouts": null,
            "type": "Microsoft.Network/networkSecurityGroups@2023-09-01",
            "update_headers": null,
            "update_query_parameters": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJzZW5zaXRpdmVfYm9keSI6ImV5Sm9ZWE5vSWpvaVpFTk9UMjFMTDI1VFdTc3hNblpJZW1GelRGaHBjM2Q2YkVkVU5WVklRVGRxUVVkWmEzWnRRM1ZSY3owaWZRPT0ifQ==",
          "dependencies": [
            "azapi_resource.site-group"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azapi_resource",
      "name": "site-redis-connections-alert",
      "provider": "provider[\"registry.terraform.io/azure/azapi\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "body": {
              "value": {
                "properties": {
                  "actions": {
                    "actionGroups": [
                      "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/actionGroups/site-action-group-prod"
                    ]
                  },
                  "criteria": {
                    "allOf": [
                      {
                        "failingPeriods": {
                          "minFailingPeriodsToAlert": 1,
                          "numberOfEvaluationPeriods": 1
                        },
                        "operator": "GreaterThan",
                        "query": "AzureDiagnostics | where ResourceType == 'REDIS' | where Category == 'RedisLogs' | where Message contains 'connection' | summarize count() by bin(TimeGenerated, 5m) | where count_ \u003c 5 or count_ \u003e 100",
                        "threshold": 0,
                        "timeAggregation": "Count"
                      }
                    ]
                  },
                  "description": "Alert for Redis Cache connection spikes or drops",
                  "enabled": true,
                  "evaluationFrequency": "PT5M",
                  "scopes": [
                    "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.OperationalInsights/workspaces/site-loganalytics-prod"
                  ],
                  "severity": 2,
                  "windowSize": "PT15M"
                }
              },
              "type": [
                "object",
                {
                  "properties": [
                    "object",
                    {
                      "actions": [
                        "object",
                        {
                          "actionGroups": [
                            "tuple",
                            [
                              "string"
                            ]
                          ]
                        }
                      ],
                      "criteria": [
                        "object",
                        {
                          "allOf": [
                            "tuple",
                            [
                              [
                                "object",
                                {
                                  "failingPeriods": [
                                    "object",
                                    {
                                      "minFailingPeriodsToAlert": "number",
                                      "numberOfEvaluationPeriods": "number"
                                    }
                                  ],
                                  "operator": "string",
                                  "query": "string",
                                  "threshold": "number",
                                  "timeAggregation": "string"
                                }
                              ]
                            ]
                          ]
                        }
                      ],
                      "description": "string",
                      "enabled": "bool",
                      "evaluationFrequency": "string",
                      "scopes": [
                        "tuple",
                        [
                          "string"
                        ]
                      ],
                      "severity": "number",
                      "windowSize": "string"
                    }
                  ]
                }
              ]
            },
            "create_headers": null,
            "create_query_parameters": null,
            "delete_headers": null,
            "delete_query_parameters": null,
            "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/scheduledQueryRules/site-redis-connections-prod",
            "identity": [],
            "ignore_casing": false,
            "ignore_missing_property": true,
            "location": "centralus",
            "locks": null,
            "name": "site-redis-connections-prod",
            "output": {
              "value": {
                "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/microsoft.insights/scheduledqueryrules/site-redis-connections-prod",
                "properties": {
                  "actions": {
                    "actionGroups": [
                      "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/actionGroups/site-action-group-prod"
                    ]
                  },
                  "createdWithApiVersion": "2023-12-01",
                  "criteria": {
                    "allOf": [
                      {}
                    ]
                  },
                  "scopes": [
                    "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.OperationalInsights/workspaces/site-loganalytics-prod"
                  ]
                },
                "tags": {
                  "environment": "prod",
                  "lifetime": "permanent",
                  "owner": "Daniel\u0026Chris",
                  "purpose": "redis-connections-monitoring"
                },
                "type": "Microsoft.Insights/scheduledQueryRules"
              },
              "type": [
                "object",
                {
                  "id": "string",
                  "properties": [
                    "object",
                    {
                      "actions": [
                        "object",
                        {
                          "actionGroups": [
                            "tuple",
                            [
                              "string"
                            ]
                          ]
                        }
                      ],
                      "createdWithApiVersion": "string",
                      "criteria": [
                        "object",
                        {
                          "allOf": [
                            "tuple",
                            [
                              [
                                "object",
                                {}
                              ]
                            ]
                          ]
                        }
                      ],
                      "scopes": [
                        "tuple",
                        [
                          "string"
                        ]
                      ]
                    }
                  ],
                  "tags": [
                    "object",
                    {
                      "environment": "string",
                      "lifetime": "string",
                      "owner": "string",
                      "purpose": "string"
                    }
                  ],
                  "type": "string"
                }
              ]
            },
            "parent_id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod",
            "read_headers": null,
            "read_query_parameters": null,
            "replace_triggers_external_values": null,
            "replace_triggers_refs": null,
            "response_export_values": null,
            "retry": null,
            "schema_validation_enabled": true,
            "sensitive_body": null,
            "tags": {
              "environment": "prod",
              "lifetime": "permanent",
              "owner": "Daniel\u0026Chris",
              "purpose": "redis-connections-monitoring"
            },
            "timeouts": null,
            "type": "Microsoft.Insights/scheduledQueryRules@2023-12-01",
            "update_headers": null,
            "update_query_parameters": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJzZW5zaXRpdmVfYm9keSI6ImV5Sm9ZWE5vSWpvaVpFTk9UMjFMTDI1VFdTc3hNblpJZW1GelRGaHBjM2Q2YkVkVU5WVklRVGRxUVVkWmEzWnRRM1ZSY3owaWZRPT0ifQ==",
          "dependencies": [
            "azapi_resource.site-action-group",
            "azapi_resource.site-groupmon",
            "azapi_resource.site-loganalytics-workspace"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azapi_resource",
      "name": "site-redis-cpu-alert",
      "provider": "provider[\"registry.terraform.io/azure/azapi\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "body": {
              "value": {
                "properties": {
                  "actions": [
                    {
                      "actionGroupId": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/actionGroups/site-action-group-prod",
                      "webHookProperties": {}
                    }
                  ],
                  "criteria": {
                    "allOf": [
                      {
                        "criterionType": "StaticThresholdCriterion",
                        "dimensions": [],
                        "metricName": "serverload",
                        "metricNamespace": "Microsoft.Cache/redisEnterprise",
                        "name": "High Server Load \u003e 80%",
                        "operator": "GreaterThan",
                        "threshold": 80,
                        "timeAggregation": "Average"
                      }
                    ],
                    "odata.type": "Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria"
                  },
                  "description": "Alert when Redis Cache CPU usage is sustained high",
                  "enabled": true,
                  "evaluationFrequency": "PT5M",
                  "scopes": [
                    "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Cache/redisEnterprise/site-rediscache-prod"
                  ],
                  "severity": 2,
                  "windowSize": "PT15M"
                }
              },
              "type": [
                "object",
                {
                  "properties": [
                    "object",
                    {
                      "actions": [
                        "tuple",
                        [
                          [
                            "object",
                            {
                              "actionGroupId": "string",
                              "webHookProperties": [
                                "object",
                                {}
                              ]
                            }
                          ]
                        ]
                      ],
                      "criteria": [
                        "object",
                        {
                          "allOf": [
                            "tuple",
                            [
                              [
                                "object",
                                {
                                  "criterionType": "string",
                                  "dimensions": [
                                    "tuple",
                                    []
                                  ],
                                  "metricName": "string",
                                  "metricNamespace": "string",
                                  "name": "string",
                                  "operator": "string",
                                  "threshold": "number",
                                  "timeAggregation": "string"
                                }
                              ]
                            ]
                          ],
                          "odata.type": "string"
                        }
                      ],
                      "description": "string",
                      "enabled": "bool",
                      "evaluationFrequency": "string",
                      "scopes": [
                        "tuple",
                        [
                          "string"
                        ]
                      ],
                      "severity": "number",
                      "windowSize": "string"
                    }
                  ]
                }
              ]
            },
            "create_headers": null,
            "create_query_parameters": null,
            "delete_headers": null,
            "delete_query_parameters": null,
            "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/metricAlerts/site-redis-cpu-prod",
            "identity": [],
            "ignore_casing": false,
            "ignore_missing_property": true,
            "location": "global",
            "locks": null,
            "name": "site-redis-cpu-prod",
            "output": {
              "value": {
                "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/metricAlerts/site-redis-cpu-prod",
                "properties": {
                  "actions": [
                    {}
                  ],
                  "criteria": {
                    "allOf": [
                      {}
                    ]
                  },
                  "scopes": [
                    "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Cache/redisEnterprise/site-rediscache-prod"
                  ]
                },
                "tags": {
                  "environment": "prod",
                  "lifetime": "permanent",
                  "owner": "Daniel\u0026Chris",
                  "purpose": "redis-cpu-monitoring"
                },
                "type": "Microsoft.Insights/metricAlerts"
              },
              "type": [
                "object",
                {
                  "id": "string",
                  "properties": [
                    "object",
                    {
                      "actions": [
                        "tuple",
                        [
                          [
                            "object",
                            {}
                          ]
                        ]
                      ],
                      "criteria": [
                        "object",
                        {
                          "allOf": [
                            "tuple",
                            [
                              [
                                "object",
                                {}
                              ]
                            ]
                          ]
                        }
                      ],
                      "scopes": [
                        "tuple",
                        [
                          "string"
                        ]
                      ]
                    }
                  ],
                  "tags": [
                    "object",
                    {
                      "environment": "string",
                      "lifetime": "string",
                      "owner": "string",
                      "purpose": "string"
                    }
                  ],
                  "type": "string"
                }
              ]
            },
            "parent_id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod",
            "read_headers": null,
            "read_query_parameters": null,
            "replace_triggers_external_values": null,
            "replace_triggers_refs": null,
            "response_export_values": null,
            "retry": null,
            "schema_validation_enabled": true,
            "sensitive_body": null,
            "tags": {
              "environment": "prod",
              "lifetime": "permanent",
              "owner": "Daniel\u0026Chris",
              "purpose": "redis-cpu-monitoring"
            },
            "timeouts": null,
            "type": "Microsoft.Insights/metricAlerts@2018-03-01",
            "update_headers": null,
            "update_query_parameters": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJzZW5zaXRpdmVfYm9keSI6ImV5Sm9ZWE5vSWpvaVpFTk9UMjFMTDI1VFdTc3hNblpJZW1GelRGaHBjM2Q2YkVkVU5WVklRVGRxUVVkWmEzWnRRM1ZSY3owaWZRPT0ifQ==",
          "dependencies": [
            "azapi_resource.redis_enterprise",
            "azapi_resource.site-action-group",
            "azapi_resource.site-groupmon"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azapi_resource",
      "name": "site-redis-memory-alert",
      "provider": "provider[\"registry.terraform.io/azure/azapi\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "body": {
              "value": {
                "properties": {
                  "actions": [
                    {
                      "actionGroupId": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/actionGroups/site-action-group-prod",
                      "webHookProperties": {}
                    }
                  ],
                  "criteria": {
                    "allOf": [
                      {
                        "criterionType": "StaticThresholdCriterion",
                        "dimensions": [],
                        "metricName": "usedmemorypercentage",
                        "metricNamespace": "Microsoft.Cache/redisEnterprise",
                        "name": "Memory Usage \u003e 80%",
                        "operator": "GreaterThan",
                        "threshold": 80,
                        "timeAggregation": "Average"
                      }
                    ],
                    "odata.type": "Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria"
                  },
                  "description": "Alert when Redis Cache memory usage exceeds 80%",
                  "enabled": true,
                  "evaluationFrequency": "PT5M",
                  "scopes": [
                    "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Cache/redisEnterprise/site-rediscache-prod"
                  ],
                  "severity": 2,
                  "windowSize": "PT15M"
                }
              },
              "type": [
                "object",
                {
                  "properties": [
                    "object",
                    {
                      "actions": [
                        "tuple",
                        [
                          [
                            "object",
                            {
                              "actionGroupId": "string",
                              "webHookProperties": [
                                "object",
                                {}
                              ]
                            }
                          ]
                        ]
                      ],
                      "criteria": [
                        "object",
                        {
                          "allOf": [
                            "tuple",
                            [
                              [
                                "object",
                                {
                                  "criterionType": "string",
                                  "dimensions": [
                                    "tuple",
                                    []
                                  ],
                                  "metricName": "string",
                                  "metricNamespace": "string",
                                  "name": "string",
                                  "operator": "string",
                                  "threshold": "number",
                                  "timeAggregation": "string"
                                }
                              ]
                            ]
                          ],
                          "odata.type": "string"
                        }
                      ],
                      "description": "string",
                      "enabled": "bool",
                      "evaluationFrequency": "string",
                      "scopes": [
                        "tuple",
                        [
                          "string"
                        ]
                      ],
                      "severity": "number",
                      "windowSize": "string"
                    }
                  ]
                }
              ]
            },
            "create_headers": null,
            "create_query_parameters": null,
            "delete_headers": null,
            "delete_query_parameters": null,
            "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/metricAlerts/site-redis-memory-80-prod",
            "identity": [],
            "ignore_casing": false,
            "ignore_missing_property": true,
            "location": "global",
            "locks": null,
            "name": "site-redis-memory-80-prod",
            "output": {
              "value": {
                "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/metricAlerts/site-redis-memory-80-prod",
                "properties": {
                  "actions": [
                    {}
                  ],
                  "criteria": {
                    "allOf": [
                      {}
                    ]
                  },
                  "scopes": [
                    "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Cache/redisEnterprise/site-rediscache-prod"
                  ]
                },
                "tags": {
                  "environment": "prod",
                  "lifetime": "permanent",
                  "owner": "Daniel\u0026Chris",
                  "purpose": "redis-memory-monitoring"
                },
                "type": "Microsoft.Insights/metricAlerts"
              },
              "type": [
                "object",
                {
                  "id": "string",
                  "properties": [
                    "object",
                    {
                      "actions": [
                        "tuple",
                        [
                          [
                            "object",
                            {}
                          ]
                        ]
                      ],
                      "criteria": [
                        "object",
                        {
                          "allOf": [
                            "tuple",
                            [
                              [
                                "object",
                                {}
                              ]
                            ]
                          ]
                        }
                      ],
                      "scopes": [
                        "tuple",
                        [
                          "string"
                        ]
                      ]
                    }
                  ],
                  "tags": [
                    "object",
                    {
                      "environment": "string",
                      "lifetime": "string",
                      "owner": "string",
                      "purpose": "string"
                    }
                  ],
                  "type": "string"
                }
              ]
            },
            "parent_id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod",
            "read_headers": null,
            "read_query_parameters": null,
            "replace_triggers_external_values": null,
            "replace_triggers_refs": null,
            "response_export_values": null,
            "retry": null,
            "schema_validation_enabled": true,
            "sensitive_body": null,
            "tags": {
              "environment": "prod",
              "lifetime": "permanent",
              "owner": "Daniel\u0026Chris",
              "purpose": "redis-memory-monitoring"
            },
            "timeouts": null,
            "type": "Microsoft.Insights/metricAlerts@2018-03-01",
            "update_headers": null,
            "update_query_parameters": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJzZW5zaXRpdmVfYm9keSI6ImV5Sm9ZWE5vSWpvaVpFTk9UMjFMTDI1VFdTc3hNblpJZW1GelRGaHBjM2Q2YkVkVU5WVklRVGRxUVVkWmEzWnRRM1ZSY3owaWZRPT0ifQ==",
          "dependencies": [
            "azapi_resource.redis_enterprise",
            "azapi_resource.site-action-group",
            "azapi_resource.site-groupmon"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azapi_resource",
      "name": "site-sql-connections-alert",
      "provider": "provider[\"registry.terraform.io/azure/azapi\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "body": {
              "value": {
                "properties": {
                  "actions": [
                    {
                      "actionGroupId": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/actionGroups/site-action-group-prod",
                      "webHookProperties": {}
                    }
                  ],
                  "criteria": {
                    "allOf": [
                      {
                        "criterionType": "StaticThresholdCriterion",
                        "dimensions": [],
                        "metricName": "active_connections",
                        "name": "High Connection Count",
                        "operator": "GreaterThan",
                        "threshold": 80,
                        "timeAggregation": "Average"
                      }
                    ],
                    "odata.type": "Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria"
                  },
                  "description": "Alert when SQL Server connection count is high",
                  "enabled": true,
                  "evaluationFrequency": "PT5M",
                  "scopes": [
                    "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.DBforMySQL/flexibleServers/site-mysqlserver01-prod"
                  ],
                  "severity": 2,
                  "windowSize": "PT15M"
                }
              },
              "type": [
                "object",
                {
                  "properties": [
                    "object",
                    {
                      "actions": [
                        "tuple",
                        [
                          [
                            "object",
                            {
                              "actionGroupId": "string",
                              "webHookProperties": [
                                "object",
                                {}
                              ]
                            }
                          ]
                        ]
                      ],
                      "criteria": [
                        "object",
                        {
                          "allOf": [
                            "tuple",
                            [
                              [
                                "object",
                                {
                                  "criterionType": "string",
                                  "dimensions": [
                                    "tuple",
                                    []
                                  ],
                                  "metricName": "string",
                                  "name": "string",
                                  "operator": "string",
                                  "threshold": "number",
                                  "timeAggregation": "string"
                                }
                              ]
                            ]
                          ],
                          "odata.type": "string"
                        }
                      ],
                      "description": "string",
                      "enabled": "bool",
                      "evaluationFrequency": "string",
                      "scopes": [
                        "tuple",
                        [
                          "string"
                        ]
                      ],
                      "severity": "number",
                      "windowSize": "string"
                    }
                  ]
                }
              ]
            },
            "create_headers": null,
            "create_query_parameters": null,
            "delete_headers": null,
            "delete_query_parameters": null,
            "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/metricAlerts/site-mysql-connections-prod",
            "identity": [],
            "ignore_casing": false,
            "ignore_missing_property": true,
            "location": "global",
            "locks": null,
            "name": "site-mysql-connections-prod",
            "output": {
              "value": {
                "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/metricAlerts/site-mysql-connections-prod",
                "properties": {
                  "actions": [
                    {}
                  ],
                  "criteria": {
                    "allOf": [
                      {}
                    ]
                  },
                  "scopes": [
                    "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.DBforMySQL/flexibleServers/site-mysqlserver01-prod"
                  ]
                },
                "tags": {
                  "environment": "prod",
                  "lifetime": "permanent",
                  "owner": "Daniel\u0026Chris",
                  "purpose": "mysql-connections-monitoring"
                },
                "type": "Microsoft.Insights/metricAlerts"
              },
              "type": [
                "object",
                {
                  "id": "string",
                  "properties": [
                    "object",
                    {
                      "actions": [
                        "tuple",
                        [
                          [
                            "object",
                            {}
                          ]
                        ]
                      ],
                      "criteria": [
                        "object",
                        {
                          "allOf": [
                            "tuple",
                            [
                              [
                                "object",
                                {}
                              ]
                            ]
                          ]
                        }
                      ],
                      "scopes": [
                        "tuple",
                        [
                          "string"
                        ]
                      ]
                    }
                  ],
                  "tags": [
                    "object",
                    {
                      "environment": "string",
                      "lifetime": "string",
                      "owner": "string",
                      "purpose": "string"
                    }
                  ],
                  "type": "string"
                }
              ]
            },
            "parent_id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod",
            "read_headers": null,
            "read_query_parameters": null,
            "replace_triggers_external_values": null,
            "replace_triggers_refs": null,
            "response_export_values": null,
            "retry": null,
            "schema_validation_enabled": true,
            "sensitive_body": null,
            "tags": {
              "environment": "prod",
              "lifetime": "permanent",
              "owner": "Daniel\u0026Chris",
              "purpose": "mysql-connections-monitoring"
            },
            "timeouts": null,
            "type": "Microsoft.Insights/metricAlerts@2018-03-01",
            "update_headers": null,
            "update_query_parameters": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJzZW5zaXRpdmVfYm9keSI6ImV5Sm9ZWE5vSWpvaVpFTk9UMjFMTDI1VFdTc3hNblpJZW1GelRGaHBjM2Q2YkVkVU5WVklRVGRxUVVkWmEzWnRRM1ZSY3owaWZRPT0ifQ==",
          "dependencies": [
            "azapi_resource.mysql_flexible_server",
            "azapi_resource.site-action-group",
            "azapi_resource.site-groupmon"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azapi_resource",
      "name": "site-sql-cpu-alert",
      "provider": "provider[\"registry.terraform.io/azure/azapi\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "body": {
              "value": {
                "properties": {
                  "actions": [
                    {
                      "actionGroupId": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/actionGroups/site-action-group-prod",
                      "webHookProperties": {}
                    }
                  ],
                  "criteria": {
                    "allOf": [
                      {
                        "criterionType": "StaticThresholdCriterion",
                        "dimensions": [],
                        "metricName": "cpu_percent",
                        "name": "CPU Utilization \u003e 85%",
                        "operator": "GreaterThan",
                        "threshold": 85,
                        "timeAggregation": "Average"
                      }
                    ],
                    "odata.type": "Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria"
                  },
                  "description": "Alert when SQL Server CPU utilization exceeds 85%",
                  "enabled": true,
                  "evaluationFrequency": "PT5M",
                  "scopes": [
                    "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.DBforMySQL/flexibleServers/site-mysqlserver01-prod"
                  ],
                  "severity": 2,
                  "windowSize": "PT15M"
                }
              },
              "type": [
                "object",
                {
                  "properties": [
                    "object",
                    {
                      "actions": [
                        "tuple",
                        [
                          [
                            "object",
                            {
                              "actionGroupId": "string",
                              "webHookProperties": [
                                "object",
                                {}
                              ]
                            }
                          ]
                        ]
                      ],
                      "criteria": [
                        "object",
                        {
                          "allOf": [
                            "tuple",
                            [
                              [
                                "object",
                                {
                                  "criterionType": "string",
                                  "dimensions": [
                                    "tuple",
                                    []
                                  ],
                                  "metricName": "string",
                                  "name": "string",
                                  "operator": "string",
                                  "threshold": "number",
                                  "timeAggregation": "string"
                                }
                              ]
                            ]
                          ],
                          "odata.type": "string"
                        }
                      ],
                      "description": "string",
                      "enabled": "bool",
                      "evaluationFrequency": "string",
                      "scopes": [
                        "tuple",
                        [
                          "string"
                        ]
                      ],
                      "severity": "number",
                      "windowSize": "string"
                    }
                  ]
                }
              ]
            },
            "create_headers": null,
            "create_query_parameters": null,
            "delete_headers": null,
            "delete_query_parameters": null,
            "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/metricAlerts/site-mysql-cpu-85-prod",
            "identity": [],
            "ignore_casing": false,
            "ignore_missing_property": true,
            "location": "global",
            "locks": null,
            "name": "site-mysql-cpu-85-prod",
            "output": {
              "value": {
                "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/metricAlerts/site-mysql-cpu-85-prod",
                "properties": {
                  "actions": [
                    {}
                  ],
                  "criteria": {
                    "allOf": [
                      {}
                    ]
                  },
                  "scopes": [
                    "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.DBforMySQL/flexibleServers/site-mysqlserver01-prod"
                  ]
                },
                "tags": {
                  "environment": "prod",
                  "lifetime": "permanent",
                  "owner": "Daniel\u0026Chris",
                  "purpose": "mysql-cpu-monitoring"
                },
                "type": "Microsoft.Insights/metricAlerts"
              },
              "type": [
                "object",
                {
                  "id": "string",
                  "properties": [
                    "object",
                    {
                      "actions": [
                        "tuple",
                        [
                          [
                            "object",
                            {}
                          ]
                        ]
                      ],
                      "criteria": [
                        "object",
                        {
                          "allOf": [
                            "tuple",
                            [
                              [
                                "object",
                                {}
                              ]
                            ]
                          ]
                        }
                      ],
                      "scopes": [
                        "tuple",
                        [
                          "string"
                        ]
                      ]
                    }
                  ],
                  "tags": [
                    "object",
                    {
                      "environment": "string",
                      "lifetime": "string",
                      "owner": "string",
                      "purpose": "string"
                    }
                  ],
                  "type": "string"
                }
              ]
            },
            "parent_id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod",
            "read_headers": null,
            "read_query_parameters": null,
            "replace_triggers_external_values": null,
            "replace_triggers_refs": null,
            "response_export_values": null,
            "retry": null,
            "schema_validation_enabled": true,
            "sensitive_body": null,
            "tags": {
              "environment": "prod",
              "lifetime": "permanent",
              "owner": "Daniel\u0026Chris",
              "purpose": "mysql-cpu-monitoring"
            },
            "timeouts": null,
            "type": "Microsoft.Insights/metricAlerts@2018-03-01",
            "update_headers": null,
            "update_query_parameters": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJzZW5zaXRpdmVfYm9keSI6ImV5Sm9ZWE5vSWpvaVpFTk9UMjFMTDI1VFdTc3hNblpJZW1GelRGaHBjM2Q2YkVkVU5WVklRVGRxUVVkWmEzWnRRM1ZSY3owaWZRPT0ifQ==",
          "dependencies": [
            "azapi_resource.mysql_flexible_server",
            "azapi_resource.site-action-group",
            "azapi_resource.site-groupmon"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azapi_resource",
      "name": "site-sql-deadlocks-alert",
      "provider": "provider[\"registry.terraform.io/azure/azapi\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "body": {
              "value": {
                "properties": {
                  "actions": {
                    "actionGroups": [
                      "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/actionGroups/site-action-group-prod"
                    ]
                  },
                  "criteria": {
                    "allOf": [
                      {
                        "failingPeriods": {
                          "minFailingPeriodsToAlert": 1,
                          "numberOfEvaluationPeriods": 1
                        },
                        "operator": "GreaterThan",
                        "query": "AzureDiagnostics | where ResourceType == 'MYSQLFLEXIBLESERVERS' | where Category == 'MySqlAuditLogs' | where Message contains 'deadlock' | summarize count() by bin(TimeGenerated, 5m)",
                        "threshold": 0,
                        "timeAggregation": "Count"
                      }
                    ]
                  },
                  "description": "Alert for SQL Server database deadlocks",
                  "enabled": true,
                  "evaluationFrequency": "PT5M",
                  "scopes": [
                    "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.OperationalInsights/workspaces/site-loganalytics-prod"
                  ],
                  "severity": 1,
                  "windowSize": "PT10M"
                }
              },
              "type": [
                "object",
                {
                  "properties": [
                    "object",
                    {
                      "actions": [
                        "object",
                        {
                          "actionGroups": [
                            "tuple",
                            [
                              "string"
                            ]
                          ]
                        }
                      ],
                      "criteria": [
                        "object",
                        {
                          "allOf": [
                            "tuple",
                            [
                              [
                                "object",
                                {
                                  "failingPeriods": [
                                    "object",
                                    {
                                      "minFailingPeriodsToAlert": "number",
                                      "numberOfEvaluationPeriods": "number"
                                    }
                                  ],
                                  "operator": "string",
                                  "query": "string",
                                  "threshold": "number",
                                  "timeAggregation": "string"
                                }
                              ]
                            ]
                          ]
                        }
                      ],
                      "description": "string",
                      "enabled": "bool",
                      "evaluationFrequency": "string",
                      "scopes": [
                        "tuple",
                        [
                          "string"
                        ]
                      ],
                      "severity": "number",
                      "windowSize": "string"
                    }
                  ]
                }
              ]
            },
            "create_headers": null,
            "create_query_parameters": null,
            "delete_headers": null,
            "delete_query_parameters": null,
            "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/scheduledQueryRules/site-mysql-deadlocks-prod",
            "identity": [],
            "ignore_casing": false,
            "ignore_missing_property": true,
            "location": "centralus",
            "locks": null,
            "name": "site-mysql-deadlocks-prod",
            "output": {
              "value": {
                "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/microsoft.insights/scheduledqueryrules/site-mysql-deadlocks-prod",
                "properties": {
                  "actions": {
                    "actionGroups": [
                      "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/actionGroups/site-action-group-prod"
                    ]
                  },
                  "createdWithApiVersion": "2023-12-01",
                  "criteria": {
                    "allOf": [
                      {}
                    ]
                  },
                  "scopes": [
                    "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.OperationalInsights/workspaces/site-loganalytics-prod"
                  ]
                },
                "tags": {
                  "environment": "prod",
                  "lifetime": "permanent",
                  "owner": "Daniel\u0026Chris",
                  "purpose": "mysql-deadlocks-monitoring"
                },
                "type": "Microsoft.Insights/scheduledQueryRules"
              },
              "type": [
                "object",
                {
                  "id": "string",
                  "properties": [
                    "object",
                    {
                      "actions": [
                        "object",
                        {
                          "actionGroups": [
                            "tuple",
                            [
                              "string"
                            ]
                          ]
                        }
                      ],
                      "createdWithApiVersion": "string",
                      "criteria": [
                        "object",
                        {
                          "allOf": [
                            "tuple",
                            [
                              [
                                "object",
                                {}
                              ]
                            ]
                          ]
                        }
                      ],
                      "scopes": [
                        "tuple",
                        [
                          "string"
                        ]
                      ]
                    }
                  ],
                  "tags": [
                    "object",
                    {
                      "environment": "string",
                      "lifetime": "string",
                      "owner": "string",
                      "purpose": "string"
                    }
                  ],
                  "type": "string"
                }
              ]
            },
            "parent_id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod",
            "read_headers": null,
            "read_query_parameters": null,
            "replace_triggers_external_values": null,
            "replace_triggers_refs": null,
            "response_export_values": null,
            "retry": null,
            "schema_validation_enabled": true,
            "sensitive_body": null,
            "tags": {
              "environment": "prod",
              "lifetime": "permanent",
              "owner": "Daniel\u0026Chris",
              "purpose": "mysql-deadlocks-monitoring"
            },
            "timeouts": null,
            "type": "Microsoft.Insights/scheduledQueryRules@2023-12-01",
            "update_headers": null,
            "update_query_parameters": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJzZW5zaXRpdmVfYm9keSI6ImV5Sm9ZWE5vSWpvaVpFTk9UMjFMTDI1VFdTc3hNblpJZW1GelRGaHBjM2Q2YkVkVU5WVklRVGRxUVVkWmEzWnRRM1ZSY3owaWZRPT0ifQ==",
          "dependencies": [
            "azapi_resource.site-action-group",
            "azapi_resource.site-groupmon",
            "azapi_resource.site-loganalytics-workspace"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azapi_resource",
      "name": "site-sql-failed-logins-alert",
      "provider": "provider[\"registry.terraform.io/azure/azapi\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "body": {
              "value": {
                "properties": {
                  "actions": {
                    "actionGroups": [
                      "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/actionGroups/site-action-group-prod"
                    ]
                  },
                  "criteria": {
                    "allOf": [
                      {
                        "failingPeriods": {
                          "minFailingPeriodsToAlert": 1,
                          "numberOfEvaluationPeriods": 1
                        },
                        "operator": "GreaterThan",
                        "query": "AzureDiagnostics | where ResourceType == 'MYSQLFLEXIBLESERVERS' | where Category == 'MySqlAuditLogs' | where Message contains 'Access denied' or Message contains 'failed' | summarize count() by bin(TimeGenerated, 5m)",
                        "threshold": 0,
                        "timeAggregation": "Count"
                      }
                    ]
                  },
                  "description": "Alert for SQL Server failed login attempts",
                  "enabled": true,
                  "evaluationFrequency": "PT5M",
                  "scopes": [
                    "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.OperationalInsights/workspaces/site-loganalytics-prod"
                  ],
                  "severity": 1,
                  "windowSize": "PT10M"
                }
              },
              "type": [
                "object",
                {
                  "properties": [
                    "object",
                    {
                      "actions": [
                        "object",
                        {
                          "actionGroups": [
                            "tuple",
                            [
                              "string"
                            ]
                          ]
                        }
                      ],
                      "criteria": [
                        "object",
                        {
                          "allOf": [
                            "tuple",
                            [
                              [
                                "object",
                                {
                                  "failingPeriods": [
                                    "object",
                                    {
                                      "minFailingPeriodsToAlert": "number",
                                      "numberOfEvaluationPeriods": "number"
                                    }
                                  ],
                                  "operator": "string",
                                  "query": "string",
                                  "threshold": "number",
                                  "timeAggregation": "string"
                                }
                              ]
                            ]
                          ]
                        }
                      ],
                      "description": "string",
                      "enabled": "bool",
                      "evaluationFrequency": "string",
                      "scopes": [
                        "tuple",
                        [
                          "string"
                        ]
                      ],
                      "severity": "number",
                      "windowSize": "string"
                    }
                  ]
                }
              ]
            },
            "create_headers": null,
            "create_query_parameters": null,
            "delete_headers": null,
            "delete_query_parameters": null,
            "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/scheduledQueryRules/site-mysql-failed-logins-prod",
            "identity": [],
            "ignore_casing": false,
            "ignore_missing_property": true,
            "location": "centralus",
            "locks": null,
            "name": "site-mysql-failed-logins-prod",
            "output": {
              "value": {
                "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/microsoft.insights/scheduledqueryrules/site-mysql-failed-logins-prod",
                "properties": {
                  "actions": {
                    "actionGroups": [
                      "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/actionGroups/site-action-group-prod"
                    ]
                  },
                  "createdWithApiVersion": "2023-12-01",
                  "criteria": {
                    "allOf": [
                      {}
                    ]
                  },
                  "scopes": [
                    "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.OperationalInsights/workspaces/site-loganalytics-prod"
                  ]
                },
                "tags": {
                  "environment": "prod",
                  "lifetime": "permanent",
                  "owner": "Daniel\u0026Chris",
                  "purpose": "mysql-failed-logins-monitoring"
                },
                "type": "Microsoft.Insights/scheduledQueryRules"
              },
              "type": [
                "object",
                {
                  "id": "string",
                  "properties": [
                    "object",
                    {
                      "actions": [
                        "object",
                        {
                          "actionGroups": [
                            "tuple",
                            [
                              "string"
                            ]
                          ]
                        }
                      ],
                      "createdWithApiVersion": "string",
                      "criteria": [
                        "object",
                        {
                          "allOf": [
                            "tuple",
                            [
                              [
                                "object",
                                {}
                              ]
                            ]
                          ]
                        }
                      ],
                      "scopes": [
                        "tuple",
                        [
                          "string"
                        ]
                      ]
                    }
                  ],
                  "tags": [
                    "object",
                    {
                      "environment": "string",
                      "lifetime": "string",
                      "owner": "string",
                      "purpose": "string"
                    }
                  ],
                  "type": "string"
                }
              ]
            },
            "parent_id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod",
            "read_headers": null,
            "read_query_parameters": null,
            "replace_triggers_external_values": null,
            "replace_triggers_refs": null,
            "response_export_values": null,
            "retry": null,
            "schema_validation_enabled": true,
            "sensitive_body": null,
            "tags": {
              "environment": "prod",
              "lifetime": "permanent",
              "owner": "Daniel\u0026Chris",
              "purpose": "mysql-failed-logins-monitoring"
            },
            "timeouts": null,
            "type": "Microsoft.Insights/scheduledQueryRules@2023-12-01",
            "update_headers": null,
            "update_query_parameters": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJzZW5zaXRpdmVfYm9keSI6ImV5Sm9ZWE5vSWpvaVpFTk9UMjFMTDI1VFdTc3hNblpJZW1GelRGaHBjM2Q2YkVkVU5WVklRVGRxUVVkWmEzWnRRM1ZSY3owaWZRPT0ifQ==",
          "dependencies": [
            "azapi_resource.site-action-group",
            "azapi_resource.site-groupmon",
            "azapi_resource.site-loganalytics-workspace"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azapi_resource",
      "name": "site-sql-long-queries-alert",
      "provider": "provider[\"registry.terraform.io/azure/azapi\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "body": {
              "value": {
                "properties": {
                  "actions": {
                    "actionGroups": [
                      "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/actionGroups/site-action-group-prod"
                    ]
                  },
                  "criteria": {
                    "allOf": [
                      {
                        "failingPeriods": {
                          "minFailingPeriodsToAlert": 1,
                          "numberOfEvaluationPeriods": 1
                        },
                        "operator": "GreaterThan",
                        "query": "let longQuerySeconds = 30.0;\nunion isfuzzy=true\n  (\n    MySqlSlowLogs\n    | extend duration_s = todouble(column_ifexists(\"Duration_s\", real(null)))\n    | where isnotnull(duration_s) and duration_s \u003e= longQuerySeconds\n    | project TimeGenerated\n  ),\n  (\n    AzureDiagnostics\n    | where Category == \"MySqlSlowLogs\"\n          and (ResourceType == \"MYSQLFLEXIBLESERVERS\" or ResourceProvider == \"MICROSOFT.DBFORMYSQL\")\n    // Parse \"Query_time: X.XXX\" from the slow log message\n    | extend duration_s = todouble(extract(@\"Query_time:?\\\\s*([0-9\\\\.]+)\", 1, tostring(Message)))\n    | where isnotnull(duration_s) and duration_s \u003e= longQuerySeconds\n    | project TimeGenerated\n  )\n| summarize Count = count() by bin(TimeGenerated, 5m)\n",
                        "threshold": 0,
                        "timeAggregation": "Count"
                      }
                    ]
                  },
                  "description": "Alert for SQL Server long-running queries (\u003e30 seconds)",
                  "enabled": true,
                  "evaluationFrequency": "PT5M",
                  "scopes": [
                    "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.OperationalInsights/workspaces/site-loganalytics-prod"
                  ],
                  "severity": 2,
                  "windowSize": "PT15M"
                }
              },
              "type": [
                "object",
                {
                  "properties": [
                    "object",
                    {
                      "actions": [
                        "object",
                        {
                          "actionGroups": [
                            "tuple",
                            [
                              "string"
                            ]
                          ]
                        }
                      ],
                      "criteria": [
                        "object",
                        {
                          "allOf": [
                            "tuple",
                            [
                              [
                                "object",
                                {
                                  "failingPeriods": [
                                    "object",
                                    {
                                      "minFailingPeriodsToAlert": "number",
                                      "numberOfEvaluationPeriods": "number"
                                    }
                                  ],
                                  "operator": "string",
                                  "query": "string",
                                  "threshold": "number",
                                  "timeAggregation": "string"
                                }
                              ]
                            ]
                          ]
                        }
                      ],
                      "description": "string",
                      "enabled": "bool",
                      "evaluationFrequency": "string",
                      "scopes": [
                        "tuple",
                        [
                          "string"
                        ]
                      ],
                      "severity": "number",
                      "windowSize": "string"
                    }
                  ]
                }
              ]
            },
            "create_headers": null,
            "create_query_parameters": null,
            "delete_headers": null,
            "delete_query_parameters": null,
            "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/scheduledQueryRules/site-mysql-long-queries-prod",
            "identity": [],
            "ignore_casing": false,
            "ignore_missing_property": true,
            "location": "centralus",
            "locks": null,
            "name": "site-mysql-long-queries-prod",
            "output": {
              "value": {
                "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/microsoft.insights/scheduledqueryrules/site-mysql-long-queries-prod",
                "properties": {
                  "actions": {
                    "actionGroups": [
                      "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/actionGroups/site-action-group-prod"
                    ]
                  },
                  "createdWithApiVersion": "2023-12-01",
                  "criteria": {
                    "allOf": [
                      {}
                    ]
                  },
                  "scopes": [
                    "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.OperationalInsights/workspaces/site-loganalytics-prod"
                  ]
                },
                "tags": {
                  "environment": "prod",
                  "lifetime": "permanent",
                  "owner": "Daniel\u0026Chris",
                  "purpose": "mysql-long-queries-monitoring"
                },
                "type": "Microsoft.Insights/scheduledQueryRules"
              },
              "type": [
                "object",
                {
                  "id": "string",
                  "properties": [
                    "object",
                    {
                      "actions": [
                        "object",
                        {
                          "actionGroups": [
                            "tuple",
                            [
                              "string"
                            ]
                          ]
                        }
                      ],
                      "createdWithApiVersion": "string",
                      "criteria": [
                        "object",
                        {
                          "allOf": [
                            "tuple",
                            [
                              [
                                "object",
                                {}
                              ]
                            ]
                          ]
                        }
                      ],
                      "scopes": [
                        "tuple",
                        [
                          "string"
                        ]
                      ]
                    }
                  ],
                  "tags": [
                    "object",
                    {
                      "environment": "string",
                      "lifetime": "string",
                      "owner": "string",
                      "purpose": "string"
                    }
                  ],
                  "type": "string"
                }
              ]
            },
            "parent_id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod",
            "read_headers": null,
            "read_query_parameters": null,
            "replace_triggers_external_values": null,
            "replace_triggers_refs": null,
            "response_export_values": null,
            "retry": null,
            "schema_validation_enabled": true,
            "sensitive_body": null,
            "tags": {
              "environment": "prod",
              "lifetime": "permanent",
              "owner": "Daniel\u0026Chris",
              "purpose": "mysql-long-queries-monitoring"
            },
            "timeouts": null,
            "type": "Microsoft.Insights/scheduledQueryRules@2023-12-01",
            "update_headers": null,
            "update_query_parameters": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJzZW5zaXRpdmVfYm9keSI6ImV5Sm9ZWE5vSWpvaVpFTk9UMjFMTDI1VFdTc3hNblpJZW1GelRGaHBjM2Q2YkVkVU5WVklRVGRxUVVkWmEzWnRRM1ZSY3owaWZRPT0ifQ==",
          "dependencies": [
            "azapi_resource.site-action-group",
            "azapi_resource.site-groupmon",
            "azapi_resource.site-loganalytics-workspace"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azapi_resource",
      "name": "site-sql-storage-alert",
      "provider": "provider[\"registry.terraform.io/azure/azapi\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "body": {
              "value": {
                "properties": {
                  "actions": [
                    {
                      "actionGroupId": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/actionGroups/site-action-group-prod",
                      "webHookProperties": {}
                    }
                  ],
                  "criteria": {
                    "allOf": [
                      {
                        "criterionType": "StaticThresholdCriterion",
                        "dimensions": [],
                        "metricName": "storage_percent",
                        "name": "Storage Usage \u003e 80%",
                        "operator": "GreaterThan",
                        "threshold": 80,
                        "timeAggregation": "Average"
                      }
                    ],
                    "odata.type": "Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria"
                  },
                  "description": "Alert when SQL Server storage usage exceeds 80%",
                  "enabled": true,
                  "evaluationFrequency": "PT5M",
                  "scopes": [
                    "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.DBforMySQL/flexibleServers/site-mysqlserver01-prod"
                  ],
                  "severity": 2,
                  "windowSize": "PT15M"
                }
              },
              "type": [
                "object",
                {
                  "properties": [
                    "object",
                    {
                      "actions": [
                        "tuple",
                        [
                          [
                            "object",
                            {
                              "actionGroupId": "string",
                              "webHookProperties": [
                                "object",
                                {}
                              ]
                            }
                          ]
                        ]
                      ],
                      "criteria": [
                        "object",
                        {
                          "allOf": [
                            "tuple",
                            [
                              [
                                "object",
                                {
                                  "criterionType": "string",
                                  "dimensions": [
                                    "tuple",
                                    []
                                  ],
                                  "metricName": "string",
                                  "name": "string",
                                  "operator": "string",
                                  "threshold": "number",
                                  "timeAggregation": "string"
                                }
                              ]
                            ]
                          ],
                          "odata.type": "string"
                        }
                      ],
                      "description": "string",
                      "enabled": "bool",
                      "evaluationFrequency": "string",
                      "scopes": [
                        "tuple",
                        [
                          "string"
                        ]
                      ],
                      "severity": "number",
                      "windowSize": "string"
                    }
                  ]
                }
              ]
            },
            "create_headers": null,
            "create_query_parameters": null,
            "delete_headers": null,
            "delete_query_parameters": null,
            "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/metricAlerts/site-mysql-storage-80-prod",
            "identity": [],
            "ignore_casing": false,
            "ignore_missing_property": true,
            "location": "global",
            "locks": null,
            "name": "site-mysql-storage-80-prod",
            "output": {
              "value": {
                "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/metricAlerts/site-mysql-storage-80-prod",
                "properties": {
                  "actions": [
                    {}
                  ],
                  "criteria": {
                    "allOf": [
                      {}
                    ]
                  },
                  "scopes": [
                    "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.DBforMySQL/flexibleServers/site-mysqlserver01-prod"
                  ]
                },
                "tags": {
                  "environment": "prod",
                  "lifetime": "permanent",
                  "owner": "Daniel\u0026Chris",
                  "purpose": "mysql-storage-monitoring"
                },
                "type": "Microsoft.Insights/metricAlerts"
              },
              "type": [
                "object",
                {
                  "id": "string",
                  "properties": [
                    "object",
                    {
                      "actions": [
                        "tuple",
                        [
                          [
                            "object",
                            {}
                          ]
                        ]
                      ],
                      "criteria": [
                        "object",
                        {
                          "allOf": [
                            "tuple",
                            [
                              [
                                "object",
                                {}
                              ]
                            ]
                          ]
                        }
                      ],
                      "scopes": [
                        "tuple",
                        [
                          "string"
                        ]
                      ]
                    }
                  ],
                  "tags": [
                    "object",
                    {
                      "environment": "string",
                      "lifetime": "string",
                      "owner": "string",
                      "purpose": "string"
                    }
                  ],
                  "type": "string"
                }
              ]
            },
            "parent_id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod",
            "read_headers": null,
            "read_query_parameters": null,
            "replace_triggers_external_values": null,
            "replace_triggers_refs": null,
            "response_export_values": null,
            "retry": null,
            "schema_validation_enabled": true,
            "sensitive_body": null,
            "tags": {
              "environment": "prod",
              "lifetime": "permanent",
              "owner": "Daniel\u0026Chris",
              "purpose": "mysql-storage-monitoring"
            },
            "timeouts": null,
            "type": "Microsoft.Insights/metricAlerts@2018-03-01",
            "update_headers": null,
            "update_query_parameters": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJzZW5zaXRpdmVfYm9keSI6ImV5Sm9ZWE5vSWpvaVpFTk9UMjFMTDI1VFdTc3hNblpJZW1GelRGaHBjM2Q2YkVkVU5WVklRVGRxUVVkWmEzWnRRM1ZSY3owaWZRPT0ifQ==",
          "dependencies": [
            "azapi_resource.mysql_flexible_server",
            "azapi_resource.site-action-group",
            "azapi_resource.site-groupmon"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azapi_resource",
      "name": "site-storage",
      "provider": "provider[\"registry.terraform.io/azure/azapi\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "body": {
              "value": {
                "kind": "StorageV2",
                "properties": {
                  "accessTier": "Hot",
                  "allowBlobPublicAccess": false,
                  "allowCrossTenantReplication": false,
                  "allowSharedKeyAccess": true,
                  "defaultToOAuthAuthentication": false,
                  "dnsEndpointType": "Standard",
                  "encryption": {
                    "keySource": "Microsoft.Storage",
                    "requireInfrastructureEncryption": false,
                    "services": {
                      "blob": {
                        "enabled": true,
                        "keyType": "Account"
                      },
                      "file": {
                        "enabled": true,
                        "keyType": "Account"
                      }
                    }
                  },
                  "largeFileSharesState": "Enabled",
                  "minimumTlsVersion": "TLS1_2",
                  "networkAcls": {
                    "bypass": "AzureServices",
                    "defaultAction": "Allow",
                    "ipRules": [],
                    "virtualNetworkRules": []
                  },
                  "publicNetworkAccess": "Enabled",
                  "supportsHttpsTrafficOnly": true
                },
                "sku": {
                  "name": "Standard_RAGRS"
                }
              },
              "type": [
                "object",
                {
                  "kind": "string",
                  "properties": [
                    "object",
                    {
                      "accessTier": "string",
                      "allowBlobPublicAccess": "bool",
                      "allowCrossTenantReplication": "bool",
                      "allowSharedKeyAccess": "bool",
                      "defaultToOAuthAuthentication": "bool",
                      "dnsEndpointType": "string",
                      "encryption": [
                        "object",
                        {
                          "keySource": "string",
                          "requireInfrastructureEncryption": "bool",
                          "services": [
                            "object",
                            {
                              "blob": [
                                "object",
                                {
                                  "enabled": "bool",
                                  "keyType": "string"
                                }
                              ],
                              "file": [
                                "object",
                                {
                                  "enabled": "bool",
                                  "keyType": "string"
                                }
                              ]
                            }
                          ]
                        }
                      ],
                      "largeFileSharesState": "string",
                      "minimumTlsVersion": "string",
                      "networkAcls": [
                        "object",
                        {
                          "bypass": "string",
                          "defaultAction": "string",
                          "ipRules": [
                            "tuple",
                            []
                          ],
                          "virtualNetworkRules": [
                            "tuple",
                            []
                          ]
                        }
                      ],
                      "publicNetworkAccess": "string",
                      "supportsHttpsTrafficOnly": "bool"
                    }
                  ],
                  "sku": [
                    "object",
                    {
                      "name": "string"
                    }
                  ]
                }
              ]
            },
            "create_headers": null,
            "create_query_parameters": null,
            "delete_headers": null,
            "delete_query_parameters": null,
            "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Storage/storageAccounts/siteazstorageprod",
            "identity": [],
            "ignore_casing": false,
            "ignore_missing_property": true,
            "location": "centralus",
            "locks": null,
            "name": "siteazstorageprod",
            "output": {
              "value": {
                "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Storage/storageAccounts/siteazstorageprod",
                "properties": {
                  "creationTime": "2025-09-12T15:11:36.9004745Z",
                  "encryption": {
                    "services": {
                      "blob": {
                        "lastEnabledTime": "2025-09-12T15:11:37.0106579Z"
                      },
                      "file": {
                        "lastEnabledTime": "2025-09-12T15:11:37.0106579Z"
                      }
                    }
                  },
                  "primaryEndpoints": {
                    "blob": "https://siteazstorageprod.blob.core.windows.net/",
                    "dfs": "https://siteazstorageprod.dfs.core.windows.net/",
                    "file": "https://siteazstorageprod.file.core.windows.net/",
                    "queue": "https://siteazstorageprod.queue.core.windows.net/",
                    "table": "https://siteazstorageprod.table.core.windows.net/",
                    "web": "https://siteazstorageprod.z19.web.core.windows.net/"
                  },
                  "primaryLocation": "centralus",
                  "provisioningState": "Succeeded",
                  "secondaryEndpoints": {
                    "blob": "https://siteazstorageprod-secondary.blob.core.windows.net/",
                    "dfs": "https://siteazstorageprod-secondary.dfs.core.windows.net/",
                    "queue": "https://siteazstorageprod-secondary.queue.core.windows.net/",
                    "table": "https://siteazstorageprod-secondary.table.core.windows.net/",
                    "web": "https://siteazstorageprod-secondary.z19.web.core.windows.net/"
                  },
                  "secondaryLocation": "eastus2",
                  "statusOfPrimary": "available",
                  "statusOfSecondary": "available"
                },
                "sku": {
                  "tier": "Standard"
                },
                "tags": {
                  "environment": "prod",
                  "lifetime": "permanent",
                  "owner": "Daniel\u0026Chris",
                  "purpose": "storage-account"
                },
                "type": "Microsoft.Storage/storageAccounts"
              },
              "type": [
                "object",
                {
                  "id": "string",
                  "properties": [
                    "object",
                    {
                      "creationTime": "string",
                      "encryption": [
                        "object",
                        {
                          "services": [
                            "object",
                            {
                              "blob": [
                                "object",
                                {
                                  "lastEnabledTime": "string"
                                }
                              ],
                              "file": [
                                "object",
                                {
                                  "lastEnabledTime": "string"
                                }
                              ]
                            }
                          ]
                        }
                      ],
                      "primaryEndpoints": [
                        "object",
                        {
                          "blob": "string",
                          "dfs": "string",
                          "file": "string",
                          "queue": "string",
                          "table": "string",
                          "web": "string"
                        }
                      ],
                      "primaryLocation": "string",
                      "provisioningState": "string",
                      "secondaryEndpoints": [
                        "object",
                        {
                          "blob": "string",
                          "dfs": "string",
                          "queue": "string",
                          "table": "string",
                          "web": "string"
                        }
                      ],
                      "secondaryLocation": "string",
                      "statusOfPrimary": "string",
                      "statusOfSecondary": "string"
                    }
                  ],
                  "sku": [
                    "object",
                    {
                      "tier": "string"
                    }
                  ],
                  "tags": [
                    "object",
                    {
                      "environment": "string",
                      "lifetime": "string",
                      "owner": "string",
                      "purpose": "string"
                    }
                  ],
                  "type": "string"
                }
              ]
            },
            "parent_id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod",
            "read_headers": null,
            "read_query_parameters": null,
            "replace_triggers_external_values": null,
            "replace_triggers_refs": null,
            "response_export_values": null,
            "retry": null,
            "schema_validation_enabled": true,
            "sensitive_body": null,
            "tags": {
              "environment": "prod",
              "lifetime": "permanent",
              "owner": "Daniel\u0026Chris",
              "purpose": "storage-account"
            },
            "timeouts": null,
            "type": "Microsoft.Storage/storageAccounts@2024-01-01",
            "update_headers": null,
            "update_query_parameters": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJzZW5zaXRpdmVfYm9keSI6ImV5Sm9ZWE5vSWpvaVpFTk9UMjFMTDI1VFdTc3hNblpJZW1GelRGaHBjM2Q2YkVkVU5WVklRVGRxUVVkWmEzWnRRM1ZSY3owaWZRPT0ifQ==",
          "dependencies": [
            "azapi_resource.site-group"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azapi_resource",
      "name": "site-storage-availability-alert",
      "provider": "provider[\"registry.terraform.io/azure/azapi\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "body": {
              "value": {
                "properties": {
                  "actions": {
                    "actionGroups": [
                      "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/actionGroups/site-action-group-prod"
                    ]
                  },
                  "criteria": {
                    "allOf": [
                      {
                        "dimensions": [],
                        "failingPeriods": {
                          "minFailingPeriodsToAlert": 1,
                          "numberOfEvaluationPeriods": 1
                        },
                        "operator": "GreaterThan",
                        "query": "AzureDiagnostics\n| where ResourceProvider == 'MICROSOFT.STORAGE'\n| where Category in ('StorageRead','StorageWrite','StorageDelete')\n// Normalize status code from whatever column exists\n| extend httpStatus =\n    toint(\n      column_ifexists(\"StatusCode\",\n      column_ifexists(\"StatusCode_d\",\n      column_ifexists(\"HttpStatusCode_d\",\n      column_ifexists(\"HttpStatusCode\",\n      column_ifexists(\"HttpStatusCode_s\", real(null))))))\n    )\n| where httpStatus in (500, 503)\n",
                        "threshold": 0,
                        "timeAggregation": "Count"
                      }
                    ]
                  },
                  "description": "Alert for Storage Account availability interruptions (HTTP 5xx)",
                  "enabled": true,
                  "evaluationFrequency": "PT5M",
                  "scopes": [
                    "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.OperationalInsights/workspaces/site-loganalytics-prod"
                  ],
                  "severity": 1,
                  "windowSize": "PT15M"
                }
              },
              "type": [
                "object",
                {
                  "properties": [
                    "object",
                    {
                      "actions": [
                        "object",
                        {
                          "actionGroups": [
                            "tuple",
                            [
                              "string"
                            ]
                          ]
                        }
                      ],
                      "criteria": [
                        "object",
                        {
                          "allOf": [
                            "tuple",
                            [
                              [
                                "object",
                                {
                                  "dimensions": [
                                    "tuple",
                                    []
                                  ],
                                  "failingPeriods": [
                                    "object",
                                    {
                                      "minFailingPeriodsToAlert": "number",
                                      "numberOfEvaluationPeriods": "number"
                                    }
                                  ],
                                  "operator": "string",
                                  "query": "string",
                                  "threshold": "number",
                                  "timeAggregation": "string"
                                }
                              ]
                            ]
                          ]
                        }
                      ],
                      "description": "string",
                      "enabled": "bool",
                      "evaluationFrequency": "string",
                      "scopes": [
                        "tuple",
                        [
                          "string"
                        ]
                      ],
                      "severity": "number",
                      "windowSize": "string"
                    }
                  ]
                }
              ]
            },
            "create_headers": null,
            "create_query_parameters": null,
            "delete_headers": null,
            "delete_query_parameters": null,
            "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/scheduledQueryRules/site-storage-availability-prod",
            "identity": [],
            "ignore_casing": false,
            "ignore_missing_property": true,
            "location": "centralus",
            "locks": null,
            "name": "site-storage-availability-prod",
            "output": {
              "value": {
                "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/microsoft.insights/scheduledqueryrules/site-storage-availability-prod",
                "properties": {
                  "actions": {
                    "actionGroups": [
                      "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/actionGroups/site-action-group-prod"
                    ]
                  },
                  "createdWithApiVersion": "2023-12-01",
                  "criteria": {
                    "allOf": [
                      {}
                    ]
                  },
                  "scopes": [
                    "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.OperationalInsights/workspaces/site-loganalytics-prod"
                  ]
                },
                "tags": {
                  "environment": "prod",
                  "lifetime": "permanent",
                  "owner": "Daniel\u0026Chris",
                  "purpose": "storage-availability-monitoring"
                },
                "type": "Microsoft.Insights/scheduledQueryRules"
              },
              "type": [
                "object",
                {
                  "id": "string",
                  "properties": [
                    "object",
                    {
                      "actions": [
                        "object",
                        {
                          "actionGroups": [
                            "tuple",
                            [
                              "string"
                            ]
                          ]
                        }
                      ],
                      "createdWithApiVersion": "string",
                      "criteria": [
                        "object",
                        {
                          "allOf": [
                            "tuple",
                            [
                              [
                                "object",
                                {}
                              ]
                            ]
                          ]
                        }
                      ],
                      "scopes": [
                        "tuple",
                        [
                          "string"
                        ]
                      ]
                    }
                  ],
                  "tags": [
                    "object",
                    {
                      "environment": "string",
                      "lifetime": "string",
                      "owner": "string",
                      "purpose": "string"
                    }
                  ],
                  "type": "string"
                }
              ]
            },
            "parent_id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod",
            "read_headers": null,
            "read_query_parameters": null,
            "replace_triggers_external_values": null,
            "replace_triggers_refs": null,
            "response_export_values": null,
            "retry": null,
            "schema_validation_enabled": true,
            "sensitive_body": null,
            "tags": {
              "environment": "prod",
              "lifetime": "permanent",
              "owner": "Daniel\u0026Chris",
              "purpose": "storage-availability-monitoring"
            },
            "timeouts": null,
            "type": "Microsoft.Insights/scheduledQueryRules@2023-12-01",
            "update_headers": null,
            "update_query_parameters": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJzZW5zaXRpdmVfYm9keSI6ImV5Sm9ZWE5vSWpvaVpFTk9UMjFMTDI1VFdTc3hNblpJZW1GelRGaHBjM2Q2YkVkVU5WVklRVGRxUVVkWmEzWnRRM1ZSY3owaWZRPT0ifQ==",
          "dependencies": [
            "azapi_resource.site-action-group",
            "azapi_resource.site-groupmon",
            "azapi_resource.site-loganalytics-workspace"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azapi_resource",
      "name": "site-storage-capacity-alert",
      "provider": "provider[\"registry.terraform.io/azure/azapi\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "body": {
              "value": {
                "properties": {
                  "actions": [
                    {
                      "actionGroupId": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/actionGroups/site-action-group-prod",
                      "webHookProperties": {}
                    }
                  ],
                  "criteria": {
                    "allOf": [
                      {
                        "criterionType": "StaticThresholdCriterion",
                        "dimensions": [],
                        "metricName": "UsedCapacity",
                        "metricNamespace": "Microsoft.Storage/storageAccounts",
                        "name": "UsedCapacity over threshold",
                        "operator": "GreaterThan",
                        "threshold": 858993459200,
                        "timeAggregation": "Average"
                      }
                    ],
                    "odata.type": "Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria"
                  },
                  "description": "Alert when Storage Account UsedCapacity exceeds threshold (bytes)",
                  "enabled": true,
                  "evaluationFrequency": "PT15M",
                  "scopes": [
                    "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Storage/storageAccounts/siteazstorageprod"
                  ],
                  "severity": 2,
                  "windowSize": "PT1H"
                }
              },
              "type": [
                "object",
                {
                  "properties": [
                    "object",
                    {
                      "actions": [
                        "tuple",
                        [
                          [
                            "object",
                            {
                              "actionGroupId": "string",
                              "webHookProperties": [
                                "object",
                                {}
                              ]
                            }
                          ]
                        ]
                      ],
                      "criteria": [
                        "object",
                        {
                          "allOf": [
                            "tuple",
                            [
                              [
                                "object",
                                {
                                  "criterionType": "string",
                                  "dimensions": [
                                    "tuple",
                                    []
                                  ],
                                  "metricName": "string",
                                  "metricNamespace": "string",
                                  "name": "string",
                                  "operator": "string",
                                  "threshold": "number",
                                  "timeAggregation": "string"
                                }
                              ]
                            ]
                          ],
                          "odata.type": "string"
                        }
                      ],
                      "description": "string",
                      "enabled": "bool",
                      "evaluationFrequency": "string",
                      "scopes": [
                        "tuple",
                        [
                          "string"
                        ]
                      ],
                      "severity": "number",
                      "windowSize": "string"
                    }
                  ]
                }
              ]
            },
            "create_headers": null,
            "create_query_parameters": null,
            "delete_headers": null,
            "delete_query_parameters": null,
            "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/metricAlerts/site-storage-capacity-80-prod",
            "identity": [],
            "ignore_casing": false,
            "ignore_missing_property": true,
            "location": "global",
            "locks": null,
            "name": "site-storage-capacity-80-prod",
            "output": {
              "value": {
                "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/metricAlerts/site-storage-capacity-80-prod",
                "properties": {
                  "actions": [
                    {}
                  ],
                  "criteria": {
                    "allOf": [
                      {}
                    ]
                  },
                  "scopes": [
                    "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Storage/storageAccounts/siteazstorageprod"
                  ]
                },
                "tags": {
                  "environment": "prod",
                  "lifetime": "permanent",
                  "owner": "Daniel\u0026Chris",
                  "purpose": "storage-capacity-monitoring"
                },
                "type": "Microsoft.Insights/metricAlerts"
              },
              "type": [
                "object",
                {
                  "id": "string",
                  "properties": [
                    "object",
                    {
                      "actions": [
                        "tuple",
                        [
                          [
                            "object",
                            {}
                          ]
                        ]
                      ],
                      "criteria": [
                        "object",
                        {
                          "allOf": [
                            "tuple",
                            [
                              [
                                "object",
                                {}
                              ]
                            ]
                          ]
                        }
                      ],
                      "scopes": [
                        "tuple",
                        [
                          "string"
                        ]
                      ]
                    }
                  ],
                  "tags": [
                    "object",
                    {
                      "environment": "string",
                      "lifetime": "string",
                      "owner": "string",
                      "purpose": "string"
                    }
                  ],
                  "type": "string"
                }
              ]
            },
            "parent_id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod",
            "read_headers": null,
            "read_query_parameters": null,
            "replace_triggers_external_values": null,
            "replace_triggers_refs": null,
            "response_export_values": null,
            "retry": null,
            "schema_validation_enabled": true,
            "sensitive_body": null,
            "tags": {
              "environment": "prod",
              "lifetime": "permanent",
              "owner": "Daniel\u0026Chris",
              "purpose": "storage-capacity-monitoring"
            },
            "timeouts": null,
            "type": "Microsoft.Insights/metricAlerts@2018-03-01",
            "update_headers": null,
            "update_query_parameters": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJzZW5zaXRpdmVfYm9keSI6ImV5Sm9ZWE5vSWpvaVpFTk9UMjFMTDI1VFdTc3hNblpJZW1GelRGaHBjM2Q2YkVkVU5WVklRVGRxUVVkWmEzWnRRM1ZSY3owaWZRPT0ifQ==",
          "dependencies": [
            "azapi_resource.site-action-group",
            "azapi_resource.site-group",
            "azapi_resource.site-groupmon",
            "azapi_resource.site-storage"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azapi_resource",
      "name": "site-storage-latency-alert",
      "provider": "provider[\"registry.terraform.io/azure/azapi\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "body": {
              "value": {
                "properties": {
                  "actions": [
                    {
                      "actionGroupId": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/actionGroups/site-action-group-prod",
                      "webHookProperties": {}
                    }
                  ],
                  "criteria": {
                    "allOf": [
                      {
                        "criterionType": "StaticThresholdCriterion",
                        "dimensions": [],
                        "metricName": "SuccessE2ELatency",
                        "metricNamespace": "Microsoft.Storage/storageAccounts",
                        "name": "High Latency \u003e 500ms",
                        "operator": "GreaterThan",
                        "threshold": 500,
                        "timeAggregation": "Average"
                      }
                    ],
                    "odata.type": "Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria"
                  },
                  "description": "Alert when Storage Account latency exceeds threshold",
                  "enabled": true,
                  "evaluationFrequency": "PT5M",
                  "scopes": [
                    "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Storage/storageAccounts/siteazstorageprod"
                  ],
                  "severity": 2,
                  "windowSize": "PT15M"
                }
              },
              "type": [
                "object",
                {
                  "properties": [
                    "object",
                    {
                      "actions": [
                        "tuple",
                        [
                          [
                            "object",
                            {
                              "actionGroupId": "string",
                              "webHookProperties": [
                                "object",
                                {}
                              ]
                            }
                          ]
                        ]
                      ],
                      "criteria": [
                        "object",
                        {
                          "allOf": [
                            "tuple",
                            [
                              [
                                "object",
                                {
                                  "criterionType": "string",
                                  "dimensions": [
                                    "tuple",
                                    []
                                  ],
                                  "metricName": "string",
                                  "metricNamespace": "string",
                                  "name": "string",
                                  "operator": "string",
                                  "threshold": "number",
                                  "timeAggregation": "string"
                                }
                              ]
                            ]
                          ],
                          "odata.type": "string"
                        }
                      ],
                      "description": "string",
                      "enabled": "bool",
                      "evaluationFrequency": "string",
                      "scopes": [
                        "tuple",
                        [
                          "string"
                        ]
                      ],
                      "severity": "number",
                      "windowSize": "string"
                    }
                  ]
                }
              ]
            },
            "create_headers": null,
            "create_query_parameters": null,
            "delete_headers": null,
            "delete_query_parameters": null,
            "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/metricAlerts/site-storage-latency-prod",
            "identity": [],
            "ignore_casing": false,
            "ignore_missing_property": true,
            "location": "global",
            "locks": null,
            "name": "site-storage-latency-prod",
            "output": {
              "value": {
                "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/metricAlerts/site-storage-latency-prod",
                "properties": {
                  "actions": [
                    {}
                  ],
                  "criteria": {
                    "allOf": [
                      {}
                    ]
                  },
                  "scopes": [
                    "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Storage/storageAccounts/siteazstorageprod"
                  ]
                },
                "tags": {
                  "environment": "prod",
                  "lifetime": "permanent",
                  "owner": "Daniel\u0026Chris",
                  "purpose": "storage-latency-monitoring"
                },
                "type": "Microsoft.Insights/metricAlerts"
              },
              "type": [
                "object",
                {
                  "id": "string",
                  "properties": [
                    "object",
                    {
                      "actions": [
                        "tuple",
                        [
                          [
                            "object",
                            {}
                          ]
                        ]
                      ],
                      "criteria": [
                        "object",
                        {
                          "allOf": [
                            "tuple",
                            [
                              [
                                "object",
                                {}
                              ]
                            ]
                          ]
                        }
                      ],
                      "scopes": [
                        "tuple",
                        [
                          "string"
                        ]
                      ]
                    }
                  ],
                  "tags": [
                    "object",
                    {
                      "environment": "string",
                      "lifetime": "string",
                      "owner": "string",
                      "purpose": "string"
                    }
                  ],
                  "type": "string"
                }
              ]
            },
            "parent_id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod",
            "read_headers": null,
            "read_query_parameters": null,
            "replace_triggers_external_values": null,
            "replace_triggers_refs": null,
            "response_export_values": null,
            "retry": null,
            "schema_validation_enabled": true,
            "sensitive_body": null,
            "tags": {
              "environment": "prod",
              "lifetime": "permanent",
              "owner": "Daniel\u0026Chris",
              "purpose": "storage-latency-monitoring"
            },
            "timeouts": null,
            "type": "Microsoft.Insights/metricAlerts@2018-03-01",
            "update_headers": null,
            "update_query_parameters": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJzZW5zaXRpdmVfYm9keSI6ImV5Sm9ZWE5vSWpvaVpFTk9UMjFMTDI1VFdTc3hNblpJZW1GelRGaHBjM2Q2YkVkVU5WVklRVGRxUVVkWmEzWnRRM1ZSY3owaWZRPT0ifQ==",
          "dependencies": [
            "azapi_resource.site-action-group",
            "azapi_resource.site-group",
            "azapi_resource.site-groupmon",
            "azapi_resource.site-storage"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azapi_resource",
      "name": "site-storage-transaction-failures-alert",
      "provider": "provider[\"registry.terraform.io/azure/azapi\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "body": {
              "value": {
                "properties": {
                  "actions": [
                    {
                      "actionGroupId": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/actionGroups/site-action-group-prod",
                      "webHookProperties": {}
                    }
                  ],
                  "criteria": {
                    "allOf": [
                      {
                        "criterionType": "StaticThresholdCriterion",
                        "dimensions": [
                          {
                            "name": "ResponseType",
                            "operator": "Include",
                            "values": [
                              "ServerOtherError",
                              "ClientOtherError",
                              "ClientThrottlingError",
                              "AuthorizationError",
                              "SASAuthorizationError",
                              "ThrottleError",
                              "ServerTimeoutError"
                            ]
                          }
                        ],
                        "metricName": "Transactions",
                        "metricNamespace": "Microsoft.Storage/storageAccounts",
                        "name": "Transaction Failures \u003e 0",
                        "operator": "GreaterThan",
                        "threshold": 0,
                        "timeAggregation": "Total"
                      }
                    ],
                    "odata.type": "Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria"
                  },
                  "description": "Alert when Storage Account transaction failures occur",
                  "enabled": true,
                  "evaluationFrequency": "PT1M",
                  "scopes": [
                    "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Storage/storageAccounts/siteazstorageprod"
                  ],
                  "severity": 1,
                  "windowSize": "PT5M"
                }
              },
              "type": [
                "object",
                {
                  "properties": [
                    "object",
                    {
                      "actions": [
                        "tuple",
                        [
                          [
                            "object",
                            {
                              "actionGroupId": "string",
                              "webHookProperties": [
                                "object",
                                {}
                              ]
                            }
                          ]
                        ]
                      ],
                      "criteria": [
                        "object",
                        {
                          "allOf": [
                            "tuple",
                            [
                              [
                                "object",
                                {
                                  "criterionType": "string",
                                  "dimensions": [
                                    "tuple",
                                    [
                                      [
                                        "object",
                                        {
                                          "name": "string",
                                          "operator": "string",
                                          "values": [
                                            "tuple",
                                            [
                                              "string",
                                              "string",
                                              "string",
                                              "string",
                                              "string",
                                              "string",
                                              "string"
                                            ]
                                          ]
                                        }
                                      ]
                                    ]
                                  ],
                                  "metricName": "string",
                                  "metricNamespace": "string",
                                  "name": "string",
                                  "operator": "string",
                                  "threshold": "number",
                                  "timeAggregation": "string"
                                }
                              ]
                            ]
                          ],
                          "odata.type": "string"
                        }
                      ],
                      "description": "string",
                      "enabled": "bool",
                      "evaluationFrequency": "string",
                      "scopes": [
                        "tuple",
                        [
                          "string"
                        ]
                      ],
                      "severity": "number",
                      "windowSize": "string"
                    }
                  ]
                }
              ]
            },
            "create_headers": null,
            "create_query_parameters": null,
            "delete_headers": null,
            "delete_query_parameters": null,
            "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/metricAlerts/site-storage-transaction-failures-prod",
            "identity": [],
            "ignore_casing": false,
            "ignore_missing_property": true,
            "location": "global",
            "locks": null,
            "name": "site-storage-transaction-failures-prod",
            "output": {
              "value": {
                "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/metricAlerts/site-storage-transaction-failures-prod",
                "properties": {
                  "actions": [
                    {}
                  ],
                  "criteria": {
                    "allOf": [
                      {
                        "dimensions": [
                          {
                            "values": [
                              "ServerOtherError",
                              "ClientOtherError",
                              "ClientThrottlingError",
                              "AuthorizationError",
                              "SASAuthorizationError",
                              "ThrottleError",
                              "ServerTimeoutError"
                            ]
                          }
                        ]
                      }
                    ]
                  },
                  "scopes": [
                    "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Storage/storageAccounts/siteazstorageprod"
                  ]
                },
                "tags": {
                  "environment": "prod",
                  "lifetime": "permanent",
                  "owner": "Daniel\u0026Chris",
                  "purpose": "storage-transaction-monitoring"
                },
                "type": "Microsoft.Insights/metricAlerts"
              },
              "type": [
                "object",
                {
                  "id": "string",
                  "properties": [
                    "object",
                    {
                      "actions": [
                        "tuple",
                        [
                          [
                            "object",
                            {}
                          ]
                        ]
                      ],
                      "criteria": [
                        "object",
                        {
                          "allOf": [
                            "tuple",
                            [
                              [
                                "object",
                                {
                                  "dimensions": [
                                    "tuple",
                                    [
                                      [
                                        "object",
                                        {
                                          "values": [
                                            "tuple",
                                            [
                                              "string",
                                              "string",
                                              "string",
                                              "string",
                                              "string",
                                              "string",
                                              "string"
                                            ]
                                          ]
                                        }
                                      ]
                                    ]
                                  ]
                                }
                              ]
                            ]
                          ]
                        }
                      ],
                      "scopes": [
                        "tuple",
                        [
                          "string"
                        ]
                      ]
                    }
                  ],
                  "tags": [
                    "object",
                    {
                      "environment": "string",
                      "lifetime": "string",
                      "owner": "string",
                      "purpose": "string"
                    }
                  ],
                  "type": "string"
                }
              ]
            },
            "parent_id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod",
            "read_headers": null,
            "read_query_parameters": null,
            "replace_triggers_external_values": null,
            "replace_triggers_refs": null,
            "response_export_values": null,
            "retry": null,
            "schema_validation_enabled": true,
            "sensitive_body": null,
            "tags": {
              "environment": "prod",
              "lifetime": "permanent",
              "owner": "Daniel\u0026Chris",
              "purpose": "storage-transaction-monitoring"
            },
            "timeouts": null,
            "type": "Microsoft.Insights/metricAlerts@2018-03-01",
            "update_headers": null,
            "update_query_parameters": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJzZW5zaXRpdmVfYm9keSI6ImV5Sm9ZWE5vSWpvaVpFTk9UMjFMTDI1VFdTc3hNblpJZW1GelRGaHBjM2Q2YkVkVU5WVklRVGRxUVVkWmEzWnRRM1ZSY3owaWZRPT0ifQ==",
          "dependencies": [
            "azapi_resource.site-action-group",
            "azapi_resource.site-group",
            "azapi_resource.site-groupmon",
            "azapi_resource.site-storage"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azapi_resource",
      "name": "site-vnet",
      "provider": "provider[\"registry.terraform.io/azure/azapi\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "body": {
              "value": {
                "properties": {
                  "addressSpace": {
                    "addressPrefixes": [
                      "10.173.0.0/24"
                    ]
                  },
                  "subnets": [
                    {
                      "name": "front-subnet",
                      "properties": {
                        "addressPrefix": "10.173.0.0/27",
                        "networkSecurityGroup": {
                          "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Network/networkSecurityGroups/site-nsg-front-prod"
                        }
                      }
                    },
                    {
                      "name": "app-subnet",
                      "properties": {
                        "addressPrefix": "10.173.0.32/27",
                        "delegations": [
                          {
                            "name": "webapp_delegation",
                            "properties": {
                              "serviceName": "Microsoft.Web/serverFarms"
                            }
                          }
                        ],
                        "networkSecurityGroup": {
                          "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Network/networkSecurityGroups/site-nsg-app-prod"
                        },
                        "serviceEndpoints": [
                          {
                            "service": "Microsoft.Web"
                          },
                          {
                            "service": "Microsoft.Storage"
                          }
                        ]
                      }
                    },
                    {
                      "name": "database-subnet",
                      "properties": {
                        "addressPrefix": "10.173.0.64/27",
                        "networkSecurityGroup": {
                          "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Network/networkSecurityGroups/site-nsg-database-prod"
                        },
                        "serviceEndpoints": [
                          {
                            "service": "Microsoft.Sql"
                          }
                        ]
                      }
                    }
                  ]
                }
              },
              "type": [
                "object",
                {
                  "properties": [
                    "object",
                    {
                      "addressSpace": [
                        "object",
                        {
                          "addressPrefixes": [
                            "list",
                            "string"
                          ]
                        }
                      ],
                      "subnets": [
                        "tuple",
                        [
                          [
                            "object",
                            {
                              "name": "string",
                              "properties": [
                                "object",
                                {
                                  "addressPrefix": "string",
                                  "networkSecurityGroup": [
                                    "object",
                                    {
                                      "id": "string"
                                    }
                                  ]
                                }
                              ]
                            }
                          ],
                          [
                            "object",
                            {
                              "name": "string",
                              "properties": [
                                "object",
                                {
                                  "addressPrefix": "string",
                                  "delegations": [
                                    "tuple",
                                    [
                                      [
                                        "object",
                                        {
                                          "name": "string",
                                          "properties": [
                                            "object",
                                            {
                                              "serviceName": "string"
                                            }
                                          ]
                                        }
                                      ]
                                    ]
                                  ],
                                  "networkSecurityGroup": [
                                    "object",
                                    {
                                      "id": "string"
                                    }
                                  ],
                                  "serviceEndpoints": [
                                    "tuple",
                                    [
                                      [
                                        "object",
                                        {
                                          "service": "string"
                                        }
                                      ],
                                      [
                                        "object",
                                        {
                                          "service": "string"
                                        }
                                      ]
                                    ]
                                  ]
                                }
                              ]
                            }
                          ],
                          [
                            "object",
                            {
                              "name": "string",
                              "properties": [
                                "object",
                                {
                                  "addressPrefix": "string",
                                  "networkSecurityGroup": [
                                    "object",
                                    {
                                      "id": "string"
                                    }
                                  ],
                                  "serviceEndpoints": [
                                    "tuple",
                                    [
                                      [
                                        "object",
                                        {
                                          "service": "string"
                                        }
                                      ]
                                    ]
                                  ]
                                }
                              ]
                            }
                          ]
                        ]
                      ]
                    }
                  ]
                }
              ]
            },
            "create_headers": null,
            "create_query_parameters": null,
            "delete_headers": null,
            "delete_query_parameters": null,
            "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Network/virtualNetworks/site-vnet-prod",
            "identity": [],
            "ignore_casing": false,
            "ignore_missing_property": true,
            "location": "centralus",
            "locks": null,
            "name": "site-vnet-prod",
            "output": {
              "value": {
                "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Network/virtualNetworks/site-vnet-prod",
                "properties": {
                  "addressSpace": {
                    "addressPrefixes": [
                      "10.173.0.0/24"
                    ]
                  },
                  "provisioningState": "Succeeded",
                  "resourceGuid": "c3bf0e4c-8716-417c-ae25-c18a852ed230",
                  "subnets": [
                    {
                      "properties": {
                        "provisioningState": "Succeeded"
                      }
                    },
                    {
                      "properties": {
                        "delegations": [
                          {
                            "properties": {
                              "actions": [
                                "Microsoft.Network/virtualNetworks/subnets/action"
                              ],
                              "provisioningState": "Succeeded"
                            }
                          }
                        ],
                        "provisioningState": "Succeeded",
                        "serviceAssociationLinks": [
                          {
                            "properties": {
                              "provisioningState": "Succeeded"
                            },
                            "type": "Microsoft.Network/virtualNetworks/subnets/serviceAssociationLinks"
                          }
                        ],
                        "serviceEndpoints": [
                          {
                            "locations": [
                              "*"
                            ],
                            "provisioningState": "Succeeded"
                          },
                          {
                            "locations": [
                              "centralus",
                              "eastus2"
                            ],
                            "provisioningState": "Succeeded"
                          }
                        ]
                      }
                    },
                    {
                      "properties": {
                        "ipConfigurations": [
                          {},
                          {}
                        ],
                        "privateEndpoints": [
                          {},
                          {}
                        ],
                        "provisioningState": "Succeeded",
                        "purpose": "PrivateEndpoints",
                        "serviceEndpoints": [
                          {
                            "locations": [
                              "centralus"
                            ],
                            "provisioningState": "Succeeded"
                          }
                        ]
                      }
                    }
                  ]
                },
                "tags": {
                  "environment": "prod",
                  "lifetime": "permanent",
                  "owner": "Daniel\u0026Chris"
                },
                "type": "Microsoft.Network/virtualNetworks"
              },
              "type": [
                "object",
                {
                  "id": "string",
                  "properties": [
                    "object",
                    {
                      "addressSpace": [
                        "object",
                        {
                          "addressPrefixes": [
                            "tuple",
                            [
                              "string"
                            ]
                          ]
                        }
                      ],
                      "provisioningState": "string",
                      "resourceGuid": "string",
                      "subnets": [
                        "tuple",
                        [
                          [
                            "object",
                            {
                              "properties": [
                                "object",
                                {
                                  "provisioningState": "string"
                                }
                              ]
                            }
                          ],
                          [
                            "object",
                            {
                              "properties": [
                                "object",
                                {
                                  "delegations": [
                                    "tuple",
                                    [
                                      [
                                        "object",
                                        {
                                          "properties": [
                                            "object",
                                            {
                                              "actions": [
                                                "tuple",
                                                [
                                                  "string"
                                                ]
                                              ],
                                              "provisioningState": "string"
                                            }
                                          ]
                                        }
                                      ]
                                    ]
                                  ],
                                  "provisioningState": "string",
                                  "serviceAssociationLinks": [
                                    "tuple",
                                    [
                                      [
                                        "object",
                                        {
                                          "properties": [
                                            "object",
                                            {
                                              "provisioningState": "string"
                                            }
                                          ],
                                          "type": "string"
                                        }
                                      ]
                                    ]
                                  ],
                                  "serviceEndpoints": [
                                    "tuple",
                                    [
                                      [
                                        "object",
                                        {
                                          "locations": [
                                            "tuple",
                                            [
                                              "string"
                                            ]
                                          ],
                                          "provisioningState": "string"
                                        }
                                      ],
                                      [
                                        "object",
                                        {
                                          "locations": [
                                            "tuple",
                                            [
                                              "string",
                                              "string"
                                            ]
                                          ],
                                          "provisioningState": "string"
                                        }
                                      ]
                                    ]
                                  ]
                                }
                              ]
                            }
                          ],
                          [
                            "object",
                            {
                              "properties": [
                                "object",
                                {
                                  "ipConfigurations": [
                                    "tuple",
                                    [
                                      [
                                        "object",
                                        {}
                                      ],
                                      [
                                        "object",
                                        {}
                                      ]
                                    ]
                                  ],
                                  "privateEndpoints": [
                                    "tuple",
                                    [
                                      [
                                        "object",
                                        {}
                                      ],
                                      [
                                        "object",
                                        {}
                                      ]
                                    ]
                                  ],
                                  "provisioningState": "string",
                                  "purpose": "string",
                                  "serviceEndpoints": [
                                    "tuple",
                                    [
                                      [
                                        "object",
                                        {
                                          "locations": [
                                            "tuple",
                                            [
                                              "string"
                                            ]
                                          ],
                                          "provisioningState": "string"
                                        }
                                      ]
                                    ]
                                  ]
                                }
                              ]
                            }
                          ]
                        ]
                      ]
                    }
                  ],
                  "tags": [
                    "object",
                    {
                      "environment": "string",
                      "lifetime": "string",
                      "owner": "string"
                    }
                  ],
                  "type": "string"
                }
              ]
            },
            "parent_id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod",
            "read_headers": null,
            "read_query_parameters": null,
            "replace_triggers_external_values": null,
            "replace_triggers_refs": null,
            "response_export_values": null,
            "retry": null,
            "schema_validation_enabled": false,
            "sensitive_body": null,
            "tags": {
              "environment": "prod",
              "lifetime": "permanent",
              "owner": "Daniel\u0026Chris"
            },
            "timeouts": null,
            "type": "Microsoft.Network/virtualNetworks@2023-09-01",
            "update_headers": null,
            "update_query_parameters": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJzZW5zaXRpdmVfYm9keSI6ImV5Sm9ZWE5vSWpvaVpFTk9UMjFMTDI1VFdTc3hNblpJZW1GelRGaHBjM2Q2YkVkVU5WVklRVGRxUVVkWmEzWnRRM1ZSY3owaWZRPT0ifQ==",
          "dependencies": [
            "azapi_resource.site-group",
            "azapi_resource.site-nsg-app",
            "azapi_resource.site-nsg-database",
            "azapi_resource.site-nsg-front"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azapi_resource",
      "name": "site_webapp_5xx_alert",
      "provider": "provider[\"registry.terraform.io/azure/azapi\"]",
      "instances": [
        {
          "index_key": "drupalservice",
          "schema_version": 2,
          "attributes": {
            "body": {
              "value": {
                "properties": {
                  "actions": [
                    {
                      "actionGroupId": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/actionGroups/site-action-group-prod",
                      "webHookProperties": {}
                    }
                  ],
                  "criteria": {
                    "allOf": [
                      {
                        "criterionType": "StaticThresholdCriterion",
                        "dimensions": [],
                        "metricName": "Http5xx",
                        "metricNamespace": "Microsoft.Web/sites",
                        "name": "HTTP 5xx Errors \u003e 0",
                        "operator": "GreaterThan",
                        "threshold": 0,
                        "timeAggregation": "Total"
                      }
                    ],
                    "odata.type": "Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria"
                  },
                  "description": "Alert when drupalservice HTTP 5xx errors exceed threshold",
                  "enabled": true,
                  "evaluationFrequency": "PT1M",
                  "scopes": [
                    "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Web/sites/site-drupalservice-prod"
                  ],
                  "severity": 1,
                  "windowSize": "PT5M"
                }
              },
              "type": [
                "object",
                {
                  "properties": [
                    "object",
                    {
                      "actions": [
                        "tuple",
                        [
                          [
                            "object",
                            {
                              "actionGroupId": "string",
                              "webHookProperties": [
                                "object",
                                {}
                              ]
                            }
                          ]
                        ]
                      ],
                      "criteria": [
                        "object",
                        {
                          "allOf": [
                            "tuple",
                            [
                              [
                                "object",
                                {
                                  "criterionType": "string",
                                  "dimensions": [
                                    "tuple",
                                    []
                                  ],
                                  "metricName": "string",
                                  "metricNamespace": "string",
                                  "name": "string",
                                  "operator": "string",
                                  "threshold": "number",
                                  "timeAggregation": "string"
                                }
                              ]
                            ]
                          ],
                          "odata.type": "string"
                        }
                      ],
                      "description": "string",
                      "enabled": "bool",
                      "evaluationFrequency": "string",
                      "scopes": [
                        "tuple",
                        [
                          "string"
                        ]
                      ],
                      "severity": "number",
                      "windowSize": "string"
                    }
                  ]
                }
              ]
            },
            "create_headers": null,
            "create_query_parameters": null,
            "delete_headers": null,
            "delete_query_parameters": null,
            "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/metricAlerts/site-drupalservice-5xx-errors-prod",
            "identity": [],
            "ignore_casing": false,
            "ignore_missing_property": true,
            "location": "global",
            "locks": null,
            "name": "site-drupalservice-5xx-errors-prod",
            "output": {
              "value": {
                "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/metricAlerts/site-drupalservice-5xx-errors-prod",
                "properties": {
                  "actions": [
                    {}
                  ],
                  "criteria": {
                    "allOf": [
                      {}
                    ]
                  },
                  "scopes": [
                    "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Web/sites/site-drupalservice-prod"
                  ]
                },
                "tags": {
                  "environment": "prod",
                  "lifetime": "permanent",
                  "owner": "Daniel\u0026Chris",
                  "purpose": "http-errors-monitoring"
                },
                "type": "Microsoft.Insights/metricAlerts"
              },
              "type": [
                "object",
                {
                  "id": "string",
                  "properties": [
                    "object",
                    {
                      "actions": [
                        "tuple",
                        [
                          [
                            "object",
                            {}
                          ]
                        ]
                      ],
                      "criteria": [
                        "object",
                        {
                          "allOf": [
                            "tuple",
                            [
                              [
                                "object",
                                {}
                              ]
                            ]
                          ]
                        }
                      ],
                      "scopes": [
                        "tuple",
                        [
                          "string"
                        ]
                      ]
                    }
                  ],
                  "tags": [
                    "object",
                    {
                      "environment": "string",
                      "lifetime": "string",
                      "owner": "string",
                      "purpose": "string"
                    }
                  ],
                  "type": "string"
                }
              ]
            },
            "parent_id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod",
            "read_headers": null,
            "read_query_parameters": null,
            "replace_triggers_external_values": null,
            "replace_triggers_refs": null,
            "response_export_values": null,
            "retry": null,
            "schema_validation_enabled": true,
            "sensitive_body": null,
            "tags": {
              "environment": "prod",
              "lifetime": "permanent",
              "owner": "Daniel\u0026Chris",
              "purpose": "http-errors-monitoring"
            },
            "timeouts": null,
            "type": "Microsoft.Insights/metricAlerts@2018-03-01",
            "update_headers": null,
            "update_query_parameters": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJzZW5zaXRpdmVfYm9keSI6ImV5Sm9ZWE5vSWpvaVpFTk9UMjFMTDI1VFdTc3hNblpJZW1GelRGaHBjM2Q2YkVkVU5WVklRVGRxUVVkWmEzWnRRM1ZSY3owaWZRPT0ifQ==",
          "dependencies": [
            "azapi_resource.app_service_plan",
            "azapi_resource.drupal_app",
            "azapi_resource.frontend_app",
            "azapi_resource.site-action-group",
            "azapi_resource.site-group",
            "azapi_resource.site-groupmon",
            "azapi_resource.site-nsg-app",
            "azapi_resource.site-nsg-database",
            "azapi_resource.site-nsg-front",
            "azapi_resource.site-vnet"
          ]
        },
        {
          "index_key": "frontendservice",
          "schema_version": 2,
          "attributes": {
            "body": {
              "value": {
                "properties": {
                  "actions": [
                    {
                      "actionGroupId": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/actionGroups/site-action-group-prod",
                      "webHookProperties": {}
                    }
                  ],
                  "criteria": {
                    "allOf": [
                      {
                        "criterionType": "StaticThresholdCriterion",
                        "dimensions": [],
                        "metricName": "Http5xx",
                        "metricNamespace": "Microsoft.Web/sites",
                        "name": "HTTP 5xx Errors \u003e 0",
                        "operator": "GreaterThan",
                        "threshold": 0,
                        "timeAggregation": "Total"
                      }
                    ],
                    "odata.type": "Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria"
                  },
                  "description": "Alert when frontendservice HTTP 5xx errors exceed threshold",
                  "enabled": true,
                  "evaluationFrequency": "PT1M",
                  "scopes": [
                    "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Web/sites/site-frontendservice-prod"
                  ],
                  "severity": 1,
                  "windowSize": "PT5M"
                }
              },
              "type": [
                "object",
                {
                  "properties": [
                    "object",
                    {
                      "actions": [
                        "tuple",
                        [
                          [
                            "object",
                            {
                              "actionGroupId": "string",
                              "webHookProperties": [
                                "object",
                                {}
                              ]
                            }
                          ]
                        ]
                      ],
                      "criteria": [
                        "object",
                        {
                          "allOf": [
                            "tuple",
                            [
                              [
                                "object",
                                {
                                  "criterionType": "string",
                                  "dimensions": [
                                    "tuple",
                                    []
                                  ],
                                  "metricName": "string",
                                  "metricNamespace": "string",
                                  "name": "string",
                                  "operator": "string",
                                  "threshold": "number",
                                  "timeAggregation": "string"
                                }
                              ]
                            ]
                          ],
                          "odata.type": "string"
                        }
                      ],
                      "description": "string",
                      "enabled": "bool",
                      "evaluationFrequency": "string",
                      "scopes": [
                        "tuple",
                        [
                          "string"
                        ]
                      ],
                      "severity": "number",
                      "windowSize": "string"
                    }
                  ]
                }
              ]
            },
            "create_headers": null,
            "create_query_parameters": null,
            "delete_headers": null,
            "delete_query_parameters": null,
            "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/metricAlerts/site-frontendservice-5xx-errors-prod",
            "identity": [],
            "ignore_casing": false,
            "ignore_missing_property": true,
            "location": "global",
            "locks": null,
            "name": "site-frontendservice-5xx-errors-prod",
            "output": {
              "value": {
                "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/metricAlerts/site-frontendservice-5xx-errors-prod",
                "properties": {
                  "actions": [
                    {}
                  ],
                  "criteria": {
                    "allOf": [
                      {}
                    ]
                  },
                  "scopes": [
                    "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Web/sites/site-frontendservice-prod"
                  ]
                },
                "tags": {
                  "environment": "prod",
                  "lifetime": "permanent",
                  "owner": "Daniel\u0026Chris",
                  "purpose": "http-errors-monitoring"
                },
                "type": "Microsoft.Insights/metricAlerts"
              },
              "type": [
                "object",
                {
                  "id": "string",
                  "properties": [
                    "object",
                    {
                      "actions": [
                        "tuple",
                        [
                          [
                            "object",
                            {}
                          ]
                        ]
                      ],
                      "criteria": [
                        "object",
                        {
                          "allOf": [
                            "tuple",
                            [
                              [
                                "object",
                                {}
                              ]
                            ]
                          ]
                        }
                      ],
                      "scopes": [
                        "tuple",
                        [
                          "string"
                        ]
                      ]
                    }
                  ],
                  "tags": [
                    "object",
                    {
                      "environment": "string",
                      "lifetime": "string",
                      "owner": "string",
                      "purpose": "string"
                    }
                  ],
                  "type": "string"
                }
              ]
            },
            "parent_id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod",
            "read_headers": null,
            "read_query_parameters": null,
            "replace_triggers_external_values": null,
            "replace_triggers_refs": null,
            "response_export_values": null,
            "retry": null,
            "schema_validation_enabled": true,
            "sensitive_body": null,
            "tags": {
              "environment": "prod",
              "lifetime": "permanent",
              "owner": "Daniel\u0026Chris",
              "purpose": "http-errors-monitoring"
            },
            "timeouts": null,
            "type": "Microsoft.Insights/metricAlerts@2018-03-01",
            "update_headers": null,
            "update_query_parameters": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJzZW5zaXRpdmVfYm9keSI6ImV5Sm9ZWE5vSWpvaVpFTk9UMjFMTDI1VFdTc3hNblpJZW1GelRGaHBjM2Q2YkVkVU5WVklRVGRxUVVkWmEzWnRRM1ZSY3owaWZRPT0ifQ==",
          "dependencies": [
            "azapi_resource.app_service_plan",
            "azapi_resource.drupal_app",
            "azapi_resource.frontend_app",
            "azapi_resource.site-action-group",
            "azapi_resource.site-group",
            "azapi_resource.site-groupmon",
            "azapi_resource.site-nsg-app",
            "azapi_resource.site-nsg-database",
            "azapi_resource.site-nsg-front",
            "azapi_resource.site-vnet"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azapi_resource",
      "name": "site_webapp_memory_alert",
      "provider": "provider[\"registry.terraform.io/azure/azapi\"]",
      "instances": [
        {
          "index_key": "drupalservice",
          "schema_version": 2,
          "attributes": {
            "body": {
              "value": {
                "properties": {
                  "actions": [
                    {
                      "actionGroupId": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/actionGroups/site-action-group-prod",
                      "webHookProperties": {}
                    }
                  ],
                  "criteria": {
                    "allOf": [
                      {
                        "criterionType": "StaticThresholdCriterion",
                        "dimensions": [],
                        "metricName": "MemoryWorkingSet",
                        "metricNamespace": "Microsoft.Web/sites",
                        "name": "MemoryWorkingSet high",
                        "operator": "GreaterThan",
                        "threshold": 1073741824,
                        "timeAggregation": "Average"
                      }
                    ],
                    "odata.type": "Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria"
                  },
                  "description": "Alert when drupalservice MemoryWorkingSet exceeds 1024 MB (avg over 15m)",
                  "enabled": true,
                  "evaluationFrequency": "PT5M",
                  "scopes": [
                    "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Web/sites/site-drupalservice-prod"
                  ],
                  "severity": 2,
                  "windowSize": "PT15M"
                }
              },
              "type": [
                "object",
                {
                  "properties": [
                    "object",
                    {
                      "actions": [
                        "tuple",
                        [
                          [
                            "object",
                            {
                              "actionGroupId": "string",
                              "webHookProperties": [
                                "object",
                                {}
                              ]
                            }
                          ]
                        ]
                      ],
                      "criteria": [
                        "object",
                        {
                          "allOf": [
                            "tuple",
                            [
                              [
                                "object",
                                {
                                  "criterionType": "string",
                                  "dimensions": [
                                    "tuple",
                                    []
                                  ],
                                  "metricName": "string",
                                  "metricNamespace": "string",
                                  "name": "string",
                                  "operator": "string",
                                  "threshold": "number",
                                  "timeAggregation": "string"
                                }
                              ]
                            ]
                          ],
                          "odata.type": "string"
                        }
                      ],
                      "description": "string",
                      "enabled": "bool",
                      "evaluationFrequency": "string",
                      "scopes": [
                        "tuple",
                        [
                          "string"
                        ]
                      ],
                      "severity": "number",
                      "windowSize": "string"
                    }
                  ]
                }
              ]
            },
            "create_headers": null,
            "create_query_parameters": null,
            "delete_headers": null,
            "delete_query_parameters": null,
            "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/metricAlerts/site-drupalservice-memory-80-prod",
            "identity": [],
            "ignore_casing": false,
            "ignore_missing_property": true,
            "location": "global",
            "locks": null,
            "name": "site-drupalservice-memory-80-prod",
            "output": {
              "value": {
                "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/metricAlerts/site-drupalservice-memory-80-prod",
                "properties": {
                  "actions": [
                    {}
                  ],
                  "criteria": {
                    "allOf": [
                      {}
                    ]
                  },
                  "scopes": [
                    "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Web/sites/site-drupalservice-prod"
                  ]
                },
                "tags": {
                  "environment": "prod",
                  "lifetime": "permanent",
                  "owner": "Daniel\u0026Chris",
                  "purpose": "memory-monitoring"
                },
                "type": "Microsoft.Insights/metricAlerts"
              },
              "type": [
                "object",
                {
                  "id": "string",
                  "properties": [
                    "object",
                    {
                      "actions": [
                        "tuple",
                        [
                          [
                            "object",
                            {}
                          ]
                        ]
                      ],
                      "criteria": [
                        "object",
                        {
                          "allOf": [
                            "tuple",
                            [
                              [
                                "object",
                                {}
                              ]
                            ]
                          ]
                        }
                      ],
                      "scopes": [
                        "tuple",
                        [
                          "string"
                        ]
                      ]
                    }
                  ],
                  "tags": [
                    "object",
                    {
                      "environment": "string",
                      "lifetime": "string",
                      "owner": "string",
                      "purpose": "string"
                    }
                  ],
                  "type": "string"
                }
              ]
            },
            "parent_id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod",
            "read_headers": null,
            "read_query_parameters": null,
            "replace_triggers_external_values": null,
            "replace_triggers_refs": null,
            "response_export_values": null,
            "retry": null,
            "schema_validation_enabled": true,
            "sensitive_body": null,
            "tags": {
              "environment": "prod",
              "lifetime": "permanent",
              "owner": "Daniel\u0026Chris",
              "purpose": "memory-monitoring"
            },
            "timeouts": null,
            "type": "Microsoft.Insights/metricAlerts@2018-03-01",
            "update_headers": null,
            "update_query_parameters": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJzZW5zaXRpdmVfYm9keSI6ImV5Sm9ZWE5vSWpvaVpFTk9UMjFMTDI1VFdTc3hNblpJZW1GelRGaHBjM2Q2YkVkVU5WVklRVGRxUVVkWmEzWnRRM1ZSY3owaWZRPT0ifQ==",
          "dependencies": [
            "azapi_resource.app_service_plan",
            "azapi_resource.drupal_app",
            "azapi_resource.frontend_app",
            "azapi_resource.site-action-group",
            "azapi_resource.site-group",
            "azapi_resource.site-groupmon",
            "azapi_resource.site-nsg-app",
            "azapi_resource.site-nsg-database",
            "azapi_resource.site-nsg-front",
            "azapi_resource.site-vnet"
          ]
        },
        {
          "index_key": "frontendservice",
          "schema_version": 2,
          "attributes": {
            "body": {
              "value": {
                "properties": {
                  "actions": [
                    {
                      "actionGroupId": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/actionGroups/site-action-group-prod",
                      "webHookProperties": {}
                    }
                  ],
                  "criteria": {
                    "allOf": [
                      {
                        "criterionType": "StaticThresholdCriterion",
                        "dimensions": [],
                        "metricName": "MemoryWorkingSet",
                        "metricNamespace": "Microsoft.Web/sites",
                        "name": "MemoryWorkingSet high",
                        "operator": "GreaterThan",
                        "threshold": 1073741824,
                        "timeAggregation": "Average"
                      }
                    ],
                    "odata.type": "Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria"
                  },
                  "description": "Alert when frontendservice MemoryWorkingSet exceeds 1024 MB (avg over 15m)",
                  "enabled": true,
                  "evaluationFrequency": "PT5M",
                  "scopes": [
                    "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Web/sites/site-frontendservice-prod"
                  ],
                  "severity": 2,
                  "windowSize": "PT15M"
                }
              },
              "type": [
                "object",
                {
                  "properties": [
                    "object",
                    {
                      "actions": [
                        "tuple",
                        [
                          [
                            "object",
                            {
                              "actionGroupId": "string",
                              "webHookProperties": [
                                "object",
                                {}
                              ]
                            }
                          ]
                        ]
                      ],
                      "criteria": [
                        "object",
                        {
                          "allOf": [
                            "tuple",
                            [
                              [
                                "object",
                                {
                                  "criterionType": "string",
                                  "dimensions": [
                                    "tuple",
                                    []
                                  ],
                                  "metricName": "string",
                                  "metricNamespace": "string",
                                  "name": "string",
                                  "operator": "string",
                                  "threshold": "number",
                                  "timeAggregation": "string"
                                }
                              ]
                            ]
                          ],
                          "odata.type": "string"
                        }
                      ],
                      "description": "string",
                      "enabled": "bool",
                      "evaluationFrequency": "string",
                      "scopes": [
                        "tuple",
                        [
                          "string"
                        ]
                      ],
                      "severity": "number",
                      "windowSize": "string"
                    }
                  ]
                }
              ]
            },
            "create_headers": null,
            "create_query_parameters": null,
            "delete_headers": null,
            "delete_query_parameters": null,
            "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/metricAlerts/site-frontendservice-memory-80-prod",
            "identity": [],
            "ignore_casing": false,
            "ignore_missing_property": true,
            "location": "global",
            "locks": null,
            "name": "site-frontendservice-memory-80-prod",
            "output": {
              "value": {
                "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/metricAlerts/site-frontendservice-memory-80-prod",
                "properties": {
                  "actions": [
                    {}
                  ],
                  "criteria": {
                    "allOf": [
                      {}
                    ]
                  },
                  "scopes": [
                    "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Web/sites/site-frontendservice-prod"
                  ]
                },
                "tags": {
                  "environment": "prod",
                  "lifetime": "permanent",
                  "owner": "Daniel\u0026Chris",
                  "purpose": "memory-monitoring"
                },
                "type": "Microsoft.Insights/metricAlerts"
              },
              "type": [
                "object",
                {
                  "id": "string",
                  "properties": [
                    "object",
                    {
                      "actions": [
                        "tuple",
                        [
                          [
                            "object",
                            {}
                          ]
                        ]
                      ],
                      "criteria": [
                        "object",
                        {
                          "allOf": [
                            "tuple",
                            [
                              [
                                "object",
                                {}
                              ]
                            ]
                          ]
                        }
                      ],
                      "scopes": [
                        "tuple",
                        [
                          "string"
                        ]
                      ]
                    }
                  ],
                  "tags": [
                    "object",
                    {
                      "environment": "string",
                      "lifetime": "string",
                      "owner": "string",
                      "purpose": "string"
                    }
                  ],
                  "type": "string"
                }
              ]
            },
            "parent_id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod",
            "read_headers": null,
            "read_query_parameters": null,
            "replace_triggers_external_values": null,
            "replace_triggers_refs": null,
            "response_export_values": null,
            "retry": null,
            "schema_validation_enabled": true,
            "sensitive_body": null,
            "tags": {
              "environment": "prod",
              "lifetime": "permanent",
              "owner": "Daniel\u0026Chris",
              "purpose": "memory-monitoring"
            },
            "timeouts": null,
            "type": "Microsoft.Insights/metricAlerts@2018-03-01",
            "update_headers": null,
            "update_query_parameters": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJzZW5zaXRpdmVfYm9keSI6ImV5Sm9ZWE5vSWpvaVpFTk9UMjFMTDI1VFdTc3hNblpJZW1GelRGaHBjM2Q2YkVkVU5WVklRVGRxUVVkWmEzWnRRM1ZSY3owaWZRPT0ifQ==",
          "dependencies": [
            "azapi_resource.app_service_plan",
            "azapi_resource.drupal_app",
            "azapi_resource.frontend_app",
            "azapi_resource.site-action-group",
            "azapi_resource.site-group",
            "azapi_resource.site-groupmon",
            "azapi_resource.site-nsg-app",
            "azapi_resource.site-nsg-database",
            "azapi_resource.site-nsg-front",
            "azapi_resource.site-vnet"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azapi_resource",
      "name": "site_webapp_response_time_alert",
      "provider": "provider[\"registry.terraform.io/azure/azapi\"]",
      "instances": [
        {
          "index_key": "drupalservice",
          "schema_version": 2,
          "attributes": {
            "body": {
              "value": {
                "properties": {
                  "actions": [
                    {
                      "actionGroupId": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/actionGroups/site-action-group-prod",
                      "webHookProperties": {}
                    }
                  ],
                  "criteria": {
                    "allOf": [
                      {
                        "criterionType": "StaticThresholdCriterion",
                        "dimensions": [],
                        "metricName": "AverageResponseTime",
                        "metricNamespace": "Microsoft.Web/sites",
                        "name": "Response Time \u003e threshold",
                        "operator": "GreaterThan",
                        "threshold": 1000,
                        "timeAggregation": "Average"
                      }
                    ],
                    "odata.type": "Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria"
                  },
                  "description": "Alert when drupalservice average response time \u003e 1000 ms",
                  "enabled": true,
                  "evaluationFrequency": "PT5M",
                  "scopes": [
                    "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Web/sites/site-drupalservice-prod"
                  ],
                  "severity": 2,
                  "windowSize": "PT15M"
                }
              },
              "type": [
                "object",
                {
                  "properties": [
                    "object",
                    {
                      "actions": [
                        "tuple",
                        [
                          [
                            "object",
                            {
                              "actionGroupId": "string",
                              "webHookProperties": [
                                "object",
                                {}
                              ]
                            }
                          ]
                        ]
                      ],
                      "criteria": [
                        "object",
                        {
                          "allOf": [
                            "tuple",
                            [
                              [
                                "object",
                                {
                                  "criterionType": "string",
                                  "dimensions": [
                                    "tuple",
                                    []
                                  ],
                                  "metricName": "string",
                                  "metricNamespace": "string",
                                  "name": "string",
                                  "operator": "string",
                                  "threshold": "number",
                                  "timeAggregation": "string"
                                }
                              ]
                            ]
                          ],
                          "odata.type": "string"
                        }
                      ],
                      "description": "string",
                      "enabled": "bool",
                      "evaluationFrequency": "string",
                      "scopes": [
                        "tuple",
                        [
                          "string"
                        ]
                      ],
                      "severity": "number",
                      "windowSize": "string"
                    }
                  ]
                }
              ]
            },
            "create_headers": null,
            "create_query_parameters": null,
            "delete_headers": null,
            "delete_query_parameters": null,
            "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/metricAlerts/site-drupalservice-response-time-1s-prod",
            "identity": [],
            "ignore_casing": false,
            "ignore_missing_property": true,
            "location": "global",
            "locks": null,
            "name": "site-drupalservice-response-time-1s-prod",
            "output": {
              "value": {
                "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/metricAlerts/site-drupalservice-response-time-1s-prod",
                "properties": {
                  "actions": [
                    {}
                  ],
                  "criteria": {
                    "allOf": [
                      {}
                    ]
                  },
                  "scopes": [
                    "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Web/sites/site-drupalservice-prod"
                  ]
                },
                "tags": {
                  "environment": "prod",
                  "lifetime": "permanent",
                  "owner": "Daniel\u0026Chris",
                  "purpose": "response-time-monitoring"
                },
                "type": "Microsoft.Insights/metricAlerts"
              },
              "type": [
                "object",
                {
                  "id": "string",
                  "properties": [
                    "object",
                    {
                      "actions": [
                        "tuple",
                        [
                          [
                            "object",
                            {}
                          ]
                        ]
                      ],
                      "criteria": [
                        "object",
                        {
                          "allOf": [
                            "tuple",
                            [
                              [
                                "object",
                                {}
                              ]
                            ]
                          ]
                        }
                      ],
                      "scopes": [
                        "tuple",
                        [
                          "string"
                        ]
                      ]
                    }
                  ],
                  "tags": [
                    "object",
                    {
                      "environment": "string",
                      "lifetime": "string",
                      "owner": "string",
                      "purpose": "string"
                    }
                  ],
                  "type": "string"
                }
              ]
            },
            "parent_id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod",
            "read_headers": null,
            "read_query_parameters": null,
            "replace_triggers_external_values": null,
            "replace_triggers_refs": null,
            "response_export_values": null,
            "retry": null,
            "schema_validation_enabled": true,
            "sensitive_body": null,
            "tags": {
              "environment": "prod",
              "lifetime": "permanent",
              "owner": "Daniel\u0026Chris",
              "purpose": "response-time-monitoring"
            },
            "timeouts": null,
            "type": "Microsoft.Insights/metricAlerts@2018-03-01",
            "update_headers": null,
            "update_query_parameters": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJzZW5zaXRpdmVfYm9keSI6ImV5Sm9ZWE5vSWpvaVpFTk9UMjFMTDI1VFdTc3hNblpJZW1GelRGaHBjM2Q2YkVkVU5WVklRVGRxUVVkWmEzWnRRM1ZSY3owaWZRPT0ifQ==",
          "dependencies": [
            "azapi_resource.app_service_plan",
            "azapi_resource.drupal_app",
            "azapi_resource.frontend_app",
            "azapi_resource.site-action-group",
            "azapi_resource.site-group",
            "azapi_resource.site-groupmon",
            "azapi_resource.site-nsg-app",
            "azapi_resource.site-nsg-database",
            "azapi_resource.site-nsg-front",
            "azapi_resource.site-vnet"
          ]
        },
        {
          "index_key": "frontendservice",
          "schema_version": 2,
          "attributes": {
            "body": {
              "value": {
                "properties": {
                  "actions": [
                    {
                      "actionGroupId": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/actionGroups/site-action-group-prod",
                      "webHookProperties": {}
                    }
                  ],
                  "criteria": {
                    "allOf": [
                      {
                        "criterionType": "StaticThresholdCriterion",
                        "dimensions": [],
                        "metricName": "AverageResponseTime",
                        "metricNamespace": "Microsoft.Web/sites",
                        "name": "Response Time \u003e threshold",
                        "operator": "GreaterThan",
                        "threshold": 1000,
                        "timeAggregation": "Average"
                      }
                    ],
                    "odata.type": "Microsoft.Azure.Monitor.SingleResourceMultipleMetricCriteria"
                  },
                  "description": "Alert when frontendservice average response time \u003e 1000 ms",
                  "enabled": true,
                  "evaluationFrequency": "PT5M",
                  "scopes": [
                    "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Web/sites/site-frontendservice-prod"
                  ],
                  "severity": 2,
                  "windowSize": "PT15M"
                }
              },
              "type": [
                "object",
                {
                  "properties": [
                    "object",
                    {
                      "actions": [
                        "tuple",
                        [
                          [
                            "object",
                            {
                              "actionGroupId": "string",
                              "webHookProperties": [
                                "object",
                                {}
                              ]
                            }
                          ]
                        ]
                      ],
                      "criteria": [
                        "object",
                        {
                          "allOf": [
                            "tuple",
                            [
                              [
                                "object",
                                {
                                  "criterionType": "string",
                                  "dimensions": [
                                    "tuple",
                                    []
                                  ],
                                  "metricName": "string",
                                  "metricNamespace": "string",
                                  "name": "string",
                                  "operator": "string",
                                  "threshold": "number",
                                  "timeAggregation": "string"
                                }
                              ]
                            ]
                          ],
                          "odata.type": "string"
                        }
                      ],
                      "description": "string",
                      "enabled": "bool",
                      "evaluationFrequency": "string",
                      "scopes": [
                        "tuple",
                        [
                          "string"
                        ]
                      ],
                      "severity": "number",
                      "windowSize": "string"
                    }
                  ]
                }
              ]
            },
            "create_headers": null,
            "create_query_parameters": null,
            "delete_headers": null,
            "delete_query_parameters": null,
            "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/metricAlerts/site-frontendservice-response-time-1s-prod",
            "identity": [],
            "ignore_casing": false,
            "ignore_missing_property": true,
            "location": "global",
            "locks": null,
            "name": "site-frontendservice-response-time-1s-prod",
            "output": {
              "value": {
                "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/metricAlerts/site-frontendservice-response-time-1s-prod",
                "properties": {
                  "actions": [
                    {}
                  ],
                  "criteria": {
                    "allOf": [
                      {}
                    ]
                  },
                  "scopes": [
                    "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Web/sites/site-frontendservice-prod"
                  ]
                },
                "tags": {
                  "environment": "prod",
                  "lifetime": "permanent",
                  "owner": "Daniel\u0026Chris",
                  "purpose": "response-time-monitoring"
                },
                "type": "Microsoft.Insights/metricAlerts"
              },
              "type": [
                "object",
                {
                  "id": "string",
                  "properties": [
                    "object",
                    {
                      "actions": [
                        "tuple",
                        [
                          [
                            "object",
                            {}
                          ]
                        ]
                      ],
                      "criteria": [
                        "object",
                        {
                          "allOf": [
                            "tuple",
                            [
                              [
                                "object",
                                {}
                              ]
                            ]
                          ]
                        }
                      ],
                      "scopes": [
                        "tuple",
                        [
                          "string"
                        ]
                      ]
                    }
                  ],
                  "tags": [
                    "object",
                    {
                      "environment": "string",
                      "lifetime": "string",
                      "owner": "string",
                      "purpose": "string"
                    }
                  ],
                  "type": "string"
                }
              ]
            },
            "parent_id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod",
            "read_headers": null,
            "read_query_parameters": null,
            "replace_triggers_external_values": null,
            "replace_triggers_refs": null,
            "response_export_values": null,
            "retry": null,
            "schema_validation_enabled": true,
            "sensitive_body": null,
            "tags": {
              "environment": "prod",
              "lifetime": "permanent",
              "owner": "Daniel\u0026Chris",
              "purpose": "response-time-monitoring"
            },
            "timeouts": null,
            "type": "Microsoft.Insights/metricAlerts@2018-03-01",
            "update_headers": null,
            "update_query_parameters": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJzZW5zaXRpdmVfYm9keSI6ImV5Sm9ZWE5vSWpvaVpFTk9UMjFMTDI1VFdTc3hNblpJZW1GelRGaHBjM2Q2YkVkVU5WVklRVGRxUVVkWmEzWnRRM1ZSY3owaWZRPT0ifQ==",
          "dependencies": [
            "azapi_resource.app_service_plan",
            "azapi_resource.drupal_app",
            "azapi_resource.frontend_app",
            "azapi_resource.site-action-group",
            "azapi_resource.site-group",
            "azapi_resource.site-groupmon",
            "azapi_resource.site-nsg-app",
            "azapi_resource.site-nsg-database",
            "azapi_resource.site-nsg-front",
            "azapi_resource.site-vnet"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azapi_resource",
      "name": "site_webapp_restart_alert",
      "provider": "provider[\"registry.terraform.io/azure/azapi\"]",
      "instances": [
        {
          "index_key": "drupalservice",
          "schema_version": 2,
          "attributes": {
            "body": {
              "value": {
                "properties": {
                  "actions": {
                    "actionGroups": [
                      {
                        "actionGroupId": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/actionGroups/site-action-group-prod",
                        "webhookProperties": {}
                      }
                    ]
                  },
                  "condition": {
                    "allOf": [
                      {
                        "equals": "Administrative",
                        "field": "category"
                      },
                      {
                        "equals": "Microsoft.Web/sites/restart/action",
                        "field": "operationName"
                      },
                      {
                        "equals": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Web/sites/site-drupalservice-prod",
                        "field": "resourceId"
                      },
                      {
                        "equals": "Succeeded",
                        "field": "status"
                      }
                    ]
                  },
                  "description": "Alert when drupalservice is restarted (Activity Log)",
                  "enabled": true,
                  "scopes": [
                    "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod"
                  ]
                }
              },
              "type": [
                "object",
                {
                  "properties": [
                    "object",
                    {
                      "actions": [
                        "object",
                        {
                          "actionGroups": [
                            "tuple",
                            [
                              [
                                "object",
                                {
                                  "actionGroupId": "string",
                                  "webhookProperties": [
                                    "object",
                                    {}
                                  ]
                                }
                              ]
                            ]
                          ]
                        }
                      ],
                      "condition": [
                        "object",
                        {
                          "allOf": [
                            "tuple",
                            [
                              [
                                "object",
                                {
                                  "equals": "string",
                                  "field": "string"
                                }
                              ],
                              [
                                "object",
                                {
                                  "equals": "string",
                                  "field": "string"
                                }
                              ],
                              [
                                "object",
                                {
                                  "equals": "string",
                                  "field": "string"
                                }
                              ],
                              [
                                "object",
                                {
                                  "equals": "string",
                                  "field": "string"
                                }
                              ]
                            ]
                          ]
                        }
                      ],
                      "description": "string",
                      "enabled": "bool",
                      "scopes": [
                        "tuple",
                        [
                          "string"
                        ]
                      ]
                    }
                  ]
                }
              ]
            },
            "create_headers": null,
            "create_query_parameters": null,
            "delete_headers": null,
            "delete_query_parameters": null,
            "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/activityLogAlerts/site-drupalservice-restart-events-prod",
            "identity": [],
            "ignore_casing": false,
            "ignore_missing_property": true,
            "location": "global",
            "locks": null,
            "name": "site-drupalservice-restart-events-prod",
            "output": {
              "value": {
                "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/activityLogAlerts/site-drupalservice-restart-events-prod",
                "properties": {
                  "actions": {
                    "actionGroups": [
                      {}
                    ]
                  },
                  "condition": {
                    "allOf": [
                      {},
                      {},
                      {},
                      {}
                    ]
                  },
                  "scopes": [
                    "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod"
                  ]
                },
                "tags": {
                  "environment": "prod",
                  "lifetime": "permanent",
                  "owner": "Daniel\u0026Chris",
                  "purpose": "restart-monitoring"
                },
                "type": "Microsoft.Insights/ActivityLogAlerts"
              },
              "type": [
                "object",
                {
                  "id": "string",
                  "properties": [
                    "object",
                    {
                      "actions": [
                        "object",
                        {
                          "actionGroups": [
                            "tuple",
                            [
                              [
                                "object",
                                {}
                              ]
                            ]
                          ]
                        }
                      ],
                      "condition": [
                        "object",
                        {
                          "allOf": [
                            "tuple",
                            [
                              [
                                "object",
                                {}
                              ],
                              [
                                "object",
                                {}
                              ],
                              [
                                "object",
                                {}
                              ],
                              [
                                "object",
                                {}
                              ]
                            ]
                          ]
                        }
                      ],
                      "scopes": [
                        "tuple",
                        [
                          "string"
                        ]
                      ]
                    }
                  ],
                  "tags": [
                    "object",
                    {
                      "environment": "string",
                      "lifetime": "string",
                      "owner": "string",
                      "purpose": "string"
                    }
                  ],
                  "type": "string"
                }
              ]
            },
            "parent_id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod",
            "read_headers": null,
            "read_query_parameters": null,
            "replace_triggers_external_values": null,
            "replace_triggers_refs": null,
            "response_export_values": null,
            "retry": null,
            "schema_validation_enabled": true,
            "sensitive_body": null,
            "tags": {
              "environment": "prod",
              "lifetime": "permanent",
              "owner": "Daniel\u0026Chris",
              "purpose": "restart-monitoring"
            },
            "timeouts": null,
            "type": "Microsoft.Insights/activityLogAlerts@2017-04-01",
            "update_headers": null,
            "update_query_parameters": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJzZW5zaXRpdmVfYm9keSI6ImV5Sm9ZWE5vSWpvaVpFTk9UMjFMTDI1VFdTc3hNblpJZW1GelRGaHBjM2Q2YkVkVU5WVklRVGRxUVVkWmEzWnRRM1ZSY3owaWZRPT0ifQ==",
          "dependencies": [
            "azapi_resource.app_service_plan",
            "azapi_resource.drupal_app",
            "azapi_resource.frontend_app",
            "azapi_resource.site-action-group",
            "azapi_resource.site-group",
            "azapi_resource.site-groupmon",
            "azapi_resource.site-nsg-app",
            "azapi_resource.site-nsg-database",
            "azapi_resource.site-nsg-front",
            "azapi_resource.site-vnet"
          ]
        },
        {
          "index_key": "frontendservice",
          "schema_version": 2,
          "attributes": {
            "body": {
              "value": {
                "properties": {
                  "actions": {
                    "actionGroups": [
                      {
                        "actionGroupId": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/actionGroups/site-action-group-prod",
                        "webhookProperties": {}
                      }
                    ]
                  },
                  "condition": {
                    "allOf": [
                      {
                        "equals": "Administrative",
                        "field": "category"
                      },
                      {
                        "equals": "Microsoft.Web/sites/restart/action",
                        "field": "operationName"
                      },
                      {
                        "equals": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod/providers/Microsoft.Web/sites/site-frontendservice-prod",
                        "field": "resourceId"
                      },
                      {
                        "equals": "Succeeded",
                        "field": "status"
                      }
                    ]
                  },
                  "description": "Alert when frontendservice is restarted (Activity Log)",
                  "enabled": true,
                  "scopes": [
                    "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod"
                  ]
                }
              },
              "type": [
                "object",
                {
                  "properties": [
                    "object",
                    {
                      "actions": [
                        "object",
                        {
                          "actionGroups": [
                            "tuple",
                            [
                              [
                                "object",
                                {
                                  "actionGroupId": "string",
                                  "webhookProperties": [
                                    "object",
                                    {}
                                  ]
                                }
                              ]
                            ]
                          ]
                        }
                      ],
                      "condition": [
                        "object",
                        {
                          "allOf": [
                            "tuple",
                            [
                              [
                                "object",
                                {
                                  "equals": "string",
                                  "field": "string"
                                }
                              ],
                              [
                                "object",
                                {
                                  "equals": "string",
                                  "field": "string"
                                }
                              ],
                              [
                                "object",
                                {
                                  "equals": "string",
                                  "field": "string"
                                }
                              ],
                              [
                                "object",
                                {
                                  "equals": "string",
                                  "field": "string"
                                }
                              ]
                            ]
                          ]
                        }
                      ],
                      "description": "string",
                      "enabled": "bool",
                      "scopes": [
                        "tuple",
                        [
                          "string"
                        ]
                      ]
                    }
                  ]
                }
              ]
            },
            "create_headers": null,
            "create_query_parameters": null,
            "delete_headers": null,
            "delete_query_parameters": null,
            "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/activityLogAlerts/site-frontendservice-restart-events-prod",
            "identity": [],
            "ignore_casing": false,
            "ignore_missing_property": true,
            "location": "global",
            "locks": null,
            "name": "site-frontendservice-restart-events-prod",
            "output": {
              "value": {
                "id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod/providers/Microsoft.Insights/activityLogAlerts/site-frontendservice-restart-events-prod",
                "properties": {
                  "actions": {
                    "actionGroups": [
                      {}
                    ]
                  },
                  "condition": {
                    "allOf": [
                      {},
                      {},
                      {},
                      {}
                    ]
                  },
                  "scopes": [
                    "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-prod"
                  ]
                },
                "tags": {
                  "environment": "prod",
                  "lifetime": "permanent",
                  "owner": "Daniel\u0026Chris",
                  "purpose": "restart-monitoring"
                },
                "type": "Microsoft.Insights/ActivityLogAlerts"
              },
              "type": [
                "object",
                {
                  "id": "string",
                  "properties": [
                    "object",
                    {
                      "actions": [
                        "object",
                        {
                          "actionGroups": [
                            "tuple",
                            [
                              [
                                "object",
                                {}
                              ]
                            ]
                          ]
                        }
                      ],
                      "condition": [
                        "object",
                        {
                          "allOf": [
                            "tuple",
                            [
                              [
                                "object",
                                {}
                              ],
                              [
                                "object",
                                {}
                              ],
                              [
                                "object",
                                {}
                              ],
                              [
                                "object",
                                {}
                              ]
                            ]
                          ]
                        }
                      ],
                      "scopes": [
                        "tuple",
                        [
                          "string"
                        ]
                      ]
                    }
                  ],
                  "tags": [
                    "object",
                    {
                      "environment": "string",
                      "lifetime": "string",
                      "owner": "string",
                      "purpose": "string"
                    }
                  ],
                  "type": "string"
                }
              ]
            },
            "parent_id": "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-groupmon-prod",
            "read_headers": null,
            "read_query_parameters": null,
            "replace_triggers_external_values": null,
            "replace_triggers_refs": null,
            "response_export_values": null,
            "retry": null,
            "schema_validation_enabled": true,
            "sensitive_body": null,
            "tags": {
              "environment": "prod",
              "lifetime": "permanent",
              "owner": "Daniel\u0026Chris",
              "purpose": "restart-monitoring"
            },
            "timeouts": null,
            "type": "Microsoft.Insights/activityLogAlerts@2017-04-01",
            "update_headers": null,
            "update_query_parameters": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJzZW5zaXRpdmVfYm9keSI6ImV5Sm9ZWE5vSWpvaVpFTk9UMjFMTDI1VFdTc3hNblpJZW1GelRGaHBjM2Q2YkVkVU5WVklRVGRxUVVkWmEzWnRRM1ZSY3owaWZRPT0ifQ==",
          "dependencies": [
            "azapi_resource.app_service_plan",
            "azapi_resource.drupal_app",
            "azapi_resource.frontend_app",
            "azapi_resource.site-action-group",
            "azapi_resource.site-group",
            "azapi_resource.site-groupmon",
            "azapi_resource.site-nsg-app",
            "azapi_resource.site-nsg-database",
            "azapi_resource.site-nsg-front",
            "azapi_resource.site-vnet"
          ]
        }
      ]
    }
  ],
  "check_results": null
}
