# __generated__ by Terraform
# Please review these resources and move them into your main configuration files.

# __generated__ by Terraform from "/subscriptions/c785c74c-7bd9-4afa-ac0a-c5d7912e2fda/resourceGroups/site-group-tmpprod/providers/Microsoft.Web/sites/site-frontendservice-tmpprod"
resource "azapi_resource" "frontend_app" {
  name      = local.frontend_app_service_name_effective
  type      = "Microsoft.Web/sites@2024-04-01"
  location  = var.location
  parent_id = "/subscriptions/${var.subscription_id}/resourceGroups/${local.resource_group_name}"
  tags      = local.merged_tags

  body = {
    kind = "app,linux"
    identity = {
      type = "SystemAssigned"
    }
    properties = {
      autoGeneratedDomainNameLabelScope = "TenantReuse"
      clientAffinityEnabled             = false
      clientCertEnabled                 = false
      clientCertExclusionPaths          = null
      clientCertMode                    = "Required"
      cloningInfo                       = null
      containerSize                     = 0
      customDomainVerificationId        = null
      dailyMemoryTimeQuota              = 0
      daprConfig                        = null
      dnsConfiguration                  = {}
      enabled                           = true
      endToEndEncryptionEnabled         = false
      functionAppConfig                 = null
      hostNameSslStates                 = []
      hostNamesDisabled                 = false
      hostingEnvironmentProfile         = null
      httpsOnly                         = var.frontend_https_only
      hyperV                            = false
      ipMode                            = "IPv4"
      isXenon                           = false
      keyVaultReferenceIdentity         = "SystemAssigned"
      managedEnvironmentId              = null
      publicNetworkAccess               = "Enabled"
      redundancyMode                    = "None"
      reserved                          = true
      resourceConfig                    = null
      scmSiteAlsoStopped                = false
      serverFarmId                      = azapi_resource.app_service_plan.id
      siteConfig = {
        alwaysOn                    = true
        linuxFxVersion              = var.frontend_linux_fx_version
        minimumElasticInstanceCount = var.frontend_minimum_elastic_instance_count
        numberOfWorkers             = var.frontend_number_of_workers
        functionAppScaleLimit       = 0
      }
      storageAccountRequired = false
      # Use actual VNet resource ID to create dependency ensuring subnet & delegation exist first
      virtualNetworkSubnetId   = "${azapi_resource.site-vnet.id}/subnets/${var.subnets["app"].name}"
      vnetBackupRestoreEnabled = false
      vnetContentShareEnabled  = false
      vnetImagePullEnabled     = false
      vnetRouteAllEnabled      = true
      workloadProfileName      = null
    }
  }
  ignore_missing_property   = true
  schema_validation_enabled = true
}
